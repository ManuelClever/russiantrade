{"ast":null,"code":"(function ($) {\n  'use strict';\n\n  var DISALLOWED_ATTRIBUTES = ['sanitize', 'whiteList', 'sanitizeFn'];\n  var uriAttrs = ['background', 'cite', 'href', 'itemtype', 'longdesc', 'poster', 'src', 'xlink:href'];\n  var ARIA_ATTRIBUTE_PATTERN = /^aria-[\\w-]*$/i;\n  var DefaultWhitelist = {\n    // Global attributes allowed on any supplied element below.\n    '*': ['class', 'dir', 'id', 'lang', 'role', 'tabindex', 'style', ARIA_ATTRIBUTE_PATTERN],\n    a: ['target', 'href', 'title', 'rel'],\n    area: [],\n    b: [],\n    br: [],\n    col: [],\n    code: [],\n    div: [],\n    em: [],\n    hr: [],\n    h1: [],\n    h2: [],\n    h3: [],\n    h4: [],\n    h5: [],\n    h6: [],\n    i: [],\n    img: ['src', 'alt', 'title', 'width', 'height'],\n    li: [],\n    ol: [],\n    p: [],\n    pre: [],\n    s: [],\n    small: [],\n    span: [],\n    sub: [],\n    sup: [],\n    strong: [],\n    u: [],\n    ul: []\n  };\n  /**\r\n   * A pattern that recognizes a commonly useful subset of URLs that are safe.\r\n   *\r\n   * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\r\n   */\n\n  var SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;\n  /**\r\n   * A pattern that matches safe data URLs. Only matches image, video and audio types.\r\n   *\r\n   * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\r\n   */\n\n  var DATA_URL_PATTERN = /^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;\n\n  function allowedAttribute(attr, allowedAttributeList) {\n    var attrName = attr.nodeName.toLowerCase();\n\n    if ($.inArray(attrName, allowedAttributeList) !== -1) {\n      if ($.inArray(attrName, uriAttrs) !== -1) {\n        return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN) || attr.nodeValue.match(DATA_URL_PATTERN));\n      }\n\n      return true;\n    }\n\n    var regExp = $(allowedAttributeList).filter(function (index, value) {\n      return value instanceof RegExp;\n    }); // Check if a regular expression validates the attribute.\n\n    for (var i = 0, l = regExp.length; i < l; i++) {\n      if (attrName.match(regExp[i])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function sanitizeHtml(unsafeElements, whiteList, sanitizeFn) {\n    if (sanitizeFn && typeof sanitizeFn === 'function') {\n      return sanitizeFn(unsafeElements);\n    }\n\n    var whitelistKeys = Object.keys(whiteList);\n\n    for (var i = 0, len = unsafeElements.length; i < len; i++) {\n      var elements = unsafeElements[i].querySelectorAll('*');\n\n      for (var j = 0, len2 = elements.length; j < len2; j++) {\n        var el = elements[j];\n        var elName = el.nodeName.toLowerCase();\n\n        if (whitelistKeys.indexOf(elName) === -1) {\n          el.parentNode.removeChild(el);\n          continue;\n        }\n\n        var attributeList = [].slice.call(el.attributes);\n        var whitelistedAttributes = [].concat(whiteList['*'] || [], whiteList[elName] || []);\n\n        for (var k = 0, len3 = attributeList.length; k < len3; k++) {\n          var attr = attributeList[k];\n\n          if (!allowedAttribute(attr, whitelistedAttributes)) {\n            el.removeAttribute(attr.nodeName);\n          }\n        }\n      }\n    }\n  } // Polyfill for browsers with no classList support\n  // Remove in v2\n\n\n  if (!('classList' in document.createElement('_'))) {\n    (function (view) {\n      if (!('Element' in view)) return;\n\n      var classListProp = 'classList',\n          protoProp = 'prototype',\n          elemCtrProto = view.Element[protoProp],\n          objCtr = Object,\n          classListGetter = function () {\n        var $elem = $(this);\n        return {\n          add: function (classes) {\n            classes = Array.prototype.slice.call(arguments).join(' ');\n            return $elem.addClass(classes);\n          },\n          remove: function (classes) {\n            classes = Array.prototype.slice.call(arguments).join(' ');\n            return $elem.removeClass(classes);\n          },\n          toggle: function (classes, force) {\n            return $elem.toggleClass(classes, force);\n          },\n          contains: function (classes) {\n            return $elem.hasClass(classes);\n          }\n        };\n      };\n\n      if (objCtr.defineProperty) {\n        var classListPropDesc = {\n          get: classListGetter,\n          enumerable: true,\n          configurable: true\n        };\n\n        try {\n          objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n        } catch (ex) {\n          // IE 8 doesn't support enumerable:true\n          // adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\n          // modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\n          if (ex.number === undefined || ex.number === -0x7FF5EC54) {\n            classListPropDesc.enumerable = false;\n            objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n          }\n        }\n      } else if (objCtr[protoProp].__defineGetter__) {\n        elemCtrProto.__defineGetter__(classListProp, classListGetter);\n      }\n    })(window);\n  }\n\n  var testElement = document.createElement('_');\n  testElement.classList.add('c1', 'c2');\n\n  if (!testElement.classList.contains('c2')) {\n    var _add = DOMTokenList.prototype.add,\n        _remove = DOMTokenList.prototype.remove;\n\n    DOMTokenList.prototype.add = function () {\n      Array.prototype.forEach.call(arguments, _add.bind(this));\n    };\n\n    DOMTokenList.prototype.remove = function () {\n      Array.prototype.forEach.call(arguments, _remove.bind(this));\n    };\n  }\n\n  testElement.classList.toggle('c3', false); // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n  // support the second argument.\n\n  if (testElement.classList.contains('c3')) {\n    var _toggle = DOMTokenList.prototype.toggle;\n\n    DOMTokenList.prototype.toggle = function (token, force) {\n      if (1 in arguments && !this.contains(token) === !force) {\n        return force;\n      } else {\n        return _toggle.call(this, token);\n      }\n    };\n  }\n\n  testElement = null; // shallow array comparison\n\n  function isEqual(array1, array2) {\n    return array1.length === array2.length && array1.every(function (element, index) {\n      return element === array2[index];\n    });\n  }\n\n  ; // <editor-fold desc=\"Shims\">\n\n  if (!String.prototype.startsWith) {\n    (function () {\n      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\n\n      var defineProperty = function () {\n        // IE 8 only supports `Object.defineProperty` on DOM elements\n        try {\n          var object = {};\n          var $defineProperty = Object.defineProperty;\n          var result = $defineProperty(object, object, object) && $defineProperty;\n        } catch (error) {}\n\n        return result;\n      }();\n\n      var toString = {}.toString;\n\n      var startsWith = function (search) {\n        if (this == null) {\n          throw new TypeError();\n        }\n\n        var string = String(this);\n\n        if (search && toString.call(search) == '[object RegExp]') {\n          throw new TypeError();\n        }\n\n        var stringLength = string.length;\n        var searchString = String(search);\n        var searchLength = searchString.length;\n        var position = arguments.length > 1 ? arguments[1] : undefined; // `ToInteger`\n\n        var pos = position ? Number(position) : 0;\n\n        if (pos != pos) {\n          // better `isNaN`\n          pos = 0;\n        }\n\n        var start = Math.min(Math.max(pos, 0), stringLength); // Avoid the `indexOf` call if no match is possible\n\n        if (searchLength + start > stringLength) {\n          return false;\n        }\n\n        var index = -1;\n\n        while (++index < searchLength) {\n          if (string.charCodeAt(start + index) != searchString.charCodeAt(index)) {\n            return false;\n          }\n        }\n\n        return true;\n      };\n\n      if (defineProperty) {\n        defineProperty(String.prototype, 'startsWith', {\n          'value': startsWith,\n          'configurable': true,\n          'writable': true\n        });\n      } else {\n        String.prototype.startsWith = startsWith;\n      }\n    })();\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o, // object\n    k, // key\n    r // result array\n    ) {\n      // initialize object and result\n      r = []; // iterate over object keys\n\n      for (k in o) {\n        // fill result array with non-prototypical keys\n        r.hasOwnProperty.call(o, k) && r.push(k);\n      } // return result\n\n\n      return r;\n    };\n  }\n\n  if (HTMLSelectElement && !HTMLSelectElement.prototype.hasOwnProperty('selectedOptions')) {\n    Object.defineProperty(HTMLSelectElement.prototype, 'selectedOptions', {\n      get: function () {\n        return this.querySelectorAll(':checked');\n      }\n    });\n  }\n\n  function getSelectedOptions(select, ignoreDisabled) {\n    var selectedOptions = select.selectedOptions,\n        options = [],\n        opt;\n\n    if (ignoreDisabled) {\n      for (var i = 0, len = selectedOptions.length; i < len; i++) {\n        opt = selectedOptions[i];\n\n        if (!(opt.disabled || opt.parentNode.tagName === 'OPTGROUP' && opt.parentNode.disabled)) {\n          options.push(opt);\n        }\n      }\n\n      return options;\n    }\n\n    return selectedOptions;\n  } // much faster than $.val()\n\n\n  function getSelectValues(select, selectedOptions) {\n    var value = [],\n        options = selectedOptions || select.selectedOptions,\n        opt;\n\n    for (var i = 0, len = options.length; i < len; i++) {\n      opt = options[i];\n\n      if (!(opt.disabled || opt.parentNode.tagName === 'OPTGROUP' && opt.parentNode.disabled)) {\n        value.push(opt.value);\n      }\n    }\n\n    if (!select.multiple) {\n      return !value.length ? null : value[0];\n    }\n\n    return value;\n  } // set data-selected on select element if the value has been programmatically selected\n  // prior to initialization of bootstrap-select\n  // * consider removing or replacing an alternative method *\n\n\n  var valHooks = {\n    useDefault: false,\n    _set: $.valHooks.select.set\n  };\n\n  $.valHooks.select.set = function (elem, value) {\n    if (value && !valHooks.useDefault) $(elem).data('selected', true);\n    return valHooks._set.apply(this, arguments);\n  };\n\n  var changedArguments = null;\n\n  var EventIsSupported = function () {\n    try {\n      new Event('change');\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }();\n\n  $.fn.triggerNative = function (eventName) {\n    var el = this[0],\n        event;\n\n    if (el.dispatchEvent) {\n      // for modern browsers & IE9+\n      if (EventIsSupported) {\n        // For modern browsers\n        event = new Event(eventName, {\n          bubbles: true\n        });\n      } else {\n        // For IE since it doesn't support Event constructor\n        event = document.createEvent('Event');\n        event.initEvent(eventName, true, false);\n      }\n\n      el.dispatchEvent(event);\n    } else if (el.fireEvent) {\n      // for IE8\n      event = document.createEventObject();\n      event.eventType = eventName;\n      el.fireEvent('on' + eventName, event);\n    } else {\n      // fall back to jQuery.trigger\n      this.trigger(eventName);\n    }\n  }; // </editor-fold>\n\n\n  function stringSearch(li, searchString, method, normalize) {\n    var stringTypes = ['display', 'subtext', 'tokens'],\n        searchSuccess = false;\n\n    for (var i = 0; i < stringTypes.length; i++) {\n      var stringType = stringTypes[i],\n          string = li[stringType];\n\n      if (string) {\n        string = string.toString(); // Strip HTML tags. This isn't perfect, but it's much faster than any other method\n\n        if (stringType === 'display') {\n          string = string.replace(/<[^>]+>/g, '');\n        }\n\n        if (normalize) string = normalizeToBase(string);\n        string = string.toUpperCase();\n\n        if (method === 'contains') {\n          searchSuccess = string.indexOf(searchString) >= 0;\n        } else {\n          searchSuccess = string.startsWith(searchString);\n        }\n\n        if (searchSuccess) break;\n      }\n    }\n\n    return searchSuccess;\n  }\n\n  function toInteger(value) {\n    return parseInt(value, 10) || 0;\n  } // Borrowed from Lodash (_.deburr)\n\n  /** Used to map Latin Unicode letters to basic Latin letters. */\n\n\n  var deburredLetters = {\n    // Latin-1 Supplement block.\n    '\\xc0': 'A',\n    '\\xc1': 'A',\n    '\\xc2': 'A',\n    '\\xc3': 'A',\n    '\\xc4': 'A',\n    '\\xc5': 'A',\n    '\\xe0': 'a',\n    '\\xe1': 'a',\n    '\\xe2': 'a',\n    '\\xe3': 'a',\n    '\\xe4': 'a',\n    '\\xe5': 'a',\n    '\\xc7': 'C',\n    '\\xe7': 'c',\n    '\\xd0': 'D',\n    '\\xf0': 'd',\n    '\\xc8': 'E',\n    '\\xc9': 'E',\n    '\\xca': 'E',\n    '\\xcb': 'E',\n    '\\xe8': 'e',\n    '\\xe9': 'e',\n    '\\xea': 'e',\n    '\\xeb': 'e',\n    '\\xcc': 'I',\n    '\\xcd': 'I',\n    '\\xce': 'I',\n    '\\xcf': 'I',\n    '\\xec': 'i',\n    '\\xed': 'i',\n    '\\xee': 'i',\n    '\\xef': 'i',\n    '\\xd1': 'N',\n    '\\xf1': 'n',\n    '\\xd2': 'O',\n    '\\xd3': 'O',\n    '\\xd4': 'O',\n    '\\xd5': 'O',\n    '\\xd6': 'O',\n    '\\xd8': 'O',\n    '\\xf2': 'o',\n    '\\xf3': 'o',\n    '\\xf4': 'o',\n    '\\xf5': 'o',\n    '\\xf6': 'o',\n    '\\xf8': 'o',\n    '\\xd9': 'U',\n    '\\xda': 'U',\n    '\\xdb': 'U',\n    '\\xdc': 'U',\n    '\\xf9': 'u',\n    '\\xfa': 'u',\n    '\\xfb': 'u',\n    '\\xfc': 'u',\n    '\\xdd': 'Y',\n    '\\xfd': 'y',\n    '\\xff': 'y',\n    '\\xc6': 'Ae',\n    '\\xe6': 'ae',\n    '\\xde': 'Th',\n    '\\xfe': 'th',\n    '\\xdf': 'ss',\n    // Latin Extended-A block.\n    '\\u0100': 'A',\n    '\\u0102': 'A',\n    '\\u0104': 'A',\n    '\\u0101': 'a',\n    '\\u0103': 'a',\n    '\\u0105': 'a',\n    '\\u0106': 'C',\n    '\\u0108': 'C',\n    '\\u010a': 'C',\n    '\\u010c': 'C',\n    '\\u0107': 'c',\n    '\\u0109': 'c',\n    '\\u010b': 'c',\n    '\\u010d': 'c',\n    '\\u010e': 'D',\n    '\\u0110': 'D',\n    '\\u010f': 'd',\n    '\\u0111': 'd',\n    '\\u0112': 'E',\n    '\\u0114': 'E',\n    '\\u0116': 'E',\n    '\\u0118': 'E',\n    '\\u011a': 'E',\n    '\\u0113': 'e',\n    '\\u0115': 'e',\n    '\\u0117': 'e',\n    '\\u0119': 'e',\n    '\\u011b': 'e',\n    '\\u011c': 'G',\n    '\\u011e': 'G',\n    '\\u0120': 'G',\n    '\\u0122': 'G',\n    '\\u011d': 'g',\n    '\\u011f': 'g',\n    '\\u0121': 'g',\n    '\\u0123': 'g',\n    '\\u0124': 'H',\n    '\\u0126': 'H',\n    '\\u0125': 'h',\n    '\\u0127': 'h',\n    '\\u0128': 'I',\n    '\\u012a': 'I',\n    '\\u012c': 'I',\n    '\\u012e': 'I',\n    '\\u0130': 'I',\n    '\\u0129': 'i',\n    '\\u012b': 'i',\n    '\\u012d': 'i',\n    '\\u012f': 'i',\n    '\\u0131': 'i',\n    '\\u0134': 'J',\n    '\\u0135': 'j',\n    '\\u0136': 'K',\n    '\\u0137': 'k',\n    '\\u0138': 'k',\n    '\\u0139': 'L',\n    '\\u013b': 'L',\n    '\\u013d': 'L',\n    '\\u013f': 'L',\n    '\\u0141': 'L',\n    '\\u013a': 'l',\n    '\\u013c': 'l',\n    '\\u013e': 'l',\n    '\\u0140': 'l',\n    '\\u0142': 'l',\n    '\\u0143': 'N',\n    '\\u0145': 'N',\n    '\\u0147': 'N',\n    '\\u014a': 'N',\n    '\\u0144': 'n',\n    '\\u0146': 'n',\n    '\\u0148': 'n',\n    '\\u014b': 'n',\n    '\\u014c': 'O',\n    '\\u014e': 'O',\n    '\\u0150': 'O',\n    '\\u014d': 'o',\n    '\\u014f': 'o',\n    '\\u0151': 'o',\n    '\\u0154': 'R',\n    '\\u0156': 'R',\n    '\\u0158': 'R',\n    '\\u0155': 'r',\n    '\\u0157': 'r',\n    '\\u0159': 'r',\n    '\\u015a': 'S',\n    '\\u015c': 'S',\n    '\\u015e': 'S',\n    '\\u0160': 'S',\n    '\\u015b': 's',\n    '\\u015d': 's',\n    '\\u015f': 's',\n    '\\u0161': 's',\n    '\\u0162': 'T',\n    '\\u0164': 'T',\n    '\\u0166': 'T',\n    '\\u0163': 't',\n    '\\u0165': 't',\n    '\\u0167': 't',\n    '\\u0168': 'U',\n    '\\u016a': 'U',\n    '\\u016c': 'U',\n    '\\u016e': 'U',\n    '\\u0170': 'U',\n    '\\u0172': 'U',\n    '\\u0169': 'u',\n    '\\u016b': 'u',\n    '\\u016d': 'u',\n    '\\u016f': 'u',\n    '\\u0171': 'u',\n    '\\u0173': 'u',\n    '\\u0174': 'W',\n    '\\u0175': 'w',\n    '\\u0176': 'Y',\n    '\\u0177': 'y',\n    '\\u0178': 'Y',\n    '\\u0179': 'Z',\n    '\\u017b': 'Z',\n    '\\u017d': 'Z',\n    '\\u017a': 'z',\n    '\\u017c': 'z',\n    '\\u017e': 'z',\n    '\\u0132': 'IJ',\n    '\\u0133': 'ij',\n    '\\u0152': 'Oe',\n    '\\u0153': 'oe',\n    '\\u0149': \"'n\",\n    '\\u017f': 's'\n  };\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\n\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n  /** Used to compose unicode character classes. */\n\n  var rsComboMarksRange = '\\\\u0300-\\\\u036f',\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n      rsComboMarksExtendedRange = '\\\\u1ab0-\\\\u1aff',\n      rsComboMarksSupplementRange = '\\\\u1dc0-\\\\u1dff',\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange + rsComboMarksExtendedRange + rsComboMarksSupplementRange;\n  /** Used to compose unicode capture groups. */\n\n  var rsCombo = '[' + rsComboRange + ']';\n  /**\r\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\r\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\r\n   */\n\n  var reComboMark = RegExp(rsCombo, 'g');\n\n  function deburrLetter(key) {\n    return deburredLetters[key];\n  }\n\n  ;\n\n  function normalizeToBase(string) {\n    string = string.toString();\n    return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n  } // List of HTML entities for escaping.\n\n\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  }; // Functions for escaping and unescaping strings to/from HTML interpolation.\n\n  var createEscaper = function (map) {\n    var escaper = function (match) {\n      return map[match];\n    }; // Regexes for identifying a key that needs to be escaped.\n\n\n    var source = '(?:' + Object.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function (string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n\n  var htmlEscape = createEscaper(escapeMap);\n  /**\r\n   * ------------------------------------------------------------------------\r\n   * Constants\r\n   * ------------------------------------------------------------------------\r\n   */\n\n  var keyCodeMap = {\n    32: ' ',\n    48: '0',\n    49: '1',\n    50: '2',\n    51: '3',\n    52: '4',\n    53: '5',\n    54: '6',\n    55: '7',\n    56: '8',\n    57: '9',\n    59: ';',\n    65: 'A',\n    66: 'B',\n    67: 'C',\n    68: 'D',\n    69: 'E',\n    70: 'F',\n    71: 'G',\n    72: 'H',\n    73: 'I',\n    74: 'J',\n    75: 'K',\n    76: 'L',\n    77: 'M',\n    78: 'N',\n    79: 'O',\n    80: 'P',\n    81: 'Q',\n    82: 'R',\n    83: 'S',\n    84: 'T',\n    85: 'U',\n    86: 'V',\n    87: 'W',\n    88: 'X',\n    89: 'Y',\n    90: 'Z',\n    96: '0',\n    97: '1',\n    98: '2',\n    99: '3',\n    100: '4',\n    101: '5',\n    102: '6',\n    103: '7',\n    104: '8',\n    105: '9'\n  };\n  var keyCodes = {\n    ESCAPE: 27,\n    // KeyboardEvent.which value for Escape (Esc) key\n    ENTER: 13,\n    // KeyboardEvent.which value for Enter key\n    SPACE: 32,\n    // KeyboardEvent.which value for space key\n    TAB: 9,\n    // KeyboardEvent.which value for tab key\n    ARROW_UP: 38,\n    // KeyboardEvent.which value for up arrow key\n    ARROW_DOWN: 40 // KeyboardEvent.which value for down arrow key\n\n  };\n  var version = {\n    success: false,\n    major: '3'\n  };\n\n  try {\n    version.full = ($.fn.dropdown.Constructor.VERSION || '').split(' ')[0].split('.');\n    version.major = version.full[0];\n    version.success = true;\n  } catch (err) {// do nothing\n  }\n\n  var selectId = 0;\n  var EVENT_KEY = '.bs.select';\n  var classNames = {\n    DISABLED: 'disabled',\n    DIVIDER: 'divider',\n    SHOW: 'open',\n    DROPUP: 'dropup',\n    MENU: 'dropdown-menu',\n    MENURIGHT: 'dropdown-menu-right',\n    MENULEFT: 'dropdown-menu-left',\n    // to-do: replace with more advanced template/customization options\n    BUTTONCLASS: 'btn-default',\n    POPOVERHEADER: 'popover-title',\n    ICONBASE: 'glyphicon',\n    TICKICON: 'glyphicon-ok'\n  };\n  var Selector = {\n    MENU: '.' + classNames.MENU\n  };\n  var elementTemplates = {\n    div: document.createElement('div'),\n    span: document.createElement('span'),\n    i: document.createElement('i'),\n    subtext: document.createElement('small'),\n    a: document.createElement('a'),\n    li: document.createElement('li'),\n    whitespace: document.createTextNode('\\u00A0'),\n    fragment: document.createDocumentFragment()\n  };\n  elementTemplates.noResults = elementTemplates.li.cloneNode(false);\n  elementTemplates.noResults.className = 'no-results';\n  elementTemplates.a.setAttribute('role', 'option');\n  elementTemplates.a.className = 'dropdown-item';\n  elementTemplates.subtext.className = 'text-muted';\n  elementTemplates.text = elementTemplates.span.cloneNode(false);\n  elementTemplates.text.className = 'text';\n  elementTemplates.checkMark = elementTemplates.span.cloneNode(false);\n  var REGEXP_ARROW = new RegExp(keyCodes.ARROW_UP + '|' + keyCodes.ARROW_DOWN);\n  var REGEXP_TAB_OR_ESCAPE = new RegExp('^' + keyCodes.TAB + '$|' + keyCodes.ESCAPE);\n  var generateOption = {\n    li: function (content, classes, optgroup) {\n      var li = elementTemplates.li.cloneNode(false);\n\n      if (content) {\n        if (content.nodeType === 1 || content.nodeType === 11) {\n          li.appendChild(content);\n        } else {\n          li.innerHTML = content;\n        }\n      }\n\n      if (typeof classes !== 'undefined' && classes !== '') li.className = classes;\n      if (typeof optgroup !== 'undefined' && optgroup !== null) li.classList.add('optgroup-' + optgroup);\n      return li;\n    },\n    a: function (text, classes, inline) {\n      var a = elementTemplates.a.cloneNode(true);\n\n      if (text) {\n        if (text.nodeType === 11) {\n          a.appendChild(text);\n        } else {\n          a.insertAdjacentHTML('beforeend', text);\n        }\n      }\n\n      if (typeof classes !== 'undefined' && classes !== '') a.classList.add.apply(a.classList, classes.split(/\\s+/));\n      if (inline) a.setAttribute('style', inline);\n      return a;\n    },\n    text: function (options, useFragment) {\n      var textElement = elementTemplates.text.cloneNode(false),\n          subtextElement,\n          iconElement;\n\n      if (options.content) {\n        textElement.innerHTML = options.content;\n      } else {\n        textElement.textContent = options.text;\n\n        if (options.icon) {\n          var whitespace = elementTemplates.whitespace.cloneNode(false); // need to use <i> for icons in the button to prevent a breaking change\n          // note: switch to span in next major release\n\n          iconElement = (useFragment === true ? elementTemplates.i : elementTemplates.span).cloneNode(false);\n          iconElement.className = this.options.iconBase + ' ' + options.icon;\n          elementTemplates.fragment.appendChild(iconElement);\n          elementTemplates.fragment.appendChild(whitespace);\n        }\n\n        if (options.subtext) {\n          subtextElement = elementTemplates.subtext.cloneNode(false);\n          subtextElement.textContent = options.subtext;\n          textElement.appendChild(subtextElement);\n        }\n      }\n\n      if (useFragment === true) {\n        while (textElement.childNodes.length > 0) {\n          elementTemplates.fragment.appendChild(textElement.childNodes[0]);\n        }\n      } else {\n        elementTemplates.fragment.appendChild(textElement);\n      }\n\n      return elementTemplates.fragment;\n    },\n    label: function (options) {\n      var textElement = elementTemplates.text.cloneNode(false),\n          subtextElement,\n          iconElement;\n      textElement.innerHTML = options.display;\n\n      if (options.icon) {\n        var whitespace = elementTemplates.whitespace.cloneNode(false);\n        iconElement = elementTemplates.span.cloneNode(false);\n        iconElement.className = this.options.iconBase + ' ' + options.icon;\n        elementTemplates.fragment.appendChild(iconElement);\n        elementTemplates.fragment.appendChild(whitespace);\n      }\n\n      if (options.subtext) {\n        subtextElement = elementTemplates.subtext.cloneNode(false);\n        subtextElement.textContent = options.subtext;\n        textElement.appendChild(subtextElement);\n      }\n\n      elementTemplates.fragment.appendChild(textElement);\n      return elementTemplates.fragment;\n    }\n  };\n\n  function showNoResults(searchMatch, searchValue) {\n    if (!searchMatch.length) {\n      elementTemplates.noResults.innerHTML = this.options.noneResultsText.replace('{0}', '\"' + htmlEscape(searchValue) + '\"');\n      this.$menuInner[0].firstChild.appendChild(elementTemplates.noResults);\n    }\n  }\n\n  var Selectpicker = function (element, options) {\n    var that = this; // bootstrap-select has been initialized - revert valHooks.select.set back to its original function\n\n    if (!valHooks.useDefault) {\n      $.valHooks.select.set = valHooks._set;\n      valHooks.useDefault = true;\n    }\n\n    this.$element = $(element);\n    this.$newElement = null;\n    this.$button = null;\n    this.$menu = null;\n    this.options = options;\n    this.selectpicker = {\n      main: {},\n      search: {},\n      current: {},\n      // current changes if a search is in progress\n      view: {},\n      isSearching: false,\n      keydown: {\n        keyHistory: '',\n        resetKeyHistory: {\n          start: function () {\n            return setTimeout(function () {\n              that.selectpicker.keydown.keyHistory = '';\n            }, 800);\n          }\n        }\n      }\n    };\n    this.sizeInfo = {}; // If we have no title yet, try to pull it from the html title attribute (jQuery doesnt' pick it up as it's not a\n    // data-attribute)\n\n    if (this.options.title === null) {\n      this.options.title = this.$element.attr('title');\n    } // Format window padding\n\n\n    var winPad = this.options.windowPadding;\n\n    if (typeof winPad === 'number') {\n      this.options.windowPadding = [winPad, winPad, winPad, winPad];\n    } // Expose public methods\n\n\n    this.val = Selectpicker.prototype.val;\n    this.render = Selectpicker.prototype.render;\n    this.refresh = Selectpicker.prototype.refresh;\n    this.setStyle = Selectpicker.prototype.setStyle;\n    this.selectAll = Selectpicker.prototype.selectAll;\n    this.deselectAll = Selectpicker.prototype.deselectAll;\n    this.destroy = Selectpicker.prototype.destroy;\n    this.remove = Selectpicker.prototype.remove;\n    this.show = Selectpicker.prototype.show;\n    this.hide = Selectpicker.prototype.hide;\n    this.init();\n  };\n\n  Selectpicker.VERSION = '1.13.18'; // part of this is duplicated in i18n/defaults-en_US.js. Make sure to update both.\n\n  Selectpicker.DEFAULTS = {\n    noneSelectedText: 'Nothing selected',\n    noneResultsText: 'No results matched {0}',\n    countSelectedText: function (numSelected, numTotal) {\n      return numSelected == 1 ? '{0} item selected' : '{0} items selected';\n    },\n    maxOptionsText: function (numAll, numGroup) {\n      return [numAll == 1 ? 'Limit reached ({n} item max)' : 'Limit reached ({n} items max)', numGroup == 1 ? 'Group limit reached ({n} item max)' : 'Group limit reached ({n} items max)'];\n    },\n    selectAllText: 'Select All',\n    deselectAllText: 'Deselect All',\n    doneButton: false,\n    doneButtonText: 'Close',\n    multipleSeparator: ', ',\n    styleBase: 'btn',\n    style: classNames.BUTTONCLASS,\n    size: 'auto',\n    title: null,\n    selectedTextFormat: 'values',\n    width: false,\n    container: false,\n    hideDisabled: false,\n    showSubtext: false,\n    showIcon: true,\n    showContent: true,\n    dropupAuto: true,\n    header: false,\n    liveSearch: false,\n    liveSearchPlaceholder: null,\n    liveSearchNormalize: false,\n    liveSearchStyle: 'contains',\n    actionsBox: false,\n    iconBase: classNames.ICONBASE,\n    tickIcon: classNames.TICKICON,\n    showTick: false,\n    template: {\n      caret: '<span class=\"caret\"></span>'\n    },\n    maxOptions: false,\n    mobile: false,\n    selectOnTab: false,\n    dropdownAlignRight: false,\n    windowPadding: 0,\n    virtualScroll: 600,\n    display: false,\n    sanitize: true,\n    sanitizeFn: null,\n    whiteList: DefaultWhitelist\n  };\n  Selectpicker.prototype = {\n    constructor: Selectpicker,\n    init: function () {\n      var that = this,\n          id = this.$element.attr('id'),\n          element = this.$element[0],\n          form = element.form;\n      selectId++;\n      this.selectId = 'bs-select-' + selectId;\n      element.classList.add('bs-select-hidden');\n      this.multiple = this.$element.prop('multiple');\n      this.autofocus = this.$element.prop('autofocus');\n\n      if (element.classList.contains('show-tick')) {\n        this.options.showTick = true;\n      }\n\n      this.$newElement = this.createDropdown();\n      this.buildData();\n      this.$element.after(this.$newElement).prependTo(this.$newElement); // ensure select is associated with form element if it got unlinked after moving it inside newElement\n\n      if (form && element.form === null) {\n        if (!form.id) form.id = 'form-' + this.selectId;\n        element.setAttribute('form', form.id);\n      }\n\n      this.$button = this.$newElement.children('button');\n      this.$menu = this.$newElement.children(Selector.MENU);\n      this.$menuInner = this.$menu.children('.inner');\n      this.$searchbox = this.$menu.find('input');\n      element.classList.remove('bs-select-hidden');\n      if (this.options.dropdownAlignRight === true) this.$menu[0].classList.add(classNames.MENURIGHT);\n\n      if (typeof id !== 'undefined') {\n        this.$button.attr('data-id', id);\n      }\n\n      this.checkDisabled();\n      this.clickListener();\n\n      if (this.options.liveSearch) {\n        this.liveSearchListener();\n        this.focusedParent = this.$searchbox[0];\n      } else {\n        this.focusedParent = this.$menuInner[0];\n      }\n\n      this.setStyle();\n      this.render();\n      this.setWidth();\n\n      if (this.options.container) {\n        this.selectPosition();\n      } else {\n        this.$element.on('hide' + EVENT_KEY, function () {\n          if (that.isVirtual()) {\n            // empty menu on close\n            var menuInner = that.$menuInner[0],\n                emptyMenu = menuInner.firstChild.cloneNode(false); // replace the existing UL with an empty one - this is faster than $.empty() or innerHTML = ''\n\n            menuInner.replaceChild(emptyMenu, menuInner.firstChild);\n            menuInner.scrollTop = 0;\n          }\n        });\n      }\n\n      this.$menu.data('this', this);\n      this.$newElement.data('this', this);\n      if (this.options.mobile) this.mobile();\n      this.$newElement.on({\n        'hide.bs.dropdown': function (e) {\n          that.$element.trigger('hide' + EVENT_KEY, e);\n        },\n        'hidden.bs.dropdown': function (e) {\n          that.$element.trigger('hidden' + EVENT_KEY, e);\n        },\n        'show.bs.dropdown': function (e) {\n          that.$element.trigger('show' + EVENT_KEY, e);\n        },\n        'shown.bs.dropdown': function (e) {\n          that.$element.trigger('shown' + EVENT_KEY, e);\n        }\n      });\n\n      if (element.hasAttribute('required')) {\n        this.$element.on('invalid' + EVENT_KEY, function () {\n          that.$button[0].classList.add('bs-invalid');\n          that.$element.on('shown' + EVENT_KEY + '.invalid', function () {\n            that.$element.val(that.$element.val()) // set the value to hide the validation message in Chrome when menu is opened\n            .off('shown' + EVENT_KEY + '.invalid');\n          }).on('rendered' + EVENT_KEY, function () {\n            // if select is no longer invalid, remove the bs-invalid class\n            if (this.validity.valid) that.$button[0].classList.remove('bs-invalid');\n            that.$element.off('rendered' + EVENT_KEY);\n          });\n          that.$button.on('blur' + EVENT_KEY, function () {\n            that.$element.trigger('focus').trigger('blur');\n            that.$button.off('blur' + EVENT_KEY);\n          });\n        });\n      }\n\n      setTimeout(function () {\n        that.buildList();\n        that.$element.trigger('loaded' + EVENT_KEY);\n      });\n    },\n    createDropdown: function () {\n      // Options\n      // If we are multiple or showTick option is set, then add the show-tick class\n      var showTick = this.multiple || this.options.showTick ? ' show-tick' : '',\n          multiselectable = this.multiple ? ' aria-multiselectable=\"true\"' : '',\n          inputGroup = '',\n          autofocus = this.autofocus ? ' autofocus' : '';\n\n      if (version.major < 4 && this.$element.parent().hasClass('input-group')) {\n        inputGroup = ' input-group-btn';\n      } // Elements\n\n\n      var drop,\n          header = '',\n          searchbox = '',\n          actionsbox = '',\n          donebutton = '';\n\n      if (this.options.header) {\n        header = '<div class=\"' + classNames.POPOVERHEADER + '\">' + '<button type=\"button\" class=\"close\" aria-hidden=\"true\">&times;</button>' + this.options.header + '</div>';\n      }\n\n      if (this.options.liveSearch) {\n        searchbox = '<div class=\"bs-searchbox\">' + '<input type=\"search\" class=\"form-control\" autocomplete=\"off\"' + (this.options.liveSearchPlaceholder === null ? '' : ' placeholder=\"' + htmlEscape(this.options.liveSearchPlaceholder) + '\"') + ' role=\"combobox\" aria-label=\"Search\" aria-controls=\"' + this.selectId + '\" aria-autocomplete=\"list\">' + '</div>';\n      }\n\n      if (this.multiple && this.options.actionsBox) {\n        actionsbox = '<div class=\"bs-actionsbox\">' + '<div class=\"btn-group btn-group-sm btn-block\">' + '<button type=\"button\" class=\"actions-btn bs-select-all btn ' + classNames.BUTTONCLASS + '\">' + this.options.selectAllText + '</button>' + '<button type=\"button\" class=\"actions-btn bs-deselect-all btn ' + classNames.BUTTONCLASS + '\">' + this.options.deselectAllText + '</button>' + '</div>' + '</div>';\n      }\n\n      if (this.multiple && this.options.doneButton) {\n        donebutton = '<div class=\"bs-donebutton\">' + '<div class=\"btn-group btn-block\">' + '<button type=\"button\" class=\"btn btn-sm ' + classNames.BUTTONCLASS + '\">' + this.options.doneButtonText + '</button>' + '</div>' + '</div>';\n      }\n\n      drop = '<div class=\"dropdown bootstrap-select' + showTick + inputGroup + '\">' + '<button type=\"button\" tabindex=\"-1\" class=\"' + this.options.styleBase + ' dropdown-toggle\" ' + (this.options.display === 'static' ? 'data-display=\"static\"' : '') + 'data-toggle=\"dropdown\"' + autofocus + ' role=\"combobox\" aria-owns=\"' + this.selectId + '\" aria-haspopup=\"listbox\" aria-expanded=\"false\">' + '<div class=\"filter-option\">' + '<div class=\"filter-option-inner\">' + '<div class=\"filter-option-inner-inner\"></div>' + '</div> ' + '</div>' + (version.major === '4' ? '' : '<span class=\"bs-caret\">' + this.options.template.caret + '</span>') + '</button>' + '<div class=\"' + classNames.MENU + ' ' + (version.major === '4' ? '' : classNames.SHOW) + '\">' + header + searchbox + actionsbox + '<div class=\"inner ' + classNames.SHOW + '\" role=\"listbox\" id=\"' + this.selectId + '\" tabindex=\"-1\" ' + multiselectable + '>' + '<ul class=\"' + classNames.MENU + ' inner ' + (version.major === '4' ? classNames.SHOW : '') + '\" role=\"presentation\">' + '</ul>' + '</div>' + donebutton + '</div>' + '</div>';\n      return $(drop);\n    },\n    setPositionData: function () {\n      this.selectpicker.view.canHighlight = [];\n      this.selectpicker.view.size = 0;\n      this.selectpicker.view.firstHighlightIndex = false;\n\n      for (var i = 0; i < this.selectpicker.current.data.length; i++) {\n        var li = this.selectpicker.current.data[i],\n            canHighlight = true;\n\n        if (li.type === 'divider') {\n          canHighlight = false;\n          li.height = this.sizeInfo.dividerHeight;\n        } else if (li.type === 'optgroup-label') {\n          canHighlight = false;\n          li.height = this.sizeInfo.dropdownHeaderHeight;\n        } else {\n          li.height = this.sizeInfo.liHeight;\n        }\n\n        if (li.disabled) canHighlight = false;\n        this.selectpicker.view.canHighlight.push(canHighlight);\n\n        if (canHighlight) {\n          this.selectpicker.view.size++;\n          li.posinset = this.selectpicker.view.size;\n          if (this.selectpicker.view.firstHighlightIndex === false) this.selectpicker.view.firstHighlightIndex = i;\n        }\n\n        li.position = (i === 0 ? 0 : this.selectpicker.current.data[i - 1].position) + li.height;\n      }\n    },\n    isVirtual: function () {\n      return this.options.virtualScroll !== false && this.selectpicker.main.elements.length >= this.options.virtualScroll || this.options.virtualScroll === true;\n    },\n    createView: function (isSearching, setSize, refresh) {\n      var that = this,\n          scrollTop = 0,\n          active = [],\n          selected,\n          prevActive;\n      this.selectpicker.isSearching = isSearching;\n      this.selectpicker.current = isSearching ? this.selectpicker.search : this.selectpicker.main;\n      this.setPositionData();\n\n      if (setSize) {\n        if (refresh) {\n          scrollTop = this.$menuInner[0].scrollTop;\n        } else if (!that.multiple) {\n          var element = that.$element[0],\n              selectedIndex = (element.options[element.selectedIndex] || {}).liIndex;\n\n          if (typeof selectedIndex === 'number' && that.options.size !== false) {\n            var selectedData = that.selectpicker.main.data[selectedIndex],\n                position = selectedData && selectedData.position;\n\n            if (position) {\n              scrollTop = position - (that.sizeInfo.menuInnerHeight + that.sizeInfo.liHeight) / 2;\n            }\n          }\n        }\n      }\n\n      scroll(scrollTop, true);\n      this.$menuInner.off('scroll.createView').on('scroll.createView', function (e, updateValue) {\n        if (!that.noScroll) scroll(this.scrollTop, updateValue);\n        that.noScroll = false;\n      });\n\n      function scroll(scrollTop, init) {\n        var size = that.selectpicker.current.elements.length,\n            chunks = [],\n            chunkSize,\n            chunkCount,\n            firstChunk,\n            lastChunk,\n            currentChunk,\n            prevPositions,\n            positionIsDifferent,\n            previousElements,\n            menuIsDifferent = true,\n            isVirtual = that.isVirtual();\n        that.selectpicker.view.scrollTop = scrollTop;\n        chunkSize = Math.ceil(that.sizeInfo.menuInnerHeight / that.sizeInfo.liHeight * 1.5); // number of options in a chunk\n\n        chunkCount = Math.round(size / chunkSize) || 1; // number of chunks\n\n        for (var i = 0; i < chunkCount; i++) {\n          var endOfChunk = (i + 1) * chunkSize;\n\n          if (i === chunkCount - 1) {\n            endOfChunk = size;\n          }\n\n          chunks[i] = [i * chunkSize + (!i ? 0 : 1), endOfChunk];\n          if (!size) break;\n\n          if (currentChunk === undefined && scrollTop - 1 <= that.selectpicker.current.data[endOfChunk - 1].position - that.sizeInfo.menuInnerHeight) {\n            currentChunk = i;\n          }\n        }\n\n        if (currentChunk === undefined) currentChunk = 0;\n        prevPositions = [that.selectpicker.view.position0, that.selectpicker.view.position1]; // always display previous, current, and next chunks\n\n        firstChunk = Math.max(0, currentChunk - 1);\n        lastChunk = Math.min(chunkCount - 1, currentChunk + 1);\n        that.selectpicker.view.position0 = isVirtual === false ? 0 : Math.max(0, chunks[firstChunk][0]) || 0;\n        that.selectpicker.view.position1 = isVirtual === false ? size : Math.min(size, chunks[lastChunk][1]) || 0;\n        positionIsDifferent = prevPositions[0] !== that.selectpicker.view.position0 || prevPositions[1] !== that.selectpicker.view.position1;\n\n        if (that.activeIndex !== undefined) {\n          prevActive = that.selectpicker.main.elements[that.prevActiveIndex];\n          active = that.selectpicker.main.elements[that.activeIndex];\n          selected = that.selectpicker.main.elements[that.selectedIndex];\n\n          if (init) {\n            if (that.activeIndex !== that.selectedIndex) {\n              that.defocusItem(active);\n            }\n\n            that.activeIndex = undefined;\n          }\n\n          if (that.activeIndex && that.activeIndex !== that.selectedIndex) {\n            that.defocusItem(selected);\n          }\n        }\n\n        if (that.prevActiveIndex !== undefined && that.prevActiveIndex !== that.activeIndex && that.prevActiveIndex !== that.selectedIndex) {\n          that.defocusItem(prevActive);\n        }\n\n        if (init || positionIsDifferent) {\n          previousElements = that.selectpicker.view.visibleElements ? that.selectpicker.view.visibleElements.slice() : [];\n\n          if (isVirtual === false) {\n            that.selectpicker.view.visibleElements = that.selectpicker.current.elements;\n          } else {\n            that.selectpicker.view.visibleElements = that.selectpicker.current.elements.slice(that.selectpicker.view.position0, that.selectpicker.view.position1);\n          }\n\n          that.setOptionStatus(); // if searching, check to make sure the list has actually been updated before updating DOM\n          // this prevents unnecessary repaints\n\n          if (isSearching || isVirtual === false && init) menuIsDifferent = !isEqual(previousElements, that.selectpicker.view.visibleElements); // if virtual scroll is disabled and not searching,\n          // menu should never need to be updated more than once\n\n          if ((init || isVirtual === true) && menuIsDifferent) {\n            var menuInner = that.$menuInner[0],\n                menuFragment = document.createDocumentFragment(),\n                emptyMenu = menuInner.firstChild.cloneNode(false),\n                marginTop,\n                marginBottom,\n                elements = that.selectpicker.view.visibleElements,\n                toSanitize = []; // replace the existing UL with an empty one - this is faster than $.empty()\n\n            menuInner.replaceChild(emptyMenu, menuInner.firstChild);\n\n            for (var i = 0, visibleElementsLen = elements.length; i < visibleElementsLen; i++) {\n              var element = elements[i],\n                  elText,\n                  elementData;\n\n              if (that.options.sanitize) {\n                elText = element.lastChild;\n\n                if (elText) {\n                  elementData = that.selectpicker.current.data[i + that.selectpicker.view.position0];\n\n                  if (elementData && elementData.content && !elementData.sanitized) {\n                    toSanitize.push(elText);\n                    elementData.sanitized = true;\n                  }\n                }\n              }\n\n              menuFragment.appendChild(element);\n            }\n\n            if (that.options.sanitize && toSanitize.length) {\n              sanitizeHtml(toSanitize, that.options.whiteList, that.options.sanitizeFn);\n            }\n\n            if (isVirtual === true) {\n              marginTop = that.selectpicker.view.position0 === 0 ? 0 : that.selectpicker.current.data[that.selectpicker.view.position0 - 1].position;\n              marginBottom = that.selectpicker.view.position1 > size - 1 ? 0 : that.selectpicker.current.data[size - 1].position - that.selectpicker.current.data[that.selectpicker.view.position1 - 1].position;\n              menuInner.firstChild.style.marginTop = marginTop + 'px';\n              menuInner.firstChild.style.marginBottom = marginBottom + 'px';\n            } else {\n              menuInner.firstChild.style.marginTop = 0;\n              menuInner.firstChild.style.marginBottom = 0;\n            }\n\n            menuInner.firstChild.appendChild(menuFragment); // if an option is encountered that is wider than the current menu width, update the menu width accordingly\n            // switch to ResizeObserver with increased browser support\n\n            if (isVirtual === true && that.sizeInfo.hasScrollBar) {\n              var menuInnerInnerWidth = menuInner.firstChild.offsetWidth;\n\n              if (init && menuInnerInnerWidth < that.sizeInfo.menuInnerInnerWidth && that.sizeInfo.totalMenuWidth > that.sizeInfo.selectWidth) {\n                menuInner.firstChild.style.minWidth = that.sizeInfo.menuInnerInnerWidth + 'px';\n              } else if (menuInnerInnerWidth > that.sizeInfo.menuInnerInnerWidth) {\n                // set to 0 to get actual width of menu\n                that.$menu[0].style.minWidth = 0;\n                var actualMenuWidth = menuInner.firstChild.offsetWidth;\n\n                if (actualMenuWidth > that.sizeInfo.menuInnerInnerWidth) {\n                  that.sizeInfo.menuInnerInnerWidth = actualMenuWidth;\n                  menuInner.firstChild.style.minWidth = that.sizeInfo.menuInnerInnerWidth + 'px';\n                } // reset to default CSS styling\n\n\n                that.$menu[0].style.minWidth = '';\n              }\n            }\n          }\n        }\n\n        that.prevActiveIndex = that.activeIndex;\n\n        if (!that.options.liveSearch) {\n          that.$menuInner.trigger('focus');\n        } else if (isSearching && init) {\n          var index = 0,\n              newActive;\n\n          if (!that.selectpicker.view.canHighlight[index]) {\n            index = 1 + that.selectpicker.view.canHighlight.slice(1).indexOf(true);\n          }\n\n          newActive = that.selectpicker.view.visibleElements[index];\n          that.defocusItem(that.selectpicker.view.currentActive);\n          that.activeIndex = (that.selectpicker.current.data[index] || {}).index;\n          that.focusItem(newActive);\n        }\n      }\n\n      $(window).off('resize' + EVENT_KEY + '.' + this.selectId + '.createView').on('resize' + EVENT_KEY + '.' + this.selectId + '.createView', function () {\n        var isActive = that.$newElement.hasClass(classNames.SHOW);\n        if (isActive) scroll(that.$menuInner[0].scrollTop);\n      });\n    },\n    focusItem: function (li, liData, noStyle) {\n      if (li) {\n        liData = liData || this.selectpicker.main.data[this.activeIndex];\n        var a = li.firstChild;\n\n        if (a) {\n          a.setAttribute('aria-setsize', this.selectpicker.view.size);\n          a.setAttribute('aria-posinset', liData.posinset);\n\n          if (noStyle !== true) {\n            this.focusedParent.setAttribute('aria-activedescendant', a.id);\n            li.classList.add('active');\n            a.classList.add('active');\n          }\n        }\n      }\n    },\n    defocusItem: function (li) {\n      if (li) {\n        li.classList.remove('active');\n        if (li.firstChild) li.firstChild.classList.remove('active');\n      }\n    },\n    setPlaceholder: function () {\n      var that = this,\n          updateIndex = false;\n\n      if (this.options.title && !this.multiple) {\n        if (!this.selectpicker.view.titleOption) this.selectpicker.view.titleOption = document.createElement('option'); // this option doesn't create a new <li> element, but does add a new option at the start,\n        // so startIndex should increase to prevent having to check every option for the bs-title-option class\n\n        updateIndex = true;\n        var element = this.$element[0],\n            selectTitleOption = false,\n            titleNotAppended = !this.selectpicker.view.titleOption.parentNode,\n            selectedIndex = element.selectedIndex,\n            selectedOption = element.options[selectedIndex],\n            navigation = window.performance && window.performance.getEntriesByType('navigation'),\n            // Safari doesn't support getEntriesByType('navigation') - fall back to performance.navigation\n        isNotBackForward = navigation && navigation.length ? navigation[0].type !== 'back_forward' : window.performance.navigation.type !== 2;\n\n        if (titleNotAppended) {\n          // Use native JS to prepend option (faster)\n          this.selectpicker.view.titleOption.className = 'bs-title-option';\n          this.selectpicker.view.titleOption.value = ''; // Check if selected or data-selected attribute is already set on an option. If not, select the titleOption option.\n          // the selected item may have been changed by user or programmatically before the bootstrap select plugin runs,\n          // if so, the select will have the data-selected attribute\n\n          selectTitleOption = !selectedOption || selectedIndex === 0 && selectedOption.defaultSelected === false && this.$element.data('selected') === undefined;\n        }\n\n        if (titleNotAppended || this.selectpicker.view.titleOption.index !== 0) {\n          element.insertBefore(this.selectpicker.view.titleOption, element.firstChild);\n        } // Set selected *after* appending to select,\n        // otherwise the option doesn't get selected in IE\n        // set using selectedIndex, as setting the selected attr to true here doesn't work in IE11\n\n\n        if (selectTitleOption && isNotBackForward) {\n          element.selectedIndex = 0;\n        } else if (document.readyState !== 'complete') {\n          // if navigation type is back_forward, there's a chance the select will have its value set by BFCache\n          // wait for that value to be set, then run render again\n          window.addEventListener('pageshow', function () {\n            if (that.selectpicker.view.displayedValue !== element.value) that.render();\n          });\n        }\n      }\n\n      return updateIndex;\n    },\n    buildData: function () {\n      var optionSelector = ':not([hidden]):not([data-hidden=\"true\"])',\n          mainData = [],\n          optID = 0,\n          startIndex = this.setPlaceholder() ? 1 : 0; // append the titleOption if necessary and skip the first option in the loop\n\n      if (this.options.hideDisabled) optionSelector += ':not(:disabled)';\n      var selectOptions = this.$element[0].querySelectorAll('select > *' + optionSelector);\n\n      function addDivider(config) {\n        var previousData = mainData[mainData.length - 1]; // ensure optgroup doesn't create back-to-back dividers\n\n        if (previousData && previousData.type === 'divider' && (previousData.optID || config.optID)) {\n          return;\n        }\n\n        config = config || {};\n        config.type = 'divider';\n        mainData.push(config);\n      }\n\n      function addOption(option, config) {\n        config = config || {};\n        config.divider = option.getAttribute('data-divider') === 'true';\n\n        if (config.divider) {\n          addDivider({\n            optID: config.optID\n          });\n        } else {\n          var liIndex = mainData.length,\n              cssText = option.style.cssText,\n              inlineStyle = cssText ? htmlEscape(cssText) : '',\n              optionClass = (option.className || '') + (config.optgroupClass || '');\n          if (config.optID) optionClass = 'opt ' + optionClass;\n          config.optionClass = optionClass.trim();\n          config.inlineStyle = inlineStyle;\n          config.text = option.textContent;\n          config.content = option.getAttribute('data-content');\n          config.tokens = option.getAttribute('data-tokens');\n          config.subtext = option.getAttribute('data-subtext');\n          config.icon = option.getAttribute('data-icon');\n          option.liIndex = liIndex;\n          config.display = config.content || config.text;\n          config.type = 'option';\n          config.index = liIndex;\n          config.option = option;\n          config.selected = !!option.selected;\n          config.disabled = config.disabled || !!option.disabled;\n          mainData.push(config);\n        }\n      }\n\n      function addOptgroup(index, selectOptions) {\n        var optgroup = selectOptions[index],\n            // skip placeholder option\n        previous = index - 1 < startIndex ? false : selectOptions[index - 1],\n            next = selectOptions[index + 1],\n            options = optgroup.querySelectorAll('option' + optionSelector);\n        if (!options.length) return;\n        var config = {\n          display: htmlEscape(optgroup.label),\n          subtext: optgroup.getAttribute('data-subtext'),\n          icon: optgroup.getAttribute('data-icon'),\n          type: 'optgroup-label',\n          optgroupClass: ' ' + (optgroup.className || '')\n        },\n            headerIndex,\n            lastIndex;\n        optID++;\n\n        if (previous) {\n          addDivider({\n            optID: optID\n          });\n        }\n\n        config.optID = optID;\n        mainData.push(config);\n\n        for (var j = 0, len = options.length; j < len; j++) {\n          var option = options[j];\n\n          if (j === 0) {\n            headerIndex = mainData.length - 1;\n            lastIndex = headerIndex + len;\n          }\n\n          addOption(option, {\n            headerIndex: headerIndex,\n            lastIndex: lastIndex,\n            optID: config.optID,\n            optgroupClass: config.optgroupClass,\n            disabled: optgroup.disabled\n          });\n        }\n\n        if (next) {\n          addDivider({\n            optID: optID\n          });\n        }\n      }\n\n      for (var len = selectOptions.length, i = startIndex; i < len; i++) {\n        var item = selectOptions[i];\n\n        if (item.tagName !== 'OPTGROUP') {\n          addOption(item, {});\n        } else {\n          addOptgroup(i, selectOptions);\n        }\n      }\n\n      this.selectpicker.main.data = this.selectpicker.current.data = mainData;\n    },\n    buildList: function () {\n      var that = this,\n          selectData = this.selectpicker.main.data,\n          mainElements = [],\n          widestOptionLength = 0;\n\n      if ((that.options.showTick || that.multiple) && !elementTemplates.checkMark.parentNode) {\n        elementTemplates.checkMark.className = this.options.iconBase + ' ' + that.options.tickIcon + ' check-mark';\n        elementTemplates.a.appendChild(elementTemplates.checkMark);\n      }\n\n      function buildElement(item) {\n        var liElement,\n            combinedLength = 0;\n\n        switch (item.type) {\n          case 'divider':\n            liElement = generateOption.li(false, classNames.DIVIDER, item.optID ? item.optID + 'div' : undefined);\n            break;\n\n          case 'option':\n            liElement = generateOption.li(generateOption.a(generateOption.text.call(that, item), item.optionClass, item.inlineStyle), '', item.optID);\n\n            if (liElement.firstChild) {\n              liElement.firstChild.id = that.selectId + '-' + item.index;\n            }\n\n            break;\n\n          case 'optgroup-label':\n            liElement = generateOption.li(generateOption.label.call(that, item), 'dropdown-header' + item.optgroupClass, item.optID);\n            break;\n        }\n\n        item.element = liElement;\n        mainElements.push(liElement); // count the number of characters in the option - not perfect, but should work in most cases\n\n        if (item.display) combinedLength += item.display.length;\n        if (item.subtext) combinedLength += item.subtext.length; // if there is an icon, ensure this option's width is checked\n\n        if (item.icon) combinedLength += 1;\n\n        if (combinedLength > widestOptionLength) {\n          widestOptionLength = combinedLength; // guess which option is the widest\n          // use this when calculating menu width\n          // not perfect, but it's fast, and the width will be updating accordingly when scrolling\n\n          that.selectpicker.view.widestOption = mainElements[mainElements.length - 1];\n        }\n      }\n\n      for (var len = selectData.length, i = 0; i < len; i++) {\n        var item = selectData[i];\n        buildElement(item);\n      }\n\n      this.selectpicker.main.elements = this.selectpicker.current.elements = mainElements;\n    },\n    findLis: function () {\n      return this.$menuInner.find('.inner > li');\n    },\n    render: function () {\n      var that = this,\n          element = this.$element[0],\n          // ensure titleOption is appended and selected (if necessary) before getting selectedOptions\n      placeholderSelected = this.setPlaceholder() && element.selectedIndex === 0,\n          selectedOptions = getSelectedOptions(element, this.options.hideDisabled),\n          selectedCount = selectedOptions.length,\n          button = this.$button[0],\n          buttonInner = button.querySelector('.filter-option-inner-inner'),\n          multipleSeparator = document.createTextNode(this.options.multipleSeparator),\n          titleFragment = elementTemplates.fragment.cloneNode(false),\n          showCount,\n          countMax,\n          hasContent = false;\n      button.classList.toggle('bs-placeholder', that.multiple ? !selectedCount : !getSelectValues(element, selectedOptions));\n\n      if (!that.multiple && selectedOptions.length === 1) {\n        that.selectpicker.view.displayedValue = getSelectValues(element, selectedOptions);\n      }\n\n      if (this.options.selectedTextFormat === 'static') {\n        titleFragment = generateOption.text.call(this, {\n          text: this.options.title\n        }, true);\n      } else {\n        showCount = this.multiple && this.options.selectedTextFormat.indexOf('count') !== -1 && selectedCount > 1; // determine if the number of selected options will be shown (showCount === true)\n\n        if (showCount) {\n          countMax = this.options.selectedTextFormat.split('>');\n          showCount = countMax.length > 1 && selectedCount > countMax[1] || countMax.length === 1 && selectedCount >= 2;\n        } // only loop through all selected options if the count won't be shown\n\n\n        if (showCount === false) {\n          if (!placeholderSelected) {\n            for (var selectedIndex = 0; selectedIndex < selectedCount; selectedIndex++) {\n              if (selectedIndex < 50) {\n                var option = selectedOptions[selectedIndex],\n                    thisData = this.selectpicker.main.data[option.liIndex],\n                    titleOptions = {};\n\n                if (this.multiple && selectedIndex > 0) {\n                  titleFragment.appendChild(multipleSeparator.cloneNode(false));\n                }\n\n                if (option.title) {\n                  titleOptions.text = option.title;\n                } else if (thisData) {\n                  if (thisData.content && that.options.showContent) {\n                    titleOptions.content = thisData.content.toString();\n                    hasContent = true;\n                  } else {\n                    if (that.options.showIcon) {\n                      titleOptions.icon = thisData.icon;\n                    }\n\n                    if (that.options.showSubtext && !that.multiple && thisData.subtext) titleOptions.subtext = ' ' + thisData.subtext;\n                    titleOptions.text = option.textContent.trim();\n                  }\n                }\n\n                titleFragment.appendChild(generateOption.text.call(this, titleOptions, true));\n              } else {\n                break;\n              }\n            } // add ellipsis\n\n\n            if (selectedCount > 49) {\n              titleFragment.appendChild(document.createTextNode('...'));\n            }\n          }\n        } else {\n          var optionSelector = ':not([hidden]):not([data-hidden=\"true\"]):not([data-divider=\"true\"])';\n          if (this.options.hideDisabled) optionSelector += ':not(:disabled)'; // If this is a multiselect, and selectedTextFormat is count, then show 1 of 2 selected, etc.\n\n          var totalCount = this.$element[0].querySelectorAll('select > option' + optionSelector + ', optgroup' + optionSelector + ' option' + optionSelector).length,\n              tr8nText = typeof this.options.countSelectedText === 'function' ? this.options.countSelectedText(selectedCount, totalCount) : this.options.countSelectedText;\n          titleFragment = generateOption.text.call(this, {\n            text: tr8nText.replace('{0}', selectedCount.toString()).replace('{1}', totalCount.toString())\n          }, true);\n        }\n      }\n\n      if (this.options.title == undefined) {\n        // use .attr to ensure undefined is returned if title attribute is not set\n        this.options.title = this.$element.attr('title');\n      } // If the select doesn't have a title, then use the default, or if nothing is set at all, use noneSelectedText\n\n\n      if (!titleFragment.childNodes.length) {\n        titleFragment = generateOption.text.call(this, {\n          text: typeof this.options.title !== 'undefined' ? this.options.title : this.options.noneSelectedText\n        }, true);\n      } // strip all HTML tags and trim the result, then unescape any escaped tags\n\n\n      button.title = titleFragment.textContent.replace(/<[^>]*>?/g, '').trim();\n\n      if (this.options.sanitize && hasContent) {\n        sanitizeHtml([titleFragment], that.options.whiteList, that.options.sanitizeFn);\n      }\n\n      buttonInner.innerHTML = '';\n      buttonInner.appendChild(titleFragment);\n\n      if (version.major < 4 && this.$newElement[0].classList.contains('bs3-has-addon')) {\n        var filterExpand = button.querySelector('.filter-expand'),\n            clone = buttonInner.cloneNode(true);\n        clone.className = 'filter-expand';\n\n        if (filterExpand) {\n          button.replaceChild(clone, filterExpand);\n        } else {\n          button.appendChild(clone);\n        }\n      }\n\n      this.$element.trigger('rendered' + EVENT_KEY);\n    },\n\n    /**\r\n     * @param [style]\r\n     * @param [status]\r\n     */\n    setStyle: function (newStyle, status) {\n      var button = this.$button[0],\n          newElement = this.$newElement[0],\n          style = this.options.style.trim(),\n          buttonClass;\n\n      if (this.$element.attr('class')) {\n        this.$newElement.addClass(this.$element.attr('class').replace(/selectpicker|mobile-device|bs-select-hidden|validate\\[.*\\]/gi, ''));\n      }\n\n      if (version.major < 4) {\n        newElement.classList.add('bs3');\n\n        if (newElement.parentNode.classList && newElement.parentNode.classList.contains('input-group') && (newElement.previousElementSibling || newElement.nextElementSibling) && (newElement.previousElementSibling || newElement.nextElementSibling).classList.contains('input-group-addon')) {\n          newElement.classList.add('bs3-has-addon');\n        }\n      }\n\n      if (newStyle) {\n        buttonClass = newStyle.trim();\n      } else {\n        buttonClass = style;\n      }\n\n      if (status == 'add') {\n        if (buttonClass) button.classList.add.apply(button.classList, buttonClass.split(' '));\n      } else if (status == 'remove') {\n        if (buttonClass) button.classList.remove.apply(button.classList, buttonClass.split(' '));\n      } else {\n        if (style) button.classList.remove.apply(button.classList, style.split(' '));\n        if (buttonClass) button.classList.add.apply(button.classList, buttonClass.split(' '));\n      }\n    },\n    liHeight: function (refresh) {\n      if (!refresh && (this.options.size === false || Object.keys(this.sizeInfo).length)) return;\n      var newElement = elementTemplates.div.cloneNode(false),\n          menu = elementTemplates.div.cloneNode(false),\n          menuInner = elementTemplates.div.cloneNode(false),\n          menuInnerInner = document.createElement('ul'),\n          divider = elementTemplates.li.cloneNode(false),\n          dropdownHeader = elementTemplates.li.cloneNode(false),\n          li,\n          a = elementTemplates.a.cloneNode(false),\n          text = elementTemplates.span.cloneNode(false),\n          header = this.options.header && this.$menu.find('.' + classNames.POPOVERHEADER).length > 0 ? this.$menu.find('.' + classNames.POPOVERHEADER)[0].cloneNode(true) : null,\n          search = this.options.liveSearch ? elementTemplates.div.cloneNode(false) : null,\n          actions = this.options.actionsBox && this.multiple && this.$menu.find('.bs-actionsbox').length > 0 ? this.$menu.find('.bs-actionsbox')[0].cloneNode(true) : null,\n          doneButton = this.options.doneButton && this.multiple && this.$menu.find('.bs-donebutton').length > 0 ? this.$menu.find('.bs-donebutton')[0].cloneNode(true) : null,\n          firstOption = this.$element.find('option')[0];\n      this.sizeInfo.selectWidth = this.$newElement[0].offsetWidth;\n      text.className = 'text';\n      a.className = 'dropdown-item ' + (firstOption ? firstOption.className : '');\n      newElement.className = this.$menu[0].parentNode.className + ' ' + classNames.SHOW;\n      newElement.style.width = 0; // ensure button width doesn't affect natural width of menu when calculating\n\n      if (this.options.width === 'auto') menu.style.minWidth = 0;\n      menu.className = classNames.MENU + ' ' + classNames.SHOW;\n      menuInner.className = 'inner ' + classNames.SHOW;\n      menuInnerInner.className = classNames.MENU + ' inner ' + (version.major === '4' ? classNames.SHOW : '');\n      divider.className = classNames.DIVIDER;\n      dropdownHeader.className = 'dropdown-header';\n      text.appendChild(document.createTextNode('\\u200b'));\n\n      if (this.selectpicker.current.data.length) {\n        for (var i = 0; i < this.selectpicker.current.data.length; i++) {\n          var data = this.selectpicker.current.data[i];\n\n          if (data.type === 'option') {\n            li = data.element;\n            break;\n          }\n        }\n      } else {\n        li = elementTemplates.li.cloneNode(false);\n        a.appendChild(text);\n        li.appendChild(a);\n      }\n\n      dropdownHeader.appendChild(text.cloneNode(true));\n\n      if (this.selectpicker.view.widestOption) {\n        menuInnerInner.appendChild(this.selectpicker.view.widestOption.cloneNode(true));\n      }\n\n      menuInnerInner.appendChild(li);\n      menuInnerInner.appendChild(divider);\n      menuInnerInner.appendChild(dropdownHeader);\n      if (header) menu.appendChild(header);\n\n      if (search) {\n        var input = document.createElement('input');\n        search.className = 'bs-searchbox';\n        input.className = 'form-control';\n        search.appendChild(input);\n        menu.appendChild(search);\n      }\n\n      if (actions) menu.appendChild(actions);\n      menuInner.appendChild(menuInnerInner);\n      menu.appendChild(menuInner);\n      if (doneButton) menu.appendChild(doneButton);\n      newElement.appendChild(menu);\n      document.body.appendChild(newElement);\n      var liHeight = li.offsetHeight,\n          dropdownHeaderHeight = dropdownHeader ? dropdownHeader.offsetHeight : 0,\n          headerHeight = header ? header.offsetHeight : 0,\n          searchHeight = search ? search.offsetHeight : 0,\n          actionsHeight = actions ? actions.offsetHeight : 0,\n          doneButtonHeight = doneButton ? doneButton.offsetHeight : 0,\n          dividerHeight = $(divider).outerHeight(true),\n          // fall back to jQuery if getComputedStyle is not supported\n      menuStyle = window.getComputedStyle ? window.getComputedStyle(menu) : false,\n          menuWidth = menu.offsetWidth,\n          $menu = menuStyle ? null : $(menu),\n          menuPadding = {\n        vert: toInteger(menuStyle ? menuStyle.paddingTop : $menu.css('paddingTop')) + toInteger(menuStyle ? menuStyle.paddingBottom : $menu.css('paddingBottom')) + toInteger(menuStyle ? menuStyle.borderTopWidth : $menu.css('borderTopWidth')) + toInteger(menuStyle ? menuStyle.borderBottomWidth : $menu.css('borderBottomWidth')),\n        horiz: toInteger(menuStyle ? menuStyle.paddingLeft : $menu.css('paddingLeft')) + toInteger(menuStyle ? menuStyle.paddingRight : $menu.css('paddingRight')) + toInteger(menuStyle ? menuStyle.borderLeftWidth : $menu.css('borderLeftWidth')) + toInteger(menuStyle ? menuStyle.borderRightWidth : $menu.css('borderRightWidth'))\n      },\n          menuExtras = {\n        vert: menuPadding.vert + toInteger(menuStyle ? menuStyle.marginTop : $menu.css('marginTop')) + toInteger(menuStyle ? menuStyle.marginBottom : $menu.css('marginBottom')) + 2,\n        horiz: menuPadding.horiz + toInteger(menuStyle ? menuStyle.marginLeft : $menu.css('marginLeft')) + toInteger(menuStyle ? menuStyle.marginRight : $menu.css('marginRight')) + 2\n      },\n          scrollBarWidth;\n      menuInner.style.overflowY = 'scroll';\n      scrollBarWidth = menu.offsetWidth - menuWidth;\n      document.body.removeChild(newElement);\n      this.sizeInfo.liHeight = liHeight;\n      this.sizeInfo.dropdownHeaderHeight = dropdownHeaderHeight;\n      this.sizeInfo.headerHeight = headerHeight;\n      this.sizeInfo.searchHeight = searchHeight;\n      this.sizeInfo.actionsHeight = actionsHeight;\n      this.sizeInfo.doneButtonHeight = doneButtonHeight;\n      this.sizeInfo.dividerHeight = dividerHeight;\n      this.sizeInfo.menuPadding = menuPadding;\n      this.sizeInfo.menuExtras = menuExtras;\n      this.sizeInfo.menuWidth = menuWidth;\n      this.sizeInfo.menuInnerInnerWidth = menuWidth - menuPadding.horiz;\n      this.sizeInfo.totalMenuWidth = this.sizeInfo.menuWidth;\n      this.sizeInfo.scrollBarWidth = scrollBarWidth;\n      this.sizeInfo.selectHeight = this.$newElement[0].offsetHeight;\n      this.setPositionData();\n    },\n    getSelectPosition: function () {\n      var that = this,\n          $window = $(window),\n          pos = that.$newElement.offset(),\n          $container = $(that.options.container),\n          containerPos;\n\n      if (that.options.container && $container.length && !$container.is('body')) {\n        containerPos = $container.offset();\n        containerPos.top += parseInt($container.css('borderTopWidth'));\n        containerPos.left += parseInt($container.css('borderLeftWidth'));\n      } else {\n        containerPos = {\n          top: 0,\n          left: 0\n        };\n      }\n\n      var winPad = that.options.windowPadding;\n      this.sizeInfo.selectOffsetTop = pos.top - containerPos.top - $window.scrollTop();\n      this.sizeInfo.selectOffsetBot = $window.height() - this.sizeInfo.selectOffsetTop - this.sizeInfo.selectHeight - containerPos.top - winPad[2];\n      this.sizeInfo.selectOffsetLeft = pos.left - containerPos.left - $window.scrollLeft();\n      this.sizeInfo.selectOffsetRight = $window.width() - this.sizeInfo.selectOffsetLeft - this.sizeInfo.selectWidth - containerPos.left - winPad[1];\n      this.sizeInfo.selectOffsetTop -= winPad[0];\n      this.sizeInfo.selectOffsetLeft -= winPad[3];\n    },\n    setMenuSize: function (isAuto) {\n      this.getSelectPosition();\n\n      var selectWidth = this.sizeInfo.selectWidth,\n          liHeight = this.sizeInfo.liHeight,\n          headerHeight = this.sizeInfo.headerHeight,\n          searchHeight = this.sizeInfo.searchHeight,\n          actionsHeight = this.sizeInfo.actionsHeight,\n          doneButtonHeight = this.sizeInfo.doneButtonHeight,\n          divHeight = this.sizeInfo.dividerHeight,\n          menuPadding = this.sizeInfo.menuPadding,\n          menuInnerHeight,\n          menuHeight,\n          divLength = 0,\n          minHeight,\n          _minHeight,\n          maxHeight,\n          menuInnerMinHeight,\n          estimate,\n          isDropup;\n\n      if (this.options.dropupAuto) {\n        // Get the estimated height of the menu without scrollbars.\n        // This is useful for smaller menus, where there might be plenty of room\n        // below the button without setting dropup, but we can't know\n        // the exact height of the menu until createView is called later\n        estimate = liHeight * this.selectpicker.current.elements.length + menuPadding.vert;\n        isDropup = this.sizeInfo.selectOffsetTop - this.sizeInfo.selectOffsetBot > this.sizeInfo.menuExtras.vert && estimate + this.sizeInfo.menuExtras.vert + 50 > this.sizeInfo.selectOffsetBot; // ensure dropup doesn't change while searching (so menu doesn't bounce back and forth)\n\n        if (this.selectpicker.isSearching === true) {\n          isDropup = this.selectpicker.dropup;\n        }\n\n        this.$newElement.toggleClass(classNames.DROPUP, isDropup);\n        this.selectpicker.dropup = isDropup;\n      }\n\n      if (this.options.size === 'auto') {\n        _minHeight = this.selectpicker.current.elements.length > 3 ? this.sizeInfo.liHeight * 3 + this.sizeInfo.menuExtras.vert - 2 : 0;\n        menuHeight = this.sizeInfo.selectOffsetBot - this.sizeInfo.menuExtras.vert;\n        minHeight = _minHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight;\n        menuInnerMinHeight = Math.max(_minHeight - menuPadding.vert, 0);\n\n        if (this.$newElement.hasClass(classNames.DROPUP)) {\n          menuHeight = this.sizeInfo.selectOffsetTop - this.sizeInfo.menuExtras.vert;\n        }\n\n        maxHeight = menuHeight;\n        menuInnerHeight = menuHeight - headerHeight - searchHeight - actionsHeight - doneButtonHeight - menuPadding.vert;\n      } else if (this.options.size && this.options.size != 'auto' && this.selectpicker.current.elements.length > this.options.size) {\n        for (var i = 0; i < this.options.size; i++) {\n          if (this.selectpicker.current.data[i].type === 'divider') divLength++;\n        }\n\n        menuHeight = liHeight * this.options.size + divLength * divHeight + menuPadding.vert;\n        menuInnerHeight = menuHeight - menuPadding.vert;\n        maxHeight = menuHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight;\n        minHeight = menuInnerMinHeight = '';\n      }\n\n      this.$menu.css({\n        'max-height': maxHeight + 'px',\n        'overflow': 'hidden',\n        'min-height': minHeight + 'px'\n      });\n      this.$menuInner.css({\n        'max-height': menuInnerHeight + 'px',\n        'overflow-y': 'auto',\n        'min-height': menuInnerMinHeight + 'px'\n      }); // ensure menuInnerHeight is always a positive number to prevent issues calculating chunkSize in createView\n\n      this.sizeInfo.menuInnerHeight = Math.max(menuInnerHeight, 1);\n\n      if (this.selectpicker.current.data.length && this.selectpicker.current.data[this.selectpicker.current.data.length - 1].position > this.sizeInfo.menuInnerHeight) {\n        this.sizeInfo.hasScrollBar = true;\n        this.sizeInfo.totalMenuWidth = this.sizeInfo.menuWidth + this.sizeInfo.scrollBarWidth;\n      }\n\n      if (this.options.dropdownAlignRight === 'auto') {\n        this.$menu.toggleClass(classNames.MENURIGHT, this.sizeInfo.selectOffsetLeft > this.sizeInfo.selectOffsetRight && this.sizeInfo.selectOffsetRight < this.sizeInfo.totalMenuWidth - selectWidth);\n      }\n\n      if (this.dropdown && this.dropdown._popper) this.dropdown._popper.update();\n    },\n    setSize: function (refresh) {\n      this.liHeight(refresh);\n      if (this.options.header) this.$menu.css('padding-top', 0);\n\n      if (this.options.size !== false) {\n        var that = this,\n            $window = $(window);\n        this.setMenuSize();\n\n        if (this.options.liveSearch) {\n          this.$searchbox.off('input.setMenuSize propertychange.setMenuSize').on('input.setMenuSize propertychange.setMenuSize', function () {\n            return that.setMenuSize();\n          });\n        }\n\n        if (this.options.size === 'auto') {\n          $window.off('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize').on('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize', function () {\n            return that.setMenuSize();\n          });\n        } else if (this.options.size && this.options.size != 'auto' && this.selectpicker.current.elements.length > this.options.size) {\n          $window.off('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize');\n        }\n      }\n\n      this.createView(false, true, refresh);\n    },\n    setWidth: function () {\n      var that = this;\n\n      if (this.options.width === 'auto') {\n        requestAnimationFrame(function () {\n          that.$menu.css('min-width', '0');\n          that.$element.on('loaded' + EVENT_KEY, function () {\n            that.liHeight();\n            that.setMenuSize(); // Get correct width if element is hidden\n\n            var $selectClone = that.$newElement.clone().appendTo('body'),\n                btnWidth = $selectClone.css('width', 'auto').children('button').outerWidth();\n            $selectClone.remove(); // Set width to whatever's larger, button title or longest option\n\n            that.sizeInfo.selectWidth = Math.max(that.sizeInfo.totalMenuWidth, btnWidth);\n            that.$newElement.css('width', that.sizeInfo.selectWidth + 'px');\n          });\n        });\n      } else if (this.options.width === 'fit') {\n        // Remove inline min-width so width can be changed from 'auto'\n        this.$menu.css('min-width', '');\n        this.$newElement.css('width', '').addClass('fit-width');\n      } else if (this.options.width) {\n        // Remove inline min-width so width can be changed from 'auto'\n        this.$menu.css('min-width', '');\n        this.$newElement.css('width', this.options.width);\n      } else {\n        // Remove inline min-width/width so width can be changed\n        this.$menu.css('min-width', '');\n        this.$newElement.css('width', '');\n      } // Remove fit-width class if width is changed programmatically\n\n\n      if (this.$newElement.hasClass('fit-width') && this.options.width !== 'fit') {\n        this.$newElement[0].classList.remove('fit-width');\n      }\n    },\n    selectPosition: function () {\n      this.$bsContainer = $('<div class=\"bs-container\" />');\n\n      var that = this,\n          $container = $(this.options.container),\n          pos,\n          containerPos,\n          actualHeight,\n          getPlacement = function ($element) {\n        var containerPosition = {},\n            // fall back to dropdown's default display setting if display is not manually set\n        display = that.options.display || ( // Bootstrap 3 doesn't have $.fn.dropdown.Constructor.Default\n        $.fn.dropdown.Constructor.Default ? $.fn.dropdown.Constructor.Default.display : false);\n        that.$bsContainer.addClass($element.attr('class').replace(/form-control|fit-width/gi, '')).toggleClass(classNames.DROPUP, $element.hasClass(classNames.DROPUP));\n        pos = $element.offset();\n\n        if (!$container.is('body')) {\n          containerPos = $container.offset();\n          containerPos.top += parseInt($container.css('borderTopWidth')) - $container.scrollTop();\n          containerPos.left += parseInt($container.css('borderLeftWidth')) - $container.scrollLeft();\n        } else {\n          containerPos = {\n            top: 0,\n            left: 0\n          };\n        }\n\n        actualHeight = $element.hasClass(classNames.DROPUP) ? 0 : $element[0].offsetHeight; // Bootstrap 4+ uses Popper for menu positioning\n\n        if (version.major < 4 || display === 'static') {\n          containerPosition.top = pos.top - containerPos.top + actualHeight;\n          containerPosition.left = pos.left - containerPos.left;\n        }\n\n        containerPosition.width = $element[0].offsetWidth;\n        that.$bsContainer.css(containerPosition);\n      };\n\n      this.$button.on('click.bs.dropdown.data-api', function () {\n        if (that.isDisabled()) {\n          return;\n        }\n\n        getPlacement(that.$newElement);\n        that.$bsContainer.appendTo(that.options.container).toggleClass(classNames.SHOW, !that.$button.hasClass(classNames.SHOW)).append(that.$menu);\n      });\n      $(window).off('resize' + EVENT_KEY + '.' + this.selectId + ' scroll' + EVENT_KEY + '.' + this.selectId).on('resize' + EVENT_KEY + '.' + this.selectId + ' scroll' + EVENT_KEY + '.' + this.selectId, function () {\n        var isActive = that.$newElement.hasClass(classNames.SHOW);\n        if (isActive) getPlacement(that.$newElement);\n      });\n      this.$element.on('hide' + EVENT_KEY, function () {\n        that.$menu.data('height', that.$menu.height());\n        that.$bsContainer.detach();\n      });\n    },\n    setOptionStatus: function (selectedOnly) {\n      var that = this;\n      that.noScroll = false;\n\n      if (that.selectpicker.view.visibleElements && that.selectpicker.view.visibleElements.length) {\n        for (var i = 0; i < that.selectpicker.view.visibleElements.length; i++) {\n          var liData = that.selectpicker.current.data[i + that.selectpicker.view.position0],\n              option = liData.option;\n\n          if (option) {\n            if (selectedOnly !== true) {\n              that.setDisabled(liData.index, liData.disabled);\n            }\n\n            that.setSelected(liData.index, option.selected);\n          }\n        }\n      }\n    },\n\n    /**\r\n     * @param {number} index - the index of the option that is being changed\r\n     * @param {boolean} selected - true if the option is being selected, false if being deselected\r\n     */\n    setSelected: function (index, selected) {\n      var li = this.selectpicker.main.elements[index],\n          liData = this.selectpicker.main.data[index],\n          activeIndexIsSet = this.activeIndex !== undefined,\n          thisIsActive = this.activeIndex === index,\n          prevActive,\n          a,\n          // if current option is already active\n      // OR\n      // if the current option is being selected, it's NOT multiple, and\n      // activeIndex is undefined:\n      //  - when the menu is first being opened, OR\n      //  - after a search has been performed, OR\n      //  - when retainActive is false when selecting a new option (i.e. index of the newly selected option is not the same as the current activeIndex)\n      keepActive = thisIsActive || selected && !this.multiple && !activeIndexIsSet;\n      liData.selected = selected;\n      a = li.firstChild;\n\n      if (selected) {\n        this.selectedIndex = index;\n      }\n\n      li.classList.toggle('selected', selected);\n\n      if (keepActive) {\n        this.focusItem(li, liData);\n        this.selectpicker.view.currentActive = li;\n        this.activeIndex = index;\n      } else {\n        this.defocusItem(li);\n      }\n\n      if (a) {\n        a.classList.toggle('selected', selected);\n\n        if (selected) {\n          a.setAttribute('aria-selected', true);\n        } else {\n          if (this.multiple) {\n            a.setAttribute('aria-selected', false);\n          } else {\n            a.removeAttribute('aria-selected');\n          }\n        }\n      }\n\n      if (!keepActive && !activeIndexIsSet && selected && this.prevActiveIndex !== undefined) {\n        prevActive = this.selectpicker.main.elements[this.prevActiveIndex];\n        this.defocusItem(prevActive);\n      }\n    },\n\n    /**\r\n     * @param {number} index - the index of the option that is being disabled\r\n     * @param {boolean} disabled - true if the option is being disabled, false if being enabled\r\n     */\n    setDisabled: function (index, disabled) {\n      var li = this.selectpicker.main.elements[index],\n          a;\n      this.selectpicker.main.data[index].disabled = disabled;\n      a = li.firstChild;\n      li.classList.toggle(classNames.DISABLED, disabled);\n\n      if (a) {\n        if (version.major === '4') a.classList.toggle(classNames.DISABLED, disabled);\n\n        if (disabled) {\n          a.setAttribute('aria-disabled', disabled);\n          a.setAttribute('tabindex', -1);\n        } else {\n          a.removeAttribute('aria-disabled');\n          a.setAttribute('tabindex', 0);\n        }\n      }\n    },\n    isDisabled: function () {\n      return this.$element[0].disabled;\n    },\n    checkDisabled: function () {\n      if (this.isDisabled()) {\n        this.$newElement[0].classList.add(classNames.DISABLED);\n        this.$button.addClass(classNames.DISABLED).attr('aria-disabled', true);\n      } else {\n        if (this.$button[0].classList.contains(classNames.DISABLED)) {\n          this.$newElement[0].classList.remove(classNames.DISABLED);\n          this.$button.removeClass(classNames.DISABLED).attr('aria-disabled', false);\n        }\n      }\n    },\n    clickListener: function () {\n      var that = this,\n          $document = $(document);\n      $document.data('spaceSelect', false);\n      this.$button.on('keyup', function (e) {\n        if (/(32)/.test(e.keyCode.toString(10)) && $document.data('spaceSelect')) {\n          e.preventDefault();\n          $document.data('spaceSelect', false);\n        }\n      });\n      this.$newElement.on('show.bs.dropdown', function () {\n        if (version.major > 3 && !that.dropdown) {\n          that.dropdown = that.$button.data('bs.dropdown');\n          that.dropdown._menu = that.$menu[0];\n        }\n      });\n      this.$button.on('click.bs.dropdown.data-api', function () {\n        if (!that.$newElement.hasClass(classNames.SHOW)) {\n          that.setSize();\n        }\n      });\n\n      function setFocus() {\n        if (that.options.liveSearch) {\n          that.$searchbox.trigger('focus');\n        } else {\n          that.$menuInner.trigger('focus');\n        }\n      }\n\n      function checkPopperExists() {\n        if (that.dropdown && that.dropdown._popper && that.dropdown._popper.state.isCreated) {\n          setFocus();\n        } else {\n          requestAnimationFrame(checkPopperExists);\n        }\n      }\n\n      this.$element.on('shown' + EVENT_KEY, function () {\n        if (that.$menuInner[0].scrollTop !== that.selectpicker.view.scrollTop) {\n          that.$menuInner[0].scrollTop = that.selectpicker.view.scrollTop;\n        }\n\n        if (version.major > 3) {\n          requestAnimationFrame(checkPopperExists);\n        } else {\n          setFocus();\n        }\n      }); // ensure posinset and setsize are correct before selecting an option via a click\n\n      this.$menuInner.on('mouseenter', 'li a', function (e) {\n        var hoverLi = this.parentElement,\n            position0 = that.isVirtual() ? that.selectpicker.view.position0 : 0,\n            index = Array.prototype.indexOf.call(hoverLi.parentElement.children, hoverLi),\n            hoverData = that.selectpicker.current.data[index + position0];\n        that.focusItem(hoverLi, hoverData, true);\n      });\n      this.$menuInner.on('click', 'li a', function (e, retainActive) {\n        var $this = $(this),\n            element = that.$element[0],\n            position0 = that.isVirtual() ? that.selectpicker.view.position0 : 0,\n            clickedData = that.selectpicker.current.data[$this.parent().index() + position0],\n            clickedIndex = clickedData.index,\n            prevValue = getSelectValues(element),\n            prevIndex = element.selectedIndex,\n            prevOption = element.options[prevIndex],\n            triggerChange = true; // Don't close on multi choice menu\n\n        if (that.multiple && that.options.maxOptions !== 1) {\n          e.stopPropagation();\n        }\n\n        e.preventDefault(); // Don't run if the select is disabled\n\n        if (!that.isDisabled() && !$this.parent().hasClass(classNames.DISABLED)) {\n          var option = clickedData.option,\n              $option = $(option),\n              state = option.selected,\n              $optgroup = $option.parent('optgroup'),\n              $optgroupOptions = $optgroup.find('option'),\n              maxOptions = that.options.maxOptions,\n              maxOptionsGrp = $optgroup.data('maxOptions') || false;\n          if (clickedIndex === that.activeIndex) retainActive = true;\n\n          if (!retainActive) {\n            that.prevActiveIndex = that.activeIndex;\n            that.activeIndex = undefined;\n          }\n\n          if (!that.multiple) {\n            // Deselect all others if not multi select box\n            if (prevOption) prevOption.selected = false;\n            option.selected = true;\n            that.setSelected(clickedIndex, true);\n          } else {\n            // Toggle the one we have chosen if we are multi select.\n            option.selected = !state;\n            that.setSelected(clickedIndex, !state);\n            that.focusedParent.focus();\n\n            if (maxOptions !== false || maxOptionsGrp !== false) {\n              var maxReached = maxOptions < getSelectedOptions(element).length,\n                  maxReachedGrp = maxOptionsGrp < $optgroup.find('option:selected').length;\n\n              if (maxOptions && maxReached || maxOptionsGrp && maxReachedGrp) {\n                if (maxOptions && maxOptions == 1) {\n                  element.selectedIndex = -1;\n                  option.selected = true;\n                  that.setOptionStatus(true);\n                } else if (maxOptionsGrp && maxOptionsGrp == 1) {\n                  for (var i = 0; i < $optgroupOptions.length; i++) {\n                    var _option = $optgroupOptions[i];\n                    _option.selected = false;\n                    that.setSelected(_option.liIndex, false);\n                  }\n\n                  option.selected = true;\n                  that.setSelected(clickedIndex, true);\n                } else {\n                  var maxOptionsText = typeof that.options.maxOptionsText === 'string' ? [that.options.maxOptionsText, that.options.maxOptionsText] : that.options.maxOptionsText,\n                      maxOptionsArr = typeof maxOptionsText === 'function' ? maxOptionsText(maxOptions, maxOptionsGrp) : maxOptionsText,\n                      maxTxt = maxOptionsArr[0].replace('{n}', maxOptions),\n                      maxTxtGrp = maxOptionsArr[1].replace('{n}', maxOptionsGrp),\n                      $notify = $('<div class=\"notify\"></div>'); // If {var} is set in array, replace it\n\n                  /** @deprecated */\n\n                  if (maxOptionsArr[2]) {\n                    maxTxt = maxTxt.replace('{var}', maxOptionsArr[2][maxOptions > 1 ? 0 : 1]);\n                    maxTxtGrp = maxTxtGrp.replace('{var}', maxOptionsArr[2][maxOptionsGrp > 1 ? 0 : 1]);\n                  }\n\n                  option.selected = false;\n                  that.$menu.append($notify);\n\n                  if (maxOptions && maxReached) {\n                    $notify.append($('<div>' + maxTxt + '</div>'));\n                    triggerChange = false;\n                    that.$element.trigger('maxReached' + EVENT_KEY);\n                  }\n\n                  if (maxOptionsGrp && maxReachedGrp) {\n                    $notify.append($('<div>' + maxTxtGrp + '</div>'));\n                    triggerChange = false;\n                    that.$element.trigger('maxReachedGrp' + EVENT_KEY);\n                  }\n\n                  setTimeout(function () {\n                    that.setSelected(clickedIndex, false);\n                  }, 10);\n                  $notify[0].classList.add('fadeOut');\n                  setTimeout(function () {\n                    $notify.remove();\n                  }, 1050);\n                }\n              }\n            }\n          }\n\n          if (!that.multiple || that.multiple && that.options.maxOptions === 1) {\n            that.$button.trigger('focus');\n          } else if (that.options.liveSearch) {\n            that.$searchbox.trigger('focus');\n          } // Trigger select 'change'\n\n\n          if (triggerChange) {\n            if (that.multiple || prevIndex !== element.selectedIndex) {\n              // $option.prop('selected') is current option state (selected/unselected). prevValue is the value of the select prior to being changed.\n              changedArguments = [option.index, $option.prop('selected'), prevValue];\n              that.$element.triggerNative('change');\n            }\n          }\n        }\n      });\n      this.$menu.on('click', 'li.' + classNames.DISABLED + ' a, .' + classNames.POPOVERHEADER + ', .' + classNames.POPOVERHEADER + ' :not(.close)', function (e) {\n        if (e.currentTarget == this) {\n          e.preventDefault();\n          e.stopPropagation();\n\n          if (that.options.liveSearch && !$(e.target).hasClass('close')) {\n            that.$searchbox.trigger('focus');\n          } else {\n            that.$button.trigger('focus');\n          }\n        }\n      });\n      this.$menuInner.on('click', '.divider, .dropdown-header', function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (that.options.liveSearch) {\n          that.$searchbox.trigger('focus');\n        } else {\n          that.$button.trigger('focus');\n        }\n      });\n      this.$menu.on('click', '.' + classNames.POPOVERHEADER + ' .close', function () {\n        that.$button.trigger('click');\n      });\n      this.$searchbox.on('click', function (e) {\n        e.stopPropagation();\n      });\n      this.$menu.on('click', '.actions-btn', function (e) {\n        if (that.options.liveSearch) {\n          that.$searchbox.trigger('focus');\n        } else {\n          that.$button.trigger('focus');\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n\n        if ($(this).hasClass('bs-select-all')) {\n          that.selectAll();\n        } else {\n          that.deselectAll();\n        }\n      });\n      this.$button.on('focus' + EVENT_KEY, function (e) {\n        var tabindex = that.$element[0].getAttribute('tabindex'); // only change when button is actually focused\n\n        if (tabindex !== undefined && e.originalEvent && e.originalEvent.isTrusted) {\n          // apply select element's tabindex to ensure correct order is followed when tabbing to the next element\n          this.setAttribute('tabindex', tabindex); // set element's tabindex to -1 to allow for reverse tabbing\n\n          that.$element[0].setAttribute('tabindex', -1);\n          that.selectpicker.view.tabindex = tabindex;\n        }\n      }).on('blur' + EVENT_KEY, function (e) {\n        // revert everything to original tabindex\n        if (that.selectpicker.view.tabindex !== undefined && e.originalEvent && e.originalEvent.isTrusted) {\n          that.$element[0].setAttribute('tabindex', that.selectpicker.view.tabindex);\n          this.setAttribute('tabindex', -1);\n          that.selectpicker.view.tabindex = undefined;\n        }\n      });\n      this.$element.on('change' + EVENT_KEY, function () {\n        that.render();\n        that.$element.trigger('changed' + EVENT_KEY, changedArguments);\n        changedArguments = null;\n      }).on('focus' + EVENT_KEY, function () {\n        if (!that.options.mobile) that.$button[0].focus();\n      });\n    },\n    liveSearchListener: function () {\n      var that = this;\n      this.$button.on('click.bs.dropdown.data-api', function () {\n        if (!!that.$searchbox.val()) {\n          that.$searchbox.val('');\n          that.selectpicker.search.previousValue = undefined;\n        }\n      });\n      this.$searchbox.on('click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api', function (e) {\n        e.stopPropagation();\n      });\n      this.$searchbox.on('input propertychange', function () {\n        var searchValue = that.$searchbox[0].value;\n        that.selectpicker.search.elements = [];\n        that.selectpicker.search.data = [];\n\n        if (searchValue) {\n          var i,\n              searchMatch = [],\n              q = searchValue.toUpperCase(),\n              cache = {},\n              cacheArr = [],\n              searchStyle = that._searchStyle(),\n              normalizeSearch = that.options.liveSearchNormalize;\n\n          if (normalizeSearch) q = normalizeToBase(q);\n\n          for (var i = 0; i < that.selectpicker.main.data.length; i++) {\n            var li = that.selectpicker.main.data[i];\n\n            if (!cache[i]) {\n              cache[i] = stringSearch(li, q, searchStyle, normalizeSearch);\n            }\n\n            if (cache[i] && li.headerIndex !== undefined && cacheArr.indexOf(li.headerIndex) === -1) {\n              if (li.headerIndex > 0) {\n                cache[li.headerIndex - 1] = true;\n                cacheArr.push(li.headerIndex - 1);\n              }\n\n              cache[li.headerIndex] = true;\n              cacheArr.push(li.headerIndex);\n              cache[li.lastIndex + 1] = true;\n            }\n\n            if (cache[i] && li.type !== 'optgroup-label') cacheArr.push(i);\n          }\n\n          for (var i = 0, cacheLen = cacheArr.length; i < cacheLen; i++) {\n            var index = cacheArr[i],\n                prevIndex = cacheArr[i - 1],\n                li = that.selectpicker.main.data[index],\n                liPrev = that.selectpicker.main.data[prevIndex];\n\n            if (li.type !== 'divider' || li.type === 'divider' && liPrev && liPrev.type !== 'divider' && cacheLen - 1 !== i) {\n              that.selectpicker.search.data.push(li);\n              searchMatch.push(that.selectpicker.main.elements[index]);\n            }\n          }\n\n          that.activeIndex = undefined;\n          that.noScroll = true;\n          that.$menuInner.scrollTop(0);\n          that.selectpicker.search.elements = searchMatch;\n          that.createView(true);\n          showNoResults.call(that, searchMatch, searchValue);\n        } else if (that.selectpicker.search.previousValue) {\n          // for IE11 (#2402)\n          that.$menuInner.scrollTop(0);\n          that.createView(false);\n        }\n\n        that.selectpicker.search.previousValue = searchValue;\n      });\n    },\n    _searchStyle: function () {\n      return this.options.liveSearchStyle || 'contains';\n    },\n    val: function (value) {\n      var element = this.$element[0];\n\n      if (typeof value !== 'undefined') {\n        var prevValue = getSelectValues(element);\n        changedArguments = [null, null, prevValue];\n        this.$element.val(value).trigger('changed' + EVENT_KEY, changedArguments);\n\n        if (this.$newElement.hasClass(classNames.SHOW)) {\n          if (this.multiple) {\n            this.setOptionStatus(true);\n          } else {\n            var liSelectedIndex = (element.options[element.selectedIndex] || {}).liIndex;\n\n            if (typeof liSelectedIndex === 'number') {\n              this.setSelected(this.selectedIndex, false);\n              this.setSelected(liSelectedIndex, true);\n            }\n          }\n        }\n\n        this.render();\n        changedArguments = null;\n        return this.$element;\n      } else {\n        return this.$element.val();\n      }\n    },\n    changeAll: function (status) {\n      if (!this.multiple) return;\n      if (typeof status === 'undefined') status = true;\n      var element = this.$element[0],\n          previousSelected = 0,\n          currentSelected = 0,\n          prevValue = getSelectValues(element);\n      element.classList.add('bs-select-hidden');\n\n      for (var i = 0, data = this.selectpicker.current.data, len = data.length; i < len; i++) {\n        var liData = data[i],\n            option = liData.option;\n\n        if (option && !liData.disabled && liData.type !== 'divider') {\n          if (liData.selected) previousSelected++;\n          option.selected = status;\n          if (status === true) currentSelected++;\n        }\n      }\n\n      element.classList.remove('bs-select-hidden');\n      if (previousSelected === currentSelected) return;\n      this.setOptionStatus();\n      changedArguments = [null, null, prevValue];\n      this.$element.triggerNative('change');\n    },\n    selectAll: function () {\n      return this.changeAll(true);\n    },\n    deselectAll: function () {\n      return this.changeAll(false);\n    },\n    toggle: function (e) {\n      e = e || window.event;\n      if (e) e.stopPropagation();\n      this.$button.trigger('click.bs.dropdown.data-api');\n    },\n    keydown: function (e) {\n      var $this = $(this),\n          isToggle = $this.hasClass('dropdown-toggle'),\n          $parent = isToggle ? $this.closest('.dropdown') : $this.closest(Selector.MENU),\n          that = $parent.data('this'),\n          $items = that.findLis(),\n          index,\n          isActive,\n          liActive,\n          activeLi,\n          offset,\n          updateScroll = false,\n          downOnTab = e.which === keyCodes.TAB && !isToggle && !that.options.selectOnTab,\n          isArrowKey = REGEXP_ARROW.test(e.which) || downOnTab,\n          scrollTop = that.$menuInner[0].scrollTop,\n          isVirtual = that.isVirtual(),\n          position0 = isVirtual === true ? that.selectpicker.view.position0 : 0; // do nothing if a function key is pressed\n\n      if (e.which >= 112 && e.which <= 123) return;\n      isActive = that.$newElement.hasClass(classNames.SHOW);\n\n      if (!isActive && (isArrowKey || e.which >= 48 && e.which <= 57 || e.which >= 96 && e.which <= 105 || e.which >= 65 && e.which <= 90)) {\n        that.$button.trigger('click.bs.dropdown.data-api');\n\n        if (that.options.liveSearch) {\n          that.$searchbox.trigger('focus');\n          return;\n        }\n      }\n\n      if (e.which === keyCodes.ESCAPE && isActive) {\n        e.preventDefault();\n        that.$button.trigger('click.bs.dropdown.data-api').trigger('focus');\n      }\n\n      if (isArrowKey) {\n        // if up or down\n        if (!$items.length) return;\n        liActive = that.selectpicker.main.elements[that.activeIndex];\n        index = liActive ? Array.prototype.indexOf.call(liActive.parentElement.children, liActive) : -1;\n\n        if (index !== -1) {\n          that.defocusItem(liActive);\n        }\n\n        if (e.which === keyCodes.ARROW_UP) {\n          // up\n          if (index !== -1) index--;\n          if (index + position0 < 0) index += $items.length;\n\n          if (!that.selectpicker.view.canHighlight[index + position0]) {\n            index = that.selectpicker.view.canHighlight.slice(0, index + position0).lastIndexOf(true) - position0;\n            if (index === -1) index = $items.length - 1;\n          }\n        } else if (e.which === keyCodes.ARROW_DOWN || downOnTab) {\n          // down\n          index++;\n          if (index + position0 >= that.selectpicker.view.canHighlight.length) index = that.selectpicker.view.firstHighlightIndex;\n\n          if (!that.selectpicker.view.canHighlight[index + position0]) {\n            index = index + 1 + that.selectpicker.view.canHighlight.slice(index + position0 + 1).indexOf(true);\n          }\n        }\n\n        e.preventDefault();\n        var liActiveIndex = position0 + index;\n\n        if (e.which === keyCodes.ARROW_UP) {\n          // up\n          // scroll to bottom and highlight last option\n          if (position0 === 0 && index === $items.length - 1) {\n            that.$menuInner[0].scrollTop = that.$menuInner[0].scrollHeight;\n            liActiveIndex = that.selectpicker.current.elements.length - 1;\n          } else {\n            activeLi = that.selectpicker.current.data[liActiveIndex];\n            offset = activeLi.position - activeLi.height;\n            updateScroll = offset < scrollTop;\n          }\n        } else if (e.which === keyCodes.ARROW_DOWN || downOnTab) {\n          // down\n          // scroll to top and highlight first option\n          if (index === that.selectpicker.view.firstHighlightIndex) {\n            that.$menuInner[0].scrollTop = 0;\n            liActiveIndex = that.selectpicker.view.firstHighlightIndex;\n          } else {\n            activeLi = that.selectpicker.current.data[liActiveIndex];\n            offset = activeLi.position - that.sizeInfo.menuInnerHeight;\n            updateScroll = offset > scrollTop;\n          }\n        }\n\n        liActive = that.selectpicker.current.elements[liActiveIndex];\n        that.activeIndex = that.selectpicker.current.data[liActiveIndex].index;\n        that.focusItem(liActive);\n        that.selectpicker.view.currentActive = liActive;\n        if (updateScroll) that.$menuInner[0].scrollTop = offset;\n\n        if (that.options.liveSearch) {\n          that.$searchbox.trigger('focus');\n        } else {\n          $this.trigger('focus');\n        }\n      } else if (!$this.is('input') && !REGEXP_TAB_OR_ESCAPE.test(e.which) || e.which === keyCodes.SPACE && that.selectpicker.keydown.keyHistory) {\n        var searchMatch,\n            matches = [],\n            keyHistory;\n        e.preventDefault();\n        that.selectpicker.keydown.keyHistory += keyCodeMap[e.which];\n        if (that.selectpicker.keydown.resetKeyHistory.cancel) clearTimeout(that.selectpicker.keydown.resetKeyHistory.cancel);\n        that.selectpicker.keydown.resetKeyHistory.cancel = that.selectpicker.keydown.resetKeyHistory.start();\n        keyHistory = that.selectpicker.keydown.keyHistory; // if all letters are the same, set keyHistory to just the first character when searching\n\n        if (/^(.)\\1+$/.test(keyHistory)) {\n          keyHistory = keyHistory.charAt(0);\n        } // find matches\n\n\n        for (var i = 0; i < that.selectpicker.current.data.length; i++) {\n          var li = that.selectpicker.current.data[i],\n              hasMatch;\n          hasMatch = stringSearch(li, keyHistory, 'startsWith', true);\n\n          if (hasMatch && that.selectpicker.view.canHighlight[i]) {\n            matches.push(li.index);\n          }\n        }\n\n        if (matches.length) {\n          var matchIndex = 0;\n          $items.removeClass('active').find('a').removeClass('active'); // either only one key has been pressed or they are all the same key\n\n          if (keyHistory.length === 1) {\n            matchIndex = matches.indexOf(that.activeIndex);\n\n            if (matchIndex === -1 || matchIndex === matches.length - 1) {\n              matchIndex = 0;\n            } else {\n              matchIndex++;\n            }\n          }\n\n          searchMatch = matches[matchIndex];\n          activeLi = that.selectpicker.main.data[searchMatch];\n\n          if (scrollTop - activeLi.position > 0) {\n            offset = activeLi.position - activeLi.height;\n            updateScroll = true;\n          } else {\n            offset = activeLi.position - that.sizeInfo.menuInnerHeight; // if the option is already visible at the current scroll position, just keep it the same\n\n            updateScroll = activeLi.position > scrollTop + that.sizeInfo.menuInnerHeight;\n          }\n\n          liActive = that.selectpicker.main.elements[searchMatch];\n          that.activeIndex = matches[matchIndex];\n          that.focusItem(liActive);\n          if (liActive) liActive.firstChild.focus();\n          if (updateScroll) that.$menuInner[0].scrollTop = offset;\n          $this.trigger('focus');\n        }\n      } // Select focused option if \"Enter\", \"Spacebar\" or \"Tab\" (when selectOnTab is true) are pressed inside the menu.\n\n\n      if (isActive && (e.which === keyCodes.SPACE && !that.selectpicker.keydown.keyHistory || e.which === keyCodes.ENTER || e.which === keyCodes.TAB && that.options.selectOnTab)) {\n        if (e.which !== keyCodes.SPACE) e.preventDefault();\n\n        if (!that.options.liveSearch || e.which !== keyCodes.SPACE) {\n          that.$menuInner.find('.active a').trigger('click', true); // retain active class\n\n          $this.trigger('focus');\n\n          if (!that.options.liveSearch) {\n            // Prevent screen from scrolling if the user hits the spacebar\n            e.preventDefault(); // Fixes spacebar selection of dropdown items in FF & IE\n\n            $(document).data('spaceSelect', true);\n          }\n        }\n      }\n    },\n    mobile: function () {\n      // ensure mobile is set to true if mobile function is called after init\n      this.options.mobile = true;\n      this.$element[0].classList.add('mobile-device');\n    },\n    refresh: function () {\n      // update options if data attributes have been changed\n      var config = $.extend({}, this.options, this.$element.data());\n      this.options = config;\n      this.checkDisabled();\n      this.buildData();\n      this.setStyle();\n      this.render();\n      this.buildList();\n      this.setWidth();\n      this.setSize(true);\n      this.$element.trigger('refreshed' + EVENT_KEY);\n    },\n    hide: function () {\n      this.$newElement.hide();\n    },\n    show: function () {\n      this.$newElement.show();\n    },\n    remove: function () {\n      this.$newElement.remove();\n      this.$element.remove();\n    },\n    destroy: function () {\n      this.$newElement.before(this.$element).remove();\n\n      if (this.$bsContainer) {\n        this.$bsContainer.remove();\n      } else {\n        this.$menu.remove();\n      }\n\n      if (this.selectpicker.view.titleOption && this.selectpicker.view.titleOption.parentNode) {\n        this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption);\n      }\n\n      this.$element.off(EVENT_KEY).removeData('selectpicker').removeClass('bs-select-hidden selectpicker');\n      $(window).off(EVENT_KEY + '.' + this.selectId);\n    }\n  }; // SELECTPICKER PLUGIN DEFINITION\n  // ==============================\n\n  function Plugin(option) {\n    // get the args of the outer function..\n    var args = arguments; // The arguments of the function are explicitly re-defined from the argument list, because the shift causes them\n    // to get lost/corrupted in android 2.3 and IE9 #715 #775\n\n    var _option = option;\n    [].shift.apply(args); // if the version was not set successfully\n\n    if (!version.success) {\n      // try to retreive it again\n      try {\n        version.full = ($.fn.dropdown.Constructor.VERSION || '').split(' ')[0].split('.');\n      } catch (err) {\n        // fall back to use BootstrapVersion if set\n        if (Selectpicker.BootstrapVersion) {\n          version.full = Selectpicker.BootstrapVersion.split(' ')[0].split('.');\n        } else {\n          version.full = [version.major, '0', '0'];\n          console.warn('There was an issue retrieving Bootstrap\\'s version. ' + 'Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. ' + 'If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.', err);\n        }\n      }\n\n      version.major = version.full[0];\n      version.success = true;\n    }\n\n    if (version.major === '4') {\n      // some defaults need to be changed if using Bootstrap 4\n      // check to see if they have already been manually changed before forcing them to update\n      var toUpdate = [];\n      if (Selectpicker.DEFAULTS.style === classNames.BUTTONCLASS) toUpdate.push({\n        name: 'style',\n        className: 'BUTTONCLASS'\n      });\n      if (Selectpicker.DEFAULTS.iconBase === classNames.ICONBASE) toUpdate.push({\n        name: 'iconBase',\n        className: 'ICONBASE'\n      });\n      if (Selectpicker.DEFAULTS.tickIcon === classNames.TICKICON) toUpdate.push({\n        name: 'tickIcon',\n        className: 'TICKICON'\n      });\n      classNames.DIVIDER = 'dropdown-divider';\n      classNames.SHOW = 'show';\n      classNames.BUTTONCLASS = 'btn-light';\n      classNames.POPOVERHEADER = 'popover-header';\n      classNames.ICONBASE = '';\n      classNames.TICKICON = 'bs-ok-default';\n\n      for (var i = 0; i < toUpdate.length; i++) {\n        var option = toUpdate[i];\n        Selectpicker.DEFAULTS[option.name] = classNames[option.className];\n      }\n    }\n\n    var value;\n    var chain = this.each(function () {\n      var $this = $(this);\n\n      if ($this.is('select')) {\n        var data = $this.data('selectpicker'),\n            options = typeof _option == 'object' && _option;\n\n        if (!data) {\n          var dataAttributes = $this.data();\n\n          for (var dataAttr in dataAttributes) {\n            if (Object.prototype.hasOwnProperty.call(dataAttributes, dataAttr) && $.inArray(dataAttr, DISALLOWED_ATTRIBUTES) !== -1) {\n              delete dataAttributes[dataAttr];\n            }\n          }\n\n          var config = $.extend({}, Selectpicker.DEFAULTS, $.fn.selectpicker.defaults || {}, dataAttributes, options);\n          config.template = $.extend({}, Selectpicker.DEFAULTS.template, $.fn.selectpicker.defaults ? $.fn.selectpicker.defaults.template : {}, dataAttributes.template, options.template);\n          $this.data('selectpicker', data = new Selectpicker(this, config));\n        } else if (options) {\n          for (var i in options) {\n            if (Object.prototype.hasOwnProperty.call(options, i)) {\n              data.options[i] = options[i];\n            }\n          }\n        }\n\n        if (typeof _option == 'string') {\n          if (data[_option] instanceof Function) {\n            value = data[_option].apply(data, args);\n          } else {\n            value = data.options[_option];\n          }\n        }\n      }\n    });\n\n    if (typeof value !== 'undefined') {\n      // noinspection JSUnusedAssignment\n      return value;\n    } else {\n      return chain;\n    }\n  }\n\n  var old = $.fn.selectpicker;\n  $.fn.selectpicker = Plugin;\n  $.fn.selectpicker.Constructor = Selectpicker; // SELECTPICKER NO CONFLICT\n  // ========================\n\n  $.fn.selectpicker.noConflict = function () {\n    $.fn.selectpicker = old;\n    return this;\n  }; // get Bootstrap's keydown event handler for either Bootstrap 4 or Bootstrap 3\n\n\n  function keydownHandler() {\n    if ($.fn.dropdown) {\n      // wait to define until function is called in case Bootstrap isn't loaded yet\n      var bootstrapKeydown = $.fn.dropdown.Constructor._dataApiKeydownHandler || $.fn.dropdown.Constructor.prototype.keydown;\n      return bootstrapKeydown.apply(this, arguments);\n    }\n  }\n\n  $(document).off('keydown.bs.dropdown.data-api').on('keydown.bs.dropdown.data-api', ':not(.bootstrap-select) > [data-toggle=\"dropdown\"]', keydownHandler).on('keydown.bs.dropdown.data-api', ':not(.bootstrap-select) > .dropdown-menu', keydownHandler).on('keydown' + EVENT_KEY, '.bootstrap-select [data-toggle=\"dropdown\"], .bootstrap-select [role=\"listbox\"], .bootstrap-select .bs-searchbox input', Selectpicker.prototype.keydown).on('focusin.modal', '.bootstrap-select [data-toggle=\"dropdown\"], .bootstrap-select [role=\"listbox\"], .bootstrap-select .bs-searchbox input', function (e) {\n    e.stopPropagation();\n  }); // SELECTPICKER DATA-API\n  // =====================\n\n  $(window).on('load' + EVENT_KEY + '.data-api', function () {\n    $('.selectpicker').each(function () {\n      var $selectpicker = $(this);\n      Plugin.call($selectpicker, $selectpicker.data());\n    });\n  });\n})(jQuery);","map":{"version":3,"sources":["/home/manuel/Nextcloud/Dokumente/Coding/Projects/www/russiantrade/src/main/webapp/webpage/node_modules/bootstrap-select/js/bootstrap-select.js"],"names":["$","DISALLOWED_ATTRIBUTES","uriAttrs","ARIA_ATTRIBUTE_PATTERN","DefaultWhitelist","a","area","b","br","col","code","div","em","hr","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","s","small","span","sub","sup","strong","u","ul","SAFE_URL_PATTERN","DATA_URL_PATTERN","allowedAttribute","attr","allowedAttributeList","attrName","nodeName","toLowerCase","inArray","Boolean","nodeValue","match","regExp","filter","index","value","RegExp","l","length","sanitizeHtml","unsafeElements","whiteList","sanitizeFn","whitelistKeys","Object","keys","len","elements","querySelectorAll","j","len2","el","elName","indexOf","parentNode","removeChild","attributeList","slice","call","attributes","whitelistedAttributes","concat","k","len3","removeAttribute","document","createElement","view","classListProp","protoProp","elemCtrProto","Element","objCtr","classListGetter","$elem","add","classes","Array","prototype","arguments","join","addClass","remove","removeClass","toggle","force","toggleClass","contains","hasClass","defineProperty","classListPropDesc","get","enumerable","configurable","ex","number","undefined","__defineGetter__","window","testElement","classList","_add","DOMTokenList","_remove","forEach","bind","_toggle","token","isEqual","array1","array2","every","element","String","startsWith","object","$defineProperty","result","error","toString","search","TypeError","string","stringLength","searchString","searchLength","position","pos","Number","start","Math","min","max","charCodeAt","o","r","hasOwnProperty","push","HTMLSelectElement","getSelectedOptions","select","ignoreDisabled","selectedOptions","options","opt","disabled","tagName","getSelectValues","multiple","valHooks","useDefault","_set","set","elem","data","apply","changedArguments","EventIsSupported","Event","e","fn","triggerNative","eventName","event","dispatchEvent","bubbles","createEvent","initEvent","fireEvent","createEventObject","eventType","trigger","stringSearch","method","normalize","stringTypes","searchSuccess","stringType","replace","normalizeToBase","toUpperCase","toInteger","parseInt","deburredLetters","reLatin","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboMarksExtendedRange","rsComboMarksSupplementRange","rsComboRange","rsCombo","reComboMark","deburrLetter","key","escapeMap","createEscaper","map","escaper","source","testRegexp","replaceRegexp","test","htmlEscape","keyCodeMap","keyCodes","ESCAPE","ENTER","SPACE","TAB","ARROW_UP","ARROW_DOWN","version","success","major","full","dropdown","Constructor","VERSION","split","err","selectId","EVENT_KEY","classNames","DISABLED","DIVIDER","SHOW","DROPUP","MENU","MENURIGHT","MENULEFT","BUTTONCLASS","POPOVERHEADER","ICONBASE","TICKICON","Selector","elementTemplates","subtext","whitespace","createTextNode","fragment","createDocumentFragment","noResults","cloneNode","className","setAttribute","text","checkMark","REGEXP_ARROW","REGEXP_TAB_OR_ESCAPE","generateOption","content","optgroup","nodeType","appendChild","innerHTML","inline","insertAdjacentHTML","useFragment","textElement","subtextElement","iconElement","textContent","icon","iconBase","childNodes","label","display","showNoResults","searchMatch","searchValue","noneResultsText","$menuInner","firstChild","Selectpicker","that","$element","$newElement","$button","$menu","selectpicker","main","current","isSearching","keydown","keyHistory","resetKeyHistory","setTimeout","sizeInfo","title","winPad","windowPadding","val","render","refresh","setStyle","selectAll","deselectAll","destroy","show","hide","init","DEFAULTS","noneSelectedText","countSelectedText","numSelected","numTotal","maxOptionsText","numAll","numGroup","selectAllText","deselectAllText","doneButton","doneButtonText","multipleSeparator","styleBase","style","size","selectedTextFormat","width","container","hideDisabled","showSubtext","showIcon","showContent","dropupAuto","header","liveSearch","liveSearchPlaceholder","liveSearchNormalize","liveSearchStyle","actionsBox","tickIcon","showTick","template","caret","maxOptions","mobile","selectOnTab","dropdownAlignRight","virtualScroll","sanitize","constructor","id","form","prop","autofocus","createDropdown","buildData","after","prependTo","children","$searchbox","find","checkDisabled","clickListener","liveSearchListener","focusedParent","setWidth","selectPosition","on","isVirtual","menuInner","emptyMenu","replaceChild","scrollTop","hasAttribute","off","validity","valid","buildList","multiselectable","inputGroup","parent","drop","searchbox","actionsbox","donebutton","setPositionData","canHighlight","firstHighlightIndex","type","height","dividerHeight","dropdownHeaderHeight","liHeight","posinset","createView","setSize","active","selected","prevActive","selectedIndex","liIndex","selectedData","menuInnerHeight","scroll","updateValue","noScroll","chunks","chunkSize","chunkCount","firstChunk","lastChunk","currentChunk","prevPositions","positionIsDifferent","previousElements","menuIsDifferent","ceil","round","endOfChunk","position0","position1","activeIndex","prevActiveIndex","defocusItem","visibleElements","setOptionStatus","menuFragment","marginTop","marginBottom","toSanitize","visibleElementsLen","elText","elementData","lastChild","sanitized","hasScrollBar","menuInnerInnerWidth","offsetWidth","totalMenuWidth","selectWidth","minWidth","actualMenuWidth","newActive","currentActive","focusItem","isActive","liData","noStyle","setPlaceholder","updateIndex","titleOption","selectTitleOption","titleNotAppended","selectedOption","navigation","performance","getEntriesByType","isNotBackForward","defaultSelected","insertBefore","readyState","addEventListener","displayedValue","optionSelector","mainData","optID","startIndex","selectOptions","addDivider","config","previousData","addOption","option","divider","getAttribute","cssText","inlineStyle","optionClass","optgroupClass","trim","tokens","addOptgroup","previous","next","headerIndex","lastIndex","item","selectData","mainElements","widestOptionLength","buildElement","liElement","combinedLength","widestOption","findLis","placeholderSelected","selectedCount","button","buttonInner","querySelector","titleFragment","showCount","countMax","hasContent","thisData","titleOptions","totalCount","tr8nText","filterExpand","clone","newStyle","status","newElement","buttonClass","previousElementSibling","nextElementSibling","menu","menuInnerInner","dropdownHeader","actions","firstOption","input","body","offsetHeight","headerHeight","searchHeight","actionsHeight","doneButtonHeight","outerHeight","menuStyle","getComputedStyle","menuWidth","menuPadding","vert","paddingTop","css","paddingBottom","borderTopWidth","borderBottomWidth","horiz","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","menuExtras","marginLeft","marginRight","scrollBarWidth","overflowY","selectHeight","getSelectPosition","$window","offset","$container","containerPos","is","top","left","selectOffsetTop","selectOffsetBot","selectOffsetLeft","scrollLeft","selectOffsetRight","setMenuSize","isAuto","divHeight","menuHeight","divLength","minHeight","_minHeight","maxHeight","menuInnerMinHeight","estimate","isDropup","dropup","_popper","update","requestAnimationFrame","$selectClone","appendTo","btnWidth","outerWidth","$bsContainer","actualHeight","getPlacement","containerPosition","Default","isDisabled","append","detach","selectedOnly","setDisabled","setSelected","activeIndexIsSet","thisIsActive","keepActive","$document","keyCode","preventDefault","_menu","setFocus","checkPopperExists","state","isCreated","hoverLi","parentElement","hoverData","retainActive","$this","clickedData","clickedIndex","prevValue","prevIndex","prevOption","triggerChange","stopPropagation","$option","$optgroup","$optgroupOptions","maxOptionsGrp","focus","maxReached","maxReachedGrp","_option","maxOptionsArr","maxTxt","maxTxtGrp","$notify","currentTarget","target","tabindex","originalEvent","isTrusted","previousValue","q","cache","cacheArr","searchStyle","_searchStyle","normalizeSearch","cacheLen","liPrev","liSelectedIndex","changeAll","previousSelected","currentSelected","isToggle","$parent","closest","$items","liActive","activeLi","updateScroll","downOnTab","which","isArrowKey","lastIndexOf","liActiveIndex","scrollHeight","matches","cancel","clearTimeout","charAt","hasMatch","matchIndex","extend","before","removeData","Plugin","args","shift","BootstrapVersion","console","warn","toUpdate","name","chain","each","dataAttributes","dataAttr","defaults","Function","old","noConflict","keydownHandler","bootstrapKeydown","_dataApiKeydownHandler","$selectpicker","jQuery"],"mappings":"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","sourcesContent":["(function ($) {\r\n  'use strict';\r\n\r\n  var DISALLOWED_ATTRIBUTES = ['sanitize', 'whiteList', 'sanitizeFn'];\r\n\r\n  var uriAttrs = [\r\n    'background',\r\n    'cite',\r\n    'href',\r\n    'itemtype',\r\n    'longdesc',\r\n    'poster',\r\n    'src',\r\n    'xlink:href'\r\n  ];\r\n\r\n  var ARIA_ATTRIBUTE_PATTERN = /^aria-[\\w-]*$/i;\r\n\r\n  var DefaultWhitelist = {\r\n    // Global attributes allowed on any supplied element below.\r\n    '*': ['class', 'dir', 'id', 'lang', 'role', 'tabindex', 'style', ARIA_ATTRIBUTE_PATTERN],\r\n    a: ['target', 'href', 'title', 'rel'],\r\n    area: [],\r\n    b: [],\r\n    br: [],\r\n    col: [],\r\n    code: [],\r\n    div: [],\r\n    em: [],\r\n    hr: [],\r\n    h1: [],\r\n    h2: [],\r\n    h3: [],\r\n    h4: [],\r\n    h5: [],\r\n    h6: [],\r\n    i: [],\r\n    img: ['src', 'alt', 'title', 'width', 'height'],\r\n    li: [],\r\n    ol: [],\r\n    p: [],\r\n    pre: [],\r\n    s: [],\r\n    small: [],\r\n    span: [],\r\n    sub: [],\r\n    sup: [],\r\n    strong: [],\r\n    u: [],\r\n    ul: []\r\n  }\r\n\r\n  /**\r\n   * A pattern that recognizes a commonly useful subset of URLs that are safe.\r\n   *\r\n   * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\r\n   */\r\n  var SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;\r\n\r\n  /**\r\n   * A pattern that matches safe data URLs. Only matches image, video and audio types.\r\n   *\r\n   * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\r\n   */\r\n  var DATA_URL_PATTERN = /^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;\r\n\r\n  function allowedAttribute (attr, allowedAttributeList) {\r\n    var attrName = attr.nodeName.toLowerCase()\r\n\r\n    if ($.inArray(attrName, allowedAttributeList) !== -1) {\r\n      if ($.inArray(attrName, uriAttrs) !== -1) {\r\n        return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN) || attr.nodeValue.match(DATA_URL_PATTERN))\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    var regExp = $(allowedAttributeList).filter(function (index, value) {\r\n      return value instanceof RegExp\r\n    })\r\n\r\n    // Check if a regular expression validates the attribute.\r\n    for (var i = 0, l = regExp.length; i < l; i++) {\r\n      if (attrName.match(regExp[i])) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function sanitizeHtml (unsafeElements, whiteList, sanitizeFn) {\r\n    if (sanitizeFn && typeof sanitizeFn === 'function') {\r\n      return sanitizeFn(unsafeElements);\r\n    }\r\n\r\n    var whitelistKeys = Object.keys(whiteList);\r\n\r\n    for (var i = 0, len = unsafeElements.length; i < len; i++) {\r\n      var elements = unsafeElements[i].querySelectorAll('*');\r\n\r\n      for (var j = 0, len2 = elements.length; j < len2; j++) {\r\n        var el = elements[j];\r\n        var elName = el.nodeName.toLowerCase();\r\n\r\n        if (whitelistKeys.indexOf(elName) === -1) {\r\n          el.parentNode.removeChild(el);\r\n\r\n          continue;\r\n        }\r\n\r\n        var attributeList = [].slice.call(el.attributes);\r\n        var whitelistedAttributes = [].concat(whiteList['*'] || [], whiteList[elName] || []);\r\n\r\n        for (var k = 0, len3 = attributeList.length; k < len3; k++) {\r\n          var attr = attributeList[k];\r\n\r\n          if (!allowedAttribute(attr, whitelistedAttributes)) {\r\n            el.removeAttribute(attr.nodeName);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Polyfill for browsers with no classList support\r\n  // Remove in v2\r\n  if (!('classList' in document.createElement('_'))) {\r\n    (function (view) {\r\n      if (!('Element' in view)) return;\r\n\r\n      var classListProp = 'classList',\r\n          protoProp = 'prototype',\r\n          elemCtrProto = view.Element[protoProp],\r\n          objCtr = Object,\r\n          classListGetter = function () {\r\n            var $elem = $(this);\r\n\r\n            return {\r\n              add: function (classes) {\r\n                classes = Array.prototype.slice.call(arguments).join(' ');\r\n                return $elem.addClass(classes);\r\n              },\r\n              remove: function (classes) {\r\n                classes = Array.prototype.slice.call(arguments).join(' ');\r\n                return $elem.removeClass(classes);\r\n              },\r\n              toggle: function (classes, force) {\r\n                return $elem.toggleClass(classes, force);\r\n              },\r\n              contains: function (classes) {\r\n                return $elem.hasClass(classes);\r\n              }\r\n            }\r\n          };\r\n\r\n      if (objCtr.defineProperty) {\r\n        var classListPropDesc = {\r\n          get: classListGetter,\r\n          enumerable: true,\r\n          configurable: true\r\n        };\r\n        try {\r\n          objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\r\n        } catch (ex) { // IE 8 doesn't support enumerable:true\r\n          // adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\r\n          // modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\r\n          if (ex.number === undefined || ex.number === -0x7FF5EC54) {\r\n            classListPropDesc.enumerable = false;\r\n            objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\r\n          }\r\n        }\r\n      } else if (objCtr[protoProp].__defineGetter__) {\r\n        elemCtrProto.__defineGetter__(classListProp, classListGetter);\r\n      }\r\n    }(window));\r\n  }\r\n\r\n  var testElement = document.createElement('_');\r\n\r\n  testElement.classList.add('c1', 'c2');\r\n\r\n  if (!testElement.classList.contains('c2')) {\r\n    var _add = DOMTokenList.prototype.add,\r\n        _remove = DOMTokenList.prototype.remove;\r\n\r\n    DOMTokenList.prototype.add = function () {\r\n      Array.prototype.forEach.call(arguments, _add.bind(this));\r\n    }\r\n\r\n    DOMTokenList.prototype.remove = function () {\r\n      Array.prototype.forEach.call(arguments, _remove.bind(this));\r\n    }\r\n  }\r\n\r\n  testElement.classList.toggle('c3', false);\r\n\r\n  // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\r\n  // support the second argument.\r\n  if (testElement.classList.contains('c3')) {\r\n    var _toggle = DOMTokenList.prototype.toggle;\r\n\r\n    DOMTokenList.prototype.toggle = function (token, force) {\r\n      if (1 in arguments && !this.contains(token) === !force) {\r\n        return force;\r\n      } else {\r\n        return _toggle.call(this, token);\r\n      }\r\n    };\r\n  }\r\n\r\n  testElement = null;\r\n\r\n  // shallow array comparison\r\n  function isEqual (array1, array2) {\r\n    return array1.length === array2.length && array1.every(function (element, index) {\r\n      return element === array2[index];\r\n    });\r\n  };\r\n\r\n  // <editor-fold desc=\"Shims\">\r\n  if (!String.prototype.startsWith) {\r\n    (function () {\r\n      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\r\n      var defineProperty = (function () {\r\n        // IE 8 only supports `Object.defineProperty` on DOM elements\r\n        try {\r\n          var object = {};\r\n          var $defineProperty = Object.defineProperty;\r\n          var result = $defineProperty(object, object, object) && $defineProperty;\r\n        } catch (error) {\r\n        }\r\n        return result;\r\n      }());\r\n      var toString = {}.toString;\r\n      var startsWith = function (search) {\r\n        if (this == null) {\r\n          throw new TypeError();\r\n        }\r\n        var string = String(this);\r\n        if (search && toString.call(search) == '[object RegExp]') {\r\n          throw new TypeError();\r\n        }\r\n        var stringLength = string.length;\r\n        var searchString = String(search);\r\n        var searchLength = searchString.length;\r\n        var position = arguments.length > 1 ? arguments[1] : undefined;\r\n        // `ToInteger`\r\n        var pos = position ? Number(position) : 0;\r\n        if (pos != pos) { // better `isNaN`\r\n          pos = 0;\r\n        }\r\n        var start = Math.min(Math.max(pos, 0), stringLength);\r\n        // Avoid the `indexOf` call if no match is possible\r\n        if (searchLength + start > stringLength) {\r\n          return false;\r\n        }\r\n        var index = -1;\r\n        while (++index < searchLength) {\r\n          if (string.charCodeAt(start + index) != searchString.charCodeAt(index)) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      };\r\n      if (defineProperty) {\r\n        defineProperty(String.prototype, 'startsWith', {\r\n          'value': startsWith,\r\n          'configurable': true,\r\n          'writable': true\r\n        });\r\n      } else {\r\n        String.prototype.startsWith = startsWith;\r\n      }\r\n    }());\r\n  }\r\n\r\n  if (!Object.keys) {\r\n    Object.keys = function (\r\n      o, // object\r\n      k, // key\r\n      r  // result array\r\n    ) {\r\n      // initialize object and result\r\n      r = [];\r\n      // iterate over object keys\r\n      for (k in o) {\r\n        // fill result array with non-prototypical keys\r\n        r.hasOwnProperty.call(o, k) && r.push(k);\r\n      }\r\n      // return result\r\n      return r;\r\n    };\r\n  }\r\n\r\n  if (HTMLSelectElement && !HTMLSelectElement.prototype.hasOwnProperty('selectedOptions')) {\r\n    Object.defineProperty(HTMLSelectElement.prototype, 'selectedOptions', {\r\n      get: function () {\r\n        return this.querySelectorAll(':checked');\r\n      }\r\n    });\r\n  }\r\n\r\n  function getSelectedOptions (select, ignoreDisabled) {\r\n    var selectedOptions = select.selectedOptions,\r\n        options = [],\r\n        opt;\r\n\r\n    if (ignoreDisabled) {\r\n      for (var i = 0, len = selectedOptions.length; i < len; i++) {\r\n        opt = selectedOptions[i];\r\n\r\n        if (!(opt.disabled || opt.parentNode.tagName === 'OPTGROUP' && opt.parentNode.disabled)) {\r\n          options.push(opt);\r\n        }\r\n      }\r\n\r\n      return options;\r\n    }\r\n\r\n    return selectedOptions;\r\n  }\r\n\r\n  // much faster than $.val()\r\n  function getSelectValues (select, selectedOptions) {\r\n    var value = [],\r\n        options = selectedOptions || select.selectedOptions,\r\n        opt;\r\n\r\n    for (var i = 0, len = options.length; i < len; i++) {\r\n      opt = options[i];\r\n\r\n      if (!(opt.disabled || opt.parentNode.tagName === 'OPTGROUP' && opt.parentNode.disabled)) {\r\n        value.push(opt.value);\r\n      }\r\n    }\r\n\r\n    if (!select.multiple) {\r\n      return !value.length ? null : value[0];\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  // set data-selected on select element if the value has been programmatically selected\r\n  // prior to initialization of bootstrap-select\r\n  // * consider removing or replacing an alternative method *\r\n  var valHooks = {\r\n    useDefault: false,\r\n    _set: $.valHooks.select.set\r\n  };\r\n\r\n  $.valHooks.select.set = function (elem, value) {\r\n    if (value && !valHooks.useDefault) $(elem).data('selected', true);\r\n\r\n    return valHooks._set.apply(this, arguments);\r\n  };\r\n\r\n  var changedArguments = null;\r\n\r\n  var EventIsSupported = (function () {\r\n    try {\r\n      new Event('change');\r\n      return true;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  })();\r\n\r\n  $.fn.triggerNative = function (eventName) {\r\n    var el = this[0],\r\n        event;\r\n\r\n    if (el.dispatchEvent) { // for modern browsers & IE9+\r\n      if (EventIsSupported) {\r\n        // For modern browsers\r\n        event = new Event(eventName, {\r\n          bubbles: true\r\n        });\r\n      } else {\r\n        // For IE since it doesn't support Event constructor\r\n        event = document.createEvent('Event');\r\n        event.initEvent(eventName, true, false);\r\n      }\r\n\r\n      el.dispatchEvent(event);\r\n    } else if (el.fireEvent) { // for IE8\r\n      event = document.createEventObject();\r\n      event.eventType = eventName;\r\n      el.fireEvent('on' + eventName, event);\r\n    } else {\r\n      // fall back to jQuery.trigger\r\n      this.trigger(eventName);\r\n    }\r\n  };\r\n  // </editor-fold>\r\n\r\n  function stringSearch (li, searchString, method, normalize) {\r\n    var stringTypes = [\r\n          'display',\r\n          'subtext',\r\n          'tokens'\r\n        ],\r\n        searchSuccess = false;\r\n\r\n    for (var i = 0; i < stringTypes.length; i++) {\r\n      var stringType = stringTypes[i],\r\n          string = li[stringType];\r\n\r\n      if (string) {\r\n        string = string.toString();\r\n\r\n        // Strip HTML tags. This isn't perfect, but it's much faster than any other method\r\n        if (stringType === 'display') {\r\n          string = string.replace(/<[^>]+>/g, '');\r\n        }\r\n\r\n        if (normalize) string = normalizeToBase(string);\r\n        string = string.toUpperCase();\r\n\r\n        if (method === 'contains') {\r\n          searchSuccess = string.indexOf(searchString) >= 0;\r\n        } else {\r\n          searchSuccess = string.startsWith(searchString);\r\n        }\r\n\r\n        if (searchSuccess) break;\r\n      }\r\n    }\r\n\r\n    return searchSuccess;\r\n  }\r\n\r\n  function toInteger (value) {\r\n    return parseInt(value, 10) || 0;\r\n  }\r\n\r\n  // Borrowed from Lodash (_.deburr)\r\n  /** Used to map Latin Unicode letters to basic Latin letters. */\r\n  var deburredLetters = {\r\n    // Latin-1 Supplement block.\r\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\r\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\r\n    '\\xc7': 'C',  '\\xe7': 'c',\r\n    '\\xd0': 'D',  '\\xf0': 'd',\r\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\r\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\r\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\r\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\r\n    '\\xd1': 'N',  '\\xf1': 'n',\r\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\r\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\r\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\r\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\r\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\r\n    '\\xc6': 'Ae', '\\xe6': 'ae',\r\n    '\\xde': 'Th', '\\xfe': 'th',\r\n    '\\xdf': 'ss',\r\n    // Latin Extended-A block.\r\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\r\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\r\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\r\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\r\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\r\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\r\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\r\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\r\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\r\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\r\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\r\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\r\n    '\\u0134': 'J',  '\\u0135': 'j',\r\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\r\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\r\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\r\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\r\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\r\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\r\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\r\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\r\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\r\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\r\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\r\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\r\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\r\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\r\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\r\n    '\\u0174': 'W',  '\\u0175': 'w',\r\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\r\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\r\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\r\n    '\\u0132': 'IJ', '\\u0133': 'ij',\r\n    '\\u0152': 'Oe', '\\u0153': 'oe',\r\n    '\\u0149': \"'n\", '\\u017f': 's'\r\n  };\r\n\r\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\r\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\r\n\r\n  /** Used to compose unicode character classes. */\r\n  var rsComboMarksRange = '\\\\u0300-\\\\u036f',\r\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\r\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\r\n      rsComboMarksExtendedRange = '\\\\u1ab0-\\\\u1aff',\r\n      rsComboMarksSupplementRange = '\\\\u1dc0-\\\\u1dff',\r\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange + rsComboMarksExtendedRange + rsComboMarksSupplementRange;\r\n\r\n  /** Used to compose unicode capture groups. */\r\n  var rsCombo = '[' + rsComboRange + ']';\r\n\r\n  /**\r\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\r\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\r\n   */\r\n  var reComboMark = RegExp(rsCombo, 'g');\r\n\r\n  function deburrLetter (key) {\r\n    return deburredLetters[key];\r\n  };\r\n\r\n  function normalizeToBase (string) {\r\n    string = string.toString();\r\n    return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\r\n  }\r\n\r\n  // List of HTML entities for escaping.\r\n  var escapeMap = {\r\n    '&': '&amp;',\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\"': '&quot;',\r\n    \"'\": '&#x27;',\r\n    '`': '&#x60;'\r\n  };\r\n\r\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\r\n  var createEscaper = function (map) {\r\n    var escaper = function (match) {\r\n      return map[match];\r\n    };\r\n    // Regexes for identifying a key that needs to be escaped.\r\n    var source = '(?:' + Object.keys(map).join('|') + ')';\r\n    var testRegexp = RegExp(source);\r\n    var replaceRegexp = RegExp(source, 'g');\r\n    return function (string) {\r\n      string = string == null ? '' : '' + string;\r\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\r\n    };\r\n  };\r\n\r\n  var htmlEscape = createEscaper(escapeMap);\r\n\r\n  /**\r\n   * ------------------------------------------------------------------------\r\n   * Constants\r\n   * ------------------------------------------------------------------------\r\n   */\r\n\r\n  var keyCodeMap = {\r\n    32: ' ',\r\n    48: '0',\r\n    49: '1',\r\n    50: '2',\r\n    51: '3',\r\n    52: '4',\r\n    53: '5',\r\n    54: '6',\r\n    55: '7',\r\n    56: '8',\r\n    57: '9',\r\n    59: ';',\r\n    65: 'A',\r\n    66: 'B',\r\n    67: 'C',\r\n    68: 'D',\r\n    69: 'E',\r\n    70: 'F',\r\n    71: 'G',\r\n    72: 'H',\r\n    73: 'I',\r\n    74: 'J',\r\n    75: 'K',\r\n    76: 'L',\r\n    77: 'M',\r\n    78: 'N',\r\n    79: 'O',\r\n    80: 'P',\r\n    81: 'Q',\r\n    82: 'R',\r\n    83: 'S',\r\n    84: 'T',\r\n    85: 'U',\r\n    86: 'V',\r\n    87: 'W',\r\n    88: 'X',\r\n    89: 'Y',\r\n    90: 'Z',\r\n    96: '0',\r\n    97: '1',\r\n    98: '2',\r\n    99: '3',\r\n    100: '4',\r\n    101: '5',\r\n    102: '6',\r\n    103: '7',\r\n    104: '8',\r\n    105: '9'\r\n  };\r\n\r\n  var keyCodes = {\r\n    ESCAPE: 27, // KeyboardEvent.which value for Escape (Esc) key\r\n    ENTER: 13, // KeyboardEvent.which value for Enter key\r\n    SPACE: 32, // KeyboardEvent.which value for space key\r\n    TAB: 9, // KeyboardEvent.which value for tab key\r\n    ARROW_UP: 38, // KeyboardEvent.which value for up arrow key\r\n    ARROW_DOWN: 40 // KeyboardEvent.which value for down arrow key\r\n  }\r\n\r\n  var version = {\r\n    success: false,\r\n    major: '3'\r\n  };\r\n\r\n  try {\r\n    version.full = ($.fn.dropdown.Constructor.VERSION || '').split(' ')[0].split('.');\r\n    version.major = version.full[0];\r\n    version.success = true;\r\n  } catch (err) {\r\n    // do nothing\r\n  }\r\n\r\n  var selectId = 0;\r\n\r\n  var EVENT_KEY = '.bs.select';\r\n\r\n  var classNames = {\r\n    DISABLED: 'disabled',\r\n    DIVIDER: 'divider',\r\n    SHOW: 'open',\r\n    DROPUP: 'dropup',\r\n    MENU: 'dropdown-menu',\r\n    MENURIGHT: 'dropdown-menu-right',\r\n    MENULEFT: 'dropdown-menu-left',\r\n    // to-do: replace with more advanced template/customization options\r\n    BUTTONCLASS: 'btn-default',\r\n    POPOVERHEADER: 'popover-title',\r\n    ICONBASE: 'glyphicon',\r\n    TICKICON: 'glyphicon-ok'\r\n  }\r\n\r\n  var Selector = {\r\n    MENU: '.' + classNames.MENU\r\n  }\r\n\r\n  var elementTemplates = {\r\n    div: document.createElement('div'),\r\n    span: document.createElement('span'),\r\n    i: document.createElement('i'),\r\n    subtext: document.createElement('small'),\r\n    a: document.createElement('a'),\r\n    li: document.createElement('li'),\r\n    whitespace: document.createTextNode('\\u00A0'),\r\n    fragment: document.createDocumentFragment()\r\n  }\r\n\r\n  elementTemplates.noResults = elementTemplates.li.cloneNode(false);\r\n  elementTemplates.noResults.className = 'no-results';\r\n\r\n  elementTemplates.a.setAttribute('role', 'option');\r\n  elementTemplates.a.className = 'dropdown-item';\r\n\r\n  elementTemplates.subtext.className = 'text-muted';\r\n\r\n  elementTemplates.text = elementTemplates.span.cloneNode(false);\r\n  elementTemplates.text.className = 'text';\r\n\r\n  elementTemplates.checkMark = elementTemplates.span.cloneNode(false);\r\n\r\n  var REGEXP_ARROW = new RegExp(keyCodes.ARROW_UP + '|' + keyCodes.ARROW_DOWN);\r\n  var REGEXP_TAB_OR_ESCAPE = new RegExp('^' + keyCodes.TAB + '$|' + keyCodes.ESCAPE);\r\n\r\n  var generateOption = {\r\n    li: function (content, classes, optgroup) {\r\n      var li = elementTemplates.li.cloneNode(false);\r\n\r\n      if (content) {\r\n        if (content.nodeType === 1 || content.nodeType === 11) {\r\n          li.appendChild(content);\r\n        } else {\r\n          li.innerHTML = content;\r\n        }\r\n      }\r\n\r\n      if (typeof classes !== 'undefined' && classes !== '') li.className = classes;\r\n      if (typeof optgroup !== 'undefined' && optgroup !== null) li.classList.add('optgroup-' + optgroup);\r\n\r\n      return li;\r\n    },\r\n\r\n    a: function (text, classes, inline) {\r\n      var a = elementTemplates.a.cloneNode(true);\r\n\r\n      if (text) {\r\n        if (text.nodeType === 11) {\r\n          a.appendChild(text);\r\n        } else {\r\n          a.insertAdjacentHTML('beforeend', text);\r\n        }\r\n      }\r\n\r\n      if (typeof classes !== 'undefined' && classes !== '') a.classList.add.apply(a.classList, classes.split(/\\s+/));\r\n      if (inline) a.setAttribute('style', inline);\r\n\r\n      return a;\r\n    },\r\n\r\n    text: function (options, useFragment) {\r\n      var textElement = elementTemplates.text.cloneNode(false),\r\n          subtextElement,\r\n          iconElement;\r\n\r\n      if (options.content) {\r\n        textElement.innerHTML = options.content;\r\n      } else {\r\n        textElement.textContent = options.text;\r\n\r\n        if (options.icon) {\r\n          var whitespace = elementTemplates.whitespace.cloneNode(false);\r\n\r\n          // need to use <i> for icons in the button to prevent a breaking change\r\n          // note: switch to span in next major release\r\n          iconElement = (useFragment === true ? elementTemplates.i : elementTemplates.span).cloneNode(false);\r\n          iconElement.className = this.options.iconBase + ' ' + options.icon;\r\n\r\n          elementTemplates.fragment.appendChild(iconElement);\r\n          elementTemplates.fragment.appendChild(whitespace);\r\n        }\r\n\r\n        if (options.subtext) {\r\n          subtextElement = elementTemplates.subtext.cloneNode(false);\r\n          subtextElement.textContent = options.subtext;\r\n          textElement.appendChild(subtextElement);\r\n        }\r\n      }\r\n\r\n      if (useFragment === true) {\r\n        while (textElement.childNodes.length > 0) {\r\n          elementTemplates.fragment.appendChild(textElement.childNodes[0]);\r\n        }\r\n      } else {\r\n        elementTemplates.fragment.appendChild(textElement);\r\n      }\r\n\r\n      return elementTemplates.fragment;\r\n    },\r\n\r\n    label: function (options) {\r\n      var textElement = elementTemplates.text.cloneNode(false),\r\n          subtextElement,\r\n          iconElement;\r\n\r\n      textElement.innerHTML = options.display;\r\n\r\n      if (options.icon) {\r\n        var whitespace = elementTemplates.whitespace.cloneNode(false);\r\n\r\n        iconElement = elementTemplates.span.cloneNode(false);\r\n        iconElement.className = this.options.iconBase + ' ' + options.icon;\r\n\r\n        elementTemplates.fragment.appendChild(iconElement);\r\n        elementTemplates.fragment.appendChild(whitespace);\r\n      }\r\n\r\n      if (options.subtext) {\r\n        subtextElement = elementTemplates.subtext.cloneNode(false);\r\n        subtextElement.textContent = options.subtext;\r\n        textElement.appendChild(subtextElement);\r\n      }\r\n\r\n      elementTemplates.fragment.appendChild(textElement);\r\n\r\n      return elementTemplates.fragment;\r\n    }\r\n  }\r\n\r\n  function showNoResults (searchMatch, searchValue) {\r\n    if (!searchMatch.length) {\r\n      elementTemplates.noResults.innerHTML = this.options.noneResultsText.replace('{0}', '\"' + htmlEscape(searchValue) + '\"');\r\n      this.$menuInner[0].firstChild.appendChild(elementTemplates.noResults);\r\n    }\r\n  }\r\n\r\n  var Selectpicker = function (element, options) {\r\n    var that = this;\r\n\r\n    // bootstrap-select has been initialized - revert valHooks.select.set back to its original function\r\n    if (!valHooks.useDefault) {\r\n      $.valHooks.select.set = valHooks._set;\r\n      valHooks.useDefault = true;\r\n    }\r\n\r\n    this.$element = $(element);\r\n    this.$newElement = null;\r\n    this.$button = null;\r\n    this.$menu = null;\r\n    this.options = options;\r\n    this.selectpicker = {\r\n      main: {},\r\n      search: {},\r\n      current: {}, // current changes if a search is in progress\r\n      view: {},\r\n      isSearching: false,\r\n      keydown: {\r\n        keyHistory: '',\r\n        resetKeyHistory: {\r\n          start: function () {\r\n            return setTimeout(function () {\r\n              that.selectpicker.keydown.keyHistory = '';\r\n            }, 800);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    this.sizeInfo = {};\r\n\r\n    // If we have no title yet, try to pull it from the html title attribute (jQuery doesnt' pick it up as it's not a\r\n    // data-attribute)\r\n    if (this.options.title === null) {\r\n      this.options.title = this.$element.attr('title');\r\n    }\r\n\r\n    // Format window padding\r\n    var winPad = this.options.windowPadding;\r\n    if (typeof winPad === 'number') {\r\n      this.options.windowPadding = [winPad, winPad, winPad, winPad];\r\n    }\r\n\r\n    // Expose public methods\r\n    this.val = Selectpicker.prototype.val;\r\n    this.render = Selectpicker.prototype.render;\r\n    this.refresh = Selectpicker.prototype.refresh;\r\n    this.setStyle = Selectpicker.prototype.setStyle;\r\n    this.selectAll = Selectpicker.prototype.selectAll;\r\n    this.deselectAll = Selectpicker.prototype.deselectAll;\r\n    this.destroy = Selectpicker.prototype.destroy;\r\n    this.remove = Selectpicker.prototype.remove;\r\n    this.show = Selectpicker.prototype.show;\r\n    this.hide = Selectpicker.prototype.hide;\r\n\r\n    this.init();\r\n  };\r\n\r\n  Selectpicker.VERSION = '1.13.18';\r\n\r\n  // part of this is duplicated in i18n/defaults-en_US.js. Make sure to update both.\r\n  Selectpicker.DEFAULTS = {\r\n    noneSelectedText: 'Nothing selected',\r\n    noneResultsText: 'No results matched {0}',\r\n    countSelectedText: function (numSelected, numTotal) {\r\n      return (numSelected == 1) ? '{0} item selected' : '{0} items selected';\r\n    },\r\n    maxOptionsText: function (numAll, numGroup) {\r\n      return [\r\n        (numAll == 1) ? 'Limit reached ({n} item max)' : 'Limit reached ({n} items max)',\r\n        (numGroup == 1) ? 'Group limit reached ({n} item max)' : 'Group limit reached ({n} items max)'\r\n      ];\r\n    },\r\n    selectAllText: 'Select All',\r\n    deselectAllText: 'Deselect All',\r\n    doneButton: false,\r\n    doneButtonText: 'Close',\r\n    multipleSeparator: ', ',\r\n    styleBase: 'btn',\r\n    style: classNames.BUTTONCLASS,\r\n    size: 'auto',\r\n    title: null,\r\n    selectedTextFormat: 'values',\r\n    width: false,\r\n    container: false,\r\n    hideDisabled: false,\r\n    showSubtext: false,\r\n    showIcon: true,\r\n    showContent: true,\r\n    dropupAuto: true,\r\n    header: false,\r\n    liveSearch: false,\r\n    liveSearchPlaceholder: null,\r\n    liveSearchNormalize: false,\r\n    liveSearchStyle: 'contains',\r\n    actionsBox: false,\r\n    iconBase: classNames.ICONBASE,\r\n    tickIcon: classNames.TICKICON,\r\n    showTick: false,\r\n    template: {\r\n      caret: '<span class=\"caret\"></span>'\r\n    },\r\n    maxOptions: false,\r\n    mobile: false,\r\n    selectOnTab: false,\r\n    dropdownAlignRight: false,\r\n    windowPadding: 0,\r\n    virtualScroll: 600,\r\n    display: false,\r\n    sanitize: true,\r\n    sanitizeFn: null,\r\n    whiteList: DefaultWhitelist\r\n  };\r\n\r\n  Selectpicker.prototype = {\r\n\r\n    constructor: Selectpicker,\r\n\r\n    init: function () {\r\n      var that = this,\r\n          id = this.$element.attr('id'),\r\n          element = this.$element[0],\r\n          form = element.form;\r\n\r\n      selectId++;\r\n      this.selectId = 'bs-select-' + selectId;\r\n\r\n      element.classList.add('bs-select-hidden');\r\n\r\n      this.multiple = this.$element.prop('multiple');\r\n      this.autofocus = this.$element.prop('autofocus');\r\n\r\n      if (element.classList.contains('show-tick')) {\r\n        this.options.showTick = true;\r\n      }\r\n\r\n      this.$newElement = this.createDropdown();\r\n      this.buildData();\r\n      this.$element\r\n        .after(this.$newElement)\r\n        .prependTo(this.$newElement);\r\n\r\n      // ensure select is associated with form element if it got unlinked after moving it inside newElement\r\n      if (form && element.form === null) {\r\n        if (!form.id) form.id = 'form-' + this.selectId;\r\n        element.setAttribute('form', form.id);\r\n      }\r\n\r\n      this.$button = this.$newElement.children('button');\r\n      this.$menu = this.$newElement.children(Selector.MENU);\r\n      this.$menuInner = this.$menu.children('.inner');\r\n      this.$searchbox = this.$menu.find('input');\r\n\r\n      element.classList.remove('bs-select-hidden');\r\n\r\n      if (this.options.dropdownAlignRight === true) this.$menu[0].classList.add(classNames.MENURIGHT);\r\n\r\n      if (typeof id !== 'undefined') {\r\n        this.$button.attr('data-id', id);\r\n      }\r\n\r\n      this.checkDisabled();\r\n      this.clickListener();\r\n\r\n      if (this.options.liveSearch) {\r\n        this.liveSearchListener();\r\n        this.focusedParent = this.$searchbox[0];\r\n      } else {\r\n        this.focusedParent = this.$menuInner[0];\r\n      }\r\n\r\n      this.setStyle();\r\n      this.render();\r\n      this.setWidth();\r\n      if (this.options.container) {\r\n        this.selectPosition();\r\n      } else {\r\n        this.$element.on('hide' + EVENT_KEY, function () {\r\n          if (that.isVirtual()) {\r\n            // empty menu on close\r\n            var menuInner = that.$menuInner[0],\r\n                emptyMenu = menuInner.firstChild.cloneNode(false);\r\n\r\n            // replace the existing UL with an empty one - this is faster than $.empty() or innerHTML = ''\r\n            menuInner.replaceChild(emptyMenu, menuInner.firstChild);\r\n            menuInner.scrollTop = 0;\r\n          }\r\n        });\r\n      }\r\n      this.$menu.data('this', this);\r\n      this.$newElement.data('this', this);\r\n      if (this.options.mobile) this.mobile();\r\n\r\n      this.$newElement.on({\r\n        'hide.bs.dropdown': function (e) {\r\n          that.$element.trigger('hide' + EVENT_KEY, e);\r\n        },\r\n        'hidden.bs.dropdown': function (e) {\r\n          that.$element.trigger('hidden' + EVENT_KEY, e);\r\n        },\r\n        'show.bs.dropdown': function (e) {\r\n          that.$element.trigger('show' + EVENT_KEY, e);\r\n        },\r\n        'shown.bs.dropdown': function (e) {\r\n          that.$element.trigger('shown' + EVENT_KEY, e);\r\n        }\r\n      });\r\n\r\n      if (element.hasAttribute('required')) {\r\n        this.$element.on('invalid' + EVENT_KEY, function () {\r\n          that.$button[0].classList.add('bs-invalid');\r\n\r\n          that.$element\r\n            .on('shown' + EVENT_KEY + '.invalid', function () {\r\n              that.$element\r\n                .val(that.$element.val()) // set the value to hide the validation message in Chrome when menu is opened\r\n                .off('shown' + EVENT_KEY + '.invalid');\r\n            })\r\n            .on('rendered' + EVENT_KEY, function () {\r\n              // if select is no longer invalid, remove the bs-invalid class\r\n              if (this.validity.valid) that.$button[0].classList.remove('bs-invalid');\r\n              that.$element.off('rendered' + EVENT_KEY);\r\n            });\r\n\r\n          that.$button.on('blur' + EVENT_KEY, function () {\r\n            that.$element.trigger('focus').trigger('blur');\r\n            that.$button.off('blur' + EVENT_KEY);\r\n          });\r\n        });\r\n      }\r\n\r\n      setTimeout(function () {\r\n        that.buildList();\r\n        that.$element.trigger('loaded' + EVENT_KEY);\r\n      });\r\n    },\r\n\r\n    createDropdown: function () {\r\n      // Options\r\n      // If we are multiple or showTick option is set, then add the show-tick class\r\n      var showTick = (this.multiple || this.options.showTick) ? ' show-tick' : '',\r\n          multiselectable = this.multiple ? ' aria-multiselectable=\"true\"' : '',\r\n          inputGroup = '',\r\n          autofocus = this.autofocus ? ' autofocus' : '';\r\n\r\n      if (version.major < 4 && this.$element.parent().hasClass('input-group')) {\r\n        inputGroup = ' input-group-btn';\r\n      }\r\n\r\n      // Elements\r\n      var drop,\r\n          header = '',\r\n          searchbox = '',\r\n          actionsbox = '',\r\n          donebutton = '';\r\n\r\n      if (this.options.header) {\r\n        header =\r\n          '<div class=\"' + classNames.POPOVERHEADER + '\">' +\r\n            '<button type=\"button\" class=\"close\" aria-hidden=\"true\">&times;</button>' +\r\n              this.options.header +\r\n          '</div>';\r\n      }\r\n\r\n      if (this.options.liveSearch) {\r\n        searchbox =\r\n          '<div class=\"bs-searchbox\">' +\r\n            '<input type=\"search\" class=\"form-control\" autocomplete=\"off\"' +\r\n              (\r\n                this.options.liveSearchPlaceholder === null ? ''\r\n                :\r\n                ' placeholder=\"' + htmlEscape(this.options.liveSearchPlaceholder) + '\"'\r\n              ) +\r\n              ' role=\"combobox\" aria-label=\"Search\" aria-controls=\"' + this.selectId + '\" aria-autocomplete=\"list\">' +\r\n          '</div>';\r\n      }\r\n\r\n      if (this.multiple && this.options.actionsBox) {\r\n        actionsbox =\r\n          '<div class=\"bs-actionsbox\">' +\r\n            '<div class=\"btn-group btn-group-sm btn-block\">' +\r\n              '<button type=\"button\" class=\"actions-btn bs-select-all btn ' + classNames.BUTTONCLASS + '\">' +\r\n                this.options.selectAllText +\r\n              '</button>' +\r\n              '<button type=\"button\" class=\"actions-btn bs-deselect-all btn ' + classNames.BUTTONCLASS + '\">' +\r\n                this.options.deselectAllText +\r\n              '</button>' +\r\n            '</div>' +\r\n          '</div>';\r\n      }\r\n\r\n      if (this.multiple && this.options.doneButton) {\r\n        donebutton =\r\n          '<div class=\"bs-donebutton\">' +\r\n            '<div class=\"btn-group btn-block\">' +\r\n              '<button type=\"button\" class=\"btn btn-sm ' + classNames.BUTTONCLASS + '\">' +\r\n                this.options.doneButtonText +\r\n              '</button>' +\r\n            '</div>' +\r\n          '</div>';\r\n      }\r\n\r\n      drop =\r\n        '<div class=\"dropdown bootstrap-select' + showTick + inputGroup + '\">' +\r\n          '<button type=\"button\" tabindex=\"-1\" class=\"' + this.options.styleBase + ' dropdown-toggle\" ' + (this.options.display === 'static' ? 'data-display=\"static\"' : '') + 'data-toggle=\"dropdown\"' + autofocus + ' role=\"combobox\" aria-owns=\"' + this.selectId + '\" aria-haspopup=\"listbox\" aria-expanded=\"false\">' +\r\n            '<div class=\"filter-option\">' +\r\n              '<div class=\"filter-option-inner\">' +\r\n                '<div class=\"filter-option-inner-inner\"></div>' +\r\n              '</div> ' +\r\n            '</div>' +\r\n            (\r\n              version.major === '4' ? ''\r\n              :\r\n              '<span class=\"bs-caret\">' +\r\n                this.options.template.caret +\r\n              '</span>'\r\n            ) +\r\n          '</button>' +\r\n          '<div class=\"' + classNames.MENU + ' ' + (version.major === '4' ? '' : classNames.SHOW) + '\">' +\r\n            header +\r\n            searchbox +\r\n            actionsbox +\r\n            '<div class=\"inner ' + classNames.SHOW + '\" role=\"listbox\" id=\"' + this.selectId + '\" tabindex=\"-1\" ' + multiselectable + '>' +\r\n                '<ul class=\"' + classNames.MENU + ' inner ' + (version.major === '4' ? classNames.SHOW : '') + '\" role=\"presentation\">' +\r\n                '</ul>' +\r\n            '</div>' +\r\n            donebutton +\r\n          '</div>' +\r\n        '</div>';\r\n\r\n      return $(drop);\r\n    },\r\n\r\n    setPositionData: function () {\r\n      this.selectpicker.view.canHighlight = [];\r\n      this.selectpicker.view.size = 0;\r\n      this.selectpicker.view.firstHighlightIndex = false;\r\n\r\n      for (var i = 0; i < this.selectpicker.current.data.length; i++) {\r\n        var li = this.selectpicker.current.data[i],\r\n            canHighlight = true;\r\n\r\n        if (li.type === 'divider') {\r\n          canHighlight = false;\r\n          li.height = this.sizeInfo.dividerHeight;\r\n        } else if (li.type === 'optgroup-label') {\r\n          canHighlight = false;\r\n          li.height = this.sizeInfo.dropdownHeaderHeight;\r\n        } else {\r\n          li.height = this.sizeInfo.liHeight;\r\n        }\r\n\r\n        if (li.disabled) canHighlight = false;\r\n\r\n        this.selectpicker.view.canHighlight.push(canHighlight);\r\n\r\n        if (canHighlight) {\r\n          this.selectpicker.view.size++;\r\n          li.posinset = this.selectpicker.view.size;\r\n          if (this.selectpicker.view.firstHighlightIndex === false) this.selectpicker.view.firstHighlightIndex = i;\r\n        }\r\n\r\n        li.position = (i === 0 ? 0 : this.selectpicker.current.data[i - 1].position) + li.height;\r\n      }\r\n    },\r\n\r\n    isVirtual: function () {\r\n      return (this.options.virtualScroll !== false) && (this.selectpicker.main.elements.length >= this.options.virtualScroll) || this.options.virtualScroll === true;\r\n    },\r\n\r\n    createView: function (isSearching, setSize, refresh) {\r\n      var that = this,\r\n          scrollTop = 0,\r\n          active = [],\r\n          selected,\r\n          prevActive;\r\n\r\n      this.selectpicker.isSearching = isSearching;\r\n      this.selectpicker.current = isSearching ? this.selectpicker.search : this.selectpicker.main;\r\n\r\n      this.setPositionData();\r\n\r\n      if (setSize) {\r\n        if (refresh) {\r\n          scrollTop = this.$menuInner[0].scrollTop;\r\n        } else if (!that.multiple) {\r\n          var element = that.$element[0],\r\n              selectedIndex = (element.options[element.selectedIndex] || {}).liIndex;\r\n\r\n          if (typeof selectedIndex === 'number' && that.options.size !== false) {\r\n            var selectedData = that.selectpicker.main.data[selectedIndex],\r\n                position = selectedData && selectedData.position;\r\n\r\n            if (position) {\r\n              scrollTop = position - ((that.sizeInfo.menuInnerHeight + that.sizeInfo.liHeight) / 2);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      scroll(scrollTop, true);\r\n\r\n      this.$menuInner.off('scroll.createView').on('scroll.createView', function (e, updateValue) {\r\n        if (!that.noScroll) scroll(this.scrollTop, updateValue);\r\n        that.noScroll = false;\r\n      });\r\n\r\n      function scroll (scrollTop, init) {\r\n        var size = that.selectpicker.current.elements.length,\r\n            chunks = [],\r\n            chunkSize,\r\n            chunkCount,\r\n            firstChunk,\r\n            lastChunk,\r\n            currentChunk,\r\n            prevPositions,\r\n            positionIsDifferent,\r\n            previousElements,\r\n            menuIsDifferent = true,\r\n            isVirtual = that.isVirtual();\r\n\r\n        that.selectpicker.view.scrollTop = scrollTop;\r\n\r\n        chunkSize = Math.ceil(that.sizeInfo.menuInnerHeight / that.sizeInfo.liHeight * 1.5); // number of options in a chunk\r\n        chunkCount = Math.round(size / chunkSize) || 1; // number of chunks\r\n\r\n        for (var i = 0; i < chunkCount; i++) {\r\n          var endOfChunk = (i + 1) * chunkSize;\r\n\r\n          if (i === chunkCount - 1) {\r\n            endOfChunk = size;\r\n          }\r\n\r\n          chunks[i] = [\r\n            (i) * chunkSize + (!i ? 0 : 1),\r\n            endOfChunk\r\n          ];\r\n\r\n          if (!size) break;\r\n\r\n          if (currentChunk === undefined && scrollTop - 1 <= that.selectpicker.current.data[endOfChunk - 1].position - that.sizeInfo.menuInnerHeight) {\r\n            currentChunk = i;\r\n          }\r\n        }\r\n\r\n        if (currentChunk === undefined) currentChunk = 0;\r\n\r\n        prevPositions = [that.selectpicker.view.position0, that.selectpicker.view.position1];\r\n\r\n        // always display previous, current, and next chunks\r\n        firstChunk = Math.max(0, currentChunk - 1);\r\n        lastChunk = Math.min(chunkCount - 1, currentChunk + 1);\r\n\r\n        that.selectpicker.view.position0 = isVirtual === false ? 0 : (Math.max(0, chunks[firstChunk][0]) || 0);\r\n        that.selectpicker.view.position1 = isVirtual === false ? size : (Math.min(size, chunks[lastChunk][1]) || 0);\r\n\r\n        positionIsDifferent = prevPositions[0] !== that.selectpicker.view.position0 || prevPositions[1] !== that.selectpicker.view.position1;\r\n\r\n        if (that.activeIndex !== undefined) {\r\n          prevActive = that.selectpicker.main.elements[that.prevActiveIndex];\r\n          active = that.selectpicker.main.elements[that.activeIndex];\r\n          selected = that.selectpicker.main.elements[that.selectedIndex];\r\n\r\n          if (init) {\r\n            if (that.activeIndex !== that.selectedIndex) {\r\n              that.defocusItem(active);\r\n            }\r\n            that.activeIndex = undefined;\r\n          }\r\n\r\n          if (that.activeIndex && that.activeIndex !== that.selectedIndex) {\r\n            that.defocusItem(selected);\r\n          }\r\n        }\r\n\r\n        if (that.prevActiveIndex !== undefined && that.prevActiveIndex !== that.activeIndex && that.prevActiveIndex !== that.selectedIndex) {\r\n          that.defocusItem(prevActive);\r\n        }\r\n\r\n        if (init || positionIsDifferent) {\r\n          previousElements = that.selectpicker.view.visibleElements ? that.selectpicker.view.visibleElements.slice() : [];\r\n\r\n          if (isVirtual === false) {\r\n            that.selectpicker.view.visibleElements = that.selectpicker.current.elements;\r\n          } else {\r\n            that.selectpicker.view.visibleElements = that.selectpicker.current.elements.slice(that.selectpicker.view.position0, that.selectpicker.view.position1);\r\n          }\r\n\r\n          that.setOptionStatus();\r\n\r\n          // if searching, check to make sure the list has actually been updated before updating DOM\r\n          // this prevents unnecessary repaints\r\n          if (isSearching || (isVirtual === false && init)) menuIsDifferent = !isEqual(previousElements, that.selectpicker.view.visibleElements);\r\n\r\n          // if virtual scroll is disabled and not searching,\r\n          // menu should never need to be updated more than once\r\n          if ((init || isVirtual === true) && menuIsDifferent) {\r\n            var menuInner = that.$menuInner[0],\r\n                menuFragment = document.createDocumentFragment(),\r\n                emptyMenu = menuInner.firstChild.cloneNode(false),\r\n                marginTop,\r\n                marginBottom,\r\n                elements = that.selectpicker.view.visibleElements,\r\n                toSanitize = [];\r\n\r\n            // replace the existing UL with an empty one - this is faster than $.empty()\r\n            menuInner.replaceChild(emptyMenu, menuInner.firstChild);\r\n\r\n            for (var i = 0, visibleElementsLen = elements.length; i < visibleElementsLen; i++) {\r\n              var element = elements[i],\r\n                  elText,\r\n                  elementData;\r\n\r\n              if (that.options.sanitize) {\r\n                elText = element.lastChild;\r\n\r\n                if (elText) {\r\n                  elementData = that.selectpicker.current.data[i + that.selectpicker.view.position0];\r\n\r\n                  if (elementData && elementData.content && !elementData.sanitized) {\r\n                    toSanitize.push(elText);\r\n                    elementData.sanitized = true;\r\n                  }\r\n                }\r\n              }\r\n\r\n              menuFragment.appendChild(element);\r\n            }\r\n\r\n            if (that.options.sanitize && toSanitize.length) {\r\n              sanitizeHtml(toSanitize, that.options.whiteList, that.options.sanitizeFn);\r\n            }\r\n\r\n            if (isVirtual === true) {\r\n              marginTop = (that.selectpicker.view.position0 === 0 ? 0 : that.selectpicker.current.data[that.selectpicker.view.position0 - 1].position);\r\n              marginBottom = (that.selectpicker.view.position1 > size - 1 ? 0 : that.selectpicker.current.data[size - 1].position - that.selectpicker.current.data[that.selectpicker.view.position1 - 1].position);\r\n\r\n              menuInner.firstChild.style.marginTop = marginTop + 'px';\r\n              menuInner.firstChild.style.marginBottom = marginBottom + 'px';\r\n            } else {\r\n              menuInner.firstChild.style.marginTop = 0;\r\n              menuInner.firstChild.style.marginBottom = 0;\r\n            }\r\n\r\n            menuInner.firstChild.appendChild(menuFragment);\r\n\r\n            // if an option is encountered that is wider than the current menu width, update the menu width accordingly\r\n            // switch to ResizeObserver with increased browser support\r\n            if (isVirtual === true && that.sizeInfo.hasScrollBar) {\r\n              var menuInnerInnerWidth = menuInner.firstChild.offsetWidth;\r\n\r\n              if (init && menuInnerInnerWidth < that.sizeInfo.menuInnerInnerWidth && that.sizeInfo.totalMenuWidth > that.sizeInfo.selectWidth) {\r\n                menuInner.firstChild.style.minWidth = that.sizeInfo.menuInnerInnerWidth + 'px';\r\n              } else if (menuInnerInnerWidth > that.sizeInfo.menuInnerInnerWidth) {\r\n                // set to 0 to get actual width of menu\r\n                that.$menu[0].style.minWidth = 0;\r\n\r\n                var actualMenuWidth = menuInner.firstChild.offsetWidth;\r\n\r\n                if (actualMenuWidth > that.sizeInfo.menuInnerInnerWidth) {\r\n                  that.sizeInfo.menuInnerInnerWidth = actualMenuWidth;\r\n                  menuInner.firstChild.style.minWidth = that.sizeInfo.menuInnerInnerWidth + 'px';\r\n                }\r\n\r\n                // reset to default CSS styling\r\n                that.$menu[0].style.minWidth = '';\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        that.prevActiveIndex = that.activeIndex;\r\n\r\n        if (!that.options.liveSearch) {\r\n          that.$menuInner.trigger('focus');\r\n        } else if (isSearching && init) {\r\n          var index = 0,\r\n              newActive;\r\n\r\n          if (!that.selectpicker.view.canHighlight[index]) {\r\n            index = 1 + that.selectpicker.view.canHighlight.slice(1).indexOf(true);\r\n          }\r\n\r\n          newActive = that.selectpicker.view.visibleElements[index];\r\n\r\n          that.defocusItem(that.selectpicker.view.currentActive);\r\n\r\n          that.activeIndex = (that.selectpicker.current.data[index] || {}).index;\r\n\r\n          that.focusItem(newActive);\r\n        }\r\n      }\r\n\r\n      $(window)\r\n        .off('resize' + EVENT_KEY + '.' + this.selectId + '.createView')\r\n        .on('resize' + EVENT_KEY + '.' + this.selectId + '.createView', function () {\r\n          var isActive = that.$newElement.hasClass(classNames.SHOW);\r\n\r\n          if (isActive) scroll(that.$menuInner[0].scrollTop);\r\n        });\r\n    },\r\n\r\n    focusItem: function (li, liData, noStyle) {\r\n      if (li) {\r\n        liData = liData || this.selectpicker.main.data[this.activeIndex];\r\n        var a = li.firstChild;\r\n\r\n        if (a) {\r\n          a.setAttribute('aria-setsize', this.selectpicker.view.size);\r\n          a.setAttribute('aria-posinset', liData.posinset);\r\n\r\n          if (noStyle !== true) {\r\n            this.focusedParent.setAttribute('aria-activedescendant', a.id);\r\n            li.classList.add('active');\r\n            a.classList.add('active');\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    defocusItem: function (li) {\r\n      if (li) {\r\n        li.classList.remove('active');\r\n        if (li.firstChild) li.firstChild.classList.remove('active');\r\n      }\r\n    },\r\n\r\n    setPlaceholder: function () {\r\n      var that = this,\r\n          updateIndex = false;\r\n\r\n      if (this.options.title && !this.multiple) {\r\n        if (!this.selectpicker.view.titleOption) this.selectpicker.view.titleOption = document.createElement('option');\r\n\r\n        // this option doesn't create a new <li> element, but does add a new option at the start,\r\n        // so startIndex should increase to prevent having to check every option for the bs-title-option class\r\n        updateIndex = true;\r\n\r\n        var element = this.$element[0],\r\n            selectTitleOption = false,\r\n            titleNotAppended = !this.selectpicker.view.titleOption.parentNode,\r\n            selectedIndex = element.selectedIndex,\r\n            selectedOption = element.options[selectedIndex],\r\n            navigation = window.performance && window.performance.getEntriesByType('navigation'),\r\n            // Safari doesn't support getEntriesByType('navigation') - fall back to performance.navigation\r\n            isNotBackForward = (navigation && navigation.length) ? navigation[0].type !== 'back_forward' : window.performance.navigation.type !== 2;\r\n\r\n        if (titleNotAppended) {\r\n          // Use native JS to prepend option (faster)\r\n          this.selectpicker.view.titleOption.className = 'bs-title-option';\r\n          this.selectpicker.view.titleOption.value = '';\r\n\r\n          // Check if selected or data-selected attribute is already set on an option. If not, select the titleOption option.\r\n          // the selected item may have been changed by user or programmatically before the bootstrap select plugin runs,\r\n          // if so, the select will have the data-selected attribute\r\n          selectTitleOption = !selectedOption || (selectedIndex === 0 && selectedOption.defaultSelected === false && this.$element.data('selected') === undefined);\r\n        }\r\n\r\n        if (titleNotAppended || this.selectpicker.view.titleOption.index !== 0) {\r\n          element.insertBefore(this.selectpicker.view.titleOption, element.firstChild);\r\n        }\r\n\r\n        // Set selected *after* appending to select,\r\n        // otherwise the option doesn't get selected in IE\r\n        // set using selectedIndex, as setting the selected attr to true here doesn't work in IE11\r\n        if (selectTitleOption && isNotBackForward) {\r\n          element.selectedIndex = 0;\r\n        } else if (document.readyState !== 'complete') {\r\n          // if navigation type is back_forward, there's a chance the select will have its value set by BFCache\r\n          // wait for that value to be set, then run render again\r\n          window.addEventListener('pageshow', function () {\r\n            if (that.selectpicker.view.displayedValue !== element.value) that.render();\r\n          });\r\n        }\r\n      }\r\n\r\n      return updateIndex;\r\n    },\r\n\r\n    buildData: function () {\r\n      var optionSelector = ':not([hidden]):not([data-hidden=\"true\"])',\r\n          mainData = [],\r\n          optID = 0,\r\n          startIndex = this.setPlaceholder() ? 1 : 0; // append the titleOption if necessary and skip the first option in the loop\r\n\r\n      if (this.options.hideDisabled) optionSelector += ':not(:disabled)';\r\n\r\n      var selectOptions = this.$element[0].querySelectorAll('select > *' + optionSelector);\r\n\r\n      function addDivider (config) {\r\n        var previousData = mainData[mainData.length - 1];\r\n\r\n        // ensure optgroup doesn't create back-to-back dividers\r\n        if (\r\n          previousData &&\r\n          previousData.type === 'divider' &&\r\n          (previousData.optID || config.optID)\r\n        ) {\r\n          return;\r\n        }\r\n\r\n        config = config || {};\r\n        config.type = 'divider';\r\n\r\n        mainData.push(config);\r\n      }\r\n\r\n      function addOption (option, config) {\r\n        config = config || {};\r\n\r\n        config.divider = option.getAttribute('data-divider') === 'true';\r\n\r\n        if (config.divider) {\r\n          addDivider({\r\n            optID: config.optID\r\n          });\r\n        } else {\r\n          var liIndex = mainData.length,\r\n              cssText = option.style.cssText,\r\n              inlineStyle = cssText ? htmlEscape(cssText) : '',\r\n              optionClass = (option.className || '') + (config.optgroupClass || '');\r\n\r\n          if (config.optID) optionClass = 'opt ' + optionClass;\r\n\r\n          config.optionClass = optionClass.trim();\r\n          config.inlineStyle = inlineStyle;\r\n          config.text = option.textContent;\r\n\r\n          config.content = option.getAttribute('data-content');\r\n          config.tokens = option.getAttribute('data-tokens');\r\n          config.subtext = option.getAttribute('data-subtext');\r\n          config.icon = option.getAttribute('data-icon');\r\n\r\n          option.liIndex = liIndex;\r\n\r\n          config.display = config.content || config.text;\r\n          config.type = 'option';\r\n          config.index = liIndex;\r\n          config.option = option;\r\n          config.selected = !!option.selected;\r\n          config.disabled = config.disabled || !!option.disabled;\r\n\r\n          mainData.push(config);\r\n        }\r\n      }\r\n\r\n      function addOptgroup (index, selectOptions) {\r\n        var optgroup = selectOptions[index],\r\n            // skip placeholder option\r\n            previous = index - 1 < startIndex ? false : selectOptions[index - 1],\r\n            next = selectOptions[index + 1],\r\n            options = optgroup.querySelectorAll('option' + optionSelector);\r\n\r\n        if (!options.length) return;\r\n\r\n        var config = {\r\n              display: htmlEscape(optgroup.label),\r\n              subtext: optgroup.getAttribute('data-subtext'),\r\n              icon: optgroup.getAttribute('data-icon'),\r\n              type: 'optgroup-label',\r\n              optgroupClass: ' ' + (optgroup.className || '')\r\n            },\r\n            headerIndex,\r\n            lastIndex;\r\n\r\n        optID++;\r\n\r\n        if (previous) {\r\n          addDivider({ optID: optID });\r\n        }\r\n\r\n        config.optID = optID;\r\n\r\n        mainData.push(config);\r\n\r\n        for (var j = 0, len = options.length; j < len; j++) {\r\n          var option = options[j];\r\n\r\n          if (j === 0) {\r\n            headerIndex = mainData.length - 1;\r\n            lastIndex = headerIndex + len;\r\n          }\r\n\r\n          addOption(option, {\r\n            headerIndex: headerIndex,\r\n            lastIndex: lastIndex,\r\n            optID: config.optID,\r\n            optgroupClass: config.optgroupClass,\r\n            disabled: optgroup.disabled\r\n          });\r\n        }\r\n\r\n        if (next) {\r\n          addDivider({ optID: optID });\r\n        }\r\n      }\r\n\r\n      for (var len = selectOptions.length, i = startIndex; i < len; i++) {\r\n        var item = selectOptions[i];\r\n\r\n        if (item.tagName !== 'OPTGROUP') {\r\n          addOption(item, {});\r\n        } else {\r\n          addOptgroup(i, selectOptions);\r\n        }\r\n      }\r\n\r\n      this.selectpicker.main.data = this.selectpicker.current.data = mainData;\r\n    },\r\n\r\n    buildList: function () {\r\n      var that = this,\r\n          selectData = this.selectpicker.main.data,\r\n          mainElements = [],\r\n          widestOptionLength = 0;\r\n\r\n      if ((that.options.showTick || that.multiple) && !elementTemplates.checkMark.parentNode) {\r\n        elementTemplates.checkMark.className = this.options.iconBase + ' ' + that.options.tickIcon + ' check-mark';\r\n        elementTemplates.a.appendChild(elementTemplates.checkMark);\r\n      }\r\n\r\n      function buildElement (item) {\r\n        var liElement,\r\n            combinedLength = 0;\r\n\r\n        switch (item.type) {\r\n          case 'divider':\r\n            liElement = generateOption.li(\r\n              false,\r\n              classNames.DIVIDER,\r\n              (item.optID ? item.optID + 'div' : undefined)\r\n            );\r\n\r\n            break;\r\n\r\n          case 'option':\r\n            liElement = generateOption.li(\r\n              generateOption.a(\r\n                generateOption.text.call(that, item),\r\n                item.optionClass,\r\n                item.inlineStyle\r\n              ),\r\n              '',\r\n              item.optID\r\n            );\r\n\r\n            if (liElement.firstChild) {\r\n              liElement.firstChild.id = that.selectId + '-' + item.index;\r\n            }\r\n\r\n            break;\r\n\r\n          case 'optgroup-label':\r\n            liElement = generateOption.li(\r\n              generateOption.label.call(that, item),\r\n              'dropdown-header' + item.optgroupClass,\r\n              item.optID\r\n            );\r\n\r\n            break;\r\n        }\r\n\r\n        item.element = liElement;\r\n        mainElements.push(liElement);\r\n\r\n        // count the number of characters in the option - not perfect, but should work in most cases\r\n        if (item.display) combinedLength += item.display.length;\r\n        if (item.subtext) combinedLength += item.subtext.length;\r\n        // if there is an icon, ensure this option's width is checked\r\n        if (item.icon) combinedLength += 1;\r\n\r\n        if (combinedLength > widestOptionLength) {\r\n          widestOptionLength = combinedLength;\r\n\r\n          // guess which option is the widest\r\n          // use this when calculating menu width\r\n          // not perfect, but it's fast, and the width will be updating accordingly when scrolling\r\n          that.selectpicker.view.widestOption = mainElements[mainElements.length - 1];\r\n        }\r\n      }\r\n\r\n      for (var len = selectData.length, i = 0; i < len; i++) {\r\n        var item = selectData[i];\r\n\r\n        buildElement(item);\r\n      }\r\n\r\n      this.selectpicker.main.elements = this.selectpicker.current.elements = mainElements;\r\n    },\r\n\r\n    findLis: function () {\r\n      return this.$menuInner.find('.inner > li');\r\n    },\r\n\r\n    render: function () {\r\n      var that = this,\r\n          element = this.$element[0],\r\n          // ensure titleOption is appended and selected (if necessary) before getting selectedOptions\r\n          placeholderSelected = this.setPlaceholder() && element.selectedIndex === 0,\r\n          selectedOptions = getSelectedOptions(element, this.options.hideDisabled),\r\n          selectedCount = selectedOptions.length,\r\n          button = this.$button[0],\r\n          buttonInner = button.querySelector('.filter-option-inner-inner'),\r\n          multipleSeparator = document.createTextNode(this.options.multipleSeparator),\r\n          titleFragment = elementTemplates.fragment.cloneNode(false),\r\n          showCount,\r\n          countMax,\r\n          hasContent = false;\r\n\r\n      button.classList.toggle('bs-placeholder', that.multiple ? !selectedCount : !getSelectValues(element, selectedOptions));\r\n\r\n      if (!that.multiple && selectedOptions.length === 1) {\r\n        that.selectpicker.view.displayedValue = getSelectValues(element, selectedOptions);\r\n      }\r\n\r\n      if (this.options.selectedTextFormat === 'static') {\r\n        titleFragment = generateOption.text.call(this, { text: this.options.title }, true);\r\n      } else {\r\n        showCount = this.multiple && this.options.selectedTextFormat.indexOf('count') !== -1 && selectedCount > 1;\r\n\r\n        // determine if the number of selected options will be shown (showCount === true)\r\n        if (showCount) {\r\n          countMax = this.options.selectedTextFormat.split('>');\r\n          showCount = (countMax.length > 1 && selectedCount > countMax[1]) || (countMax.length === 1 && selectedCount >= 2);\r\n        }\r\n\r\n        // only loop through all selected options if the count won't be shown\r\n        if (showCount === false) {\r\n          if (!placeholderSelected) {\r\n            for (var selectedIndex = 0; selectedIndex < selectedCount; selectedIndex++) {\r\n              if (selectedIndex < 50) {\r\n                var option = selectedOptions[selectedIndex],\r\n                    thisData = this.selectpicker.main.data[option.liIndex],\r\n                    titleOptions = {};\r\n\r\n                if (this.multiple && selectedIndex > 0) {\r\n                  titleFragment.appendChild(multipleSeparator.cloneNode(false));\r\n                }\r\n\r\n                if (option.title) {\r\n                  titleOptions.text = option.title;\r\n                } else if (thisData) {\r\n                  if (thisData.content && that.options.showContent) {\r\n                    titleOptions.content = thisData.content.toString();\r\n                    hasContent = true;\r\n                  } else {\r\n                    if (that.options.showIcon) {\r\n                      titleOptions.icon = thisData.icon;\r\n                    }\r\n                    if (that.options.showSubtext && !that.multiple && thisData.subtext) titleOptions.subtext = ' ' + thisData.subtext;\r\n                    titleOptions.text = option.textContent.trim();\r\n                  }\r\n                }\r\n\r\n                titleFragment.appendChild(generateOption.text.call(this, titleOptions, true));\r\n              } else {\r\n                break;\r\n              }\r\n            }\r\n\r\n            // add ellipsis\r\n            if (selectedCount > 49) {\r\n              titleFragment.appendChild(document.createTextNode('...'));\r\n            }\r\n          }\r\n        } else {\r\n          var optionSelector = ':not([hidden]):not([data-hidden=\"true\"]):not([data-divider=\"true\"])';\r\n          if (this.options.hideDisabled) optionSelector += ':not(:disabled)';\r\n\r\n          // If this is a multiselect, and selectedTextFormat is count, then show 1 of 2 selected, etc.\r\n          var totalCount = this.$element[0].querySelectorAll('select > option' + optionSelector + ', optgroup' + optionSelector + ' option' + optionSelector).length,\r\n              tr8nText = (typeof this.options.countSelectedText === 'function') ? this.options.countSelectedText(selectedCount, totalCount) : this.options.countSelectedText;\r\n\r\n          titleFragment = generateOption.text.call(this, {\r\n            text: tr8nText.replace('{0}', selectedCount.toString()).replace('{1}', totalCount.toString())\r\n          }, true);\r\n        }\r\n      }\r\n\r\n      if (this.options.title == undefined) {\r\n        // use .attr to ensure undefined is returned if title attribute is not set\r\n        this.options.title = this.$element.attr('title');\r\n      }\r\n\r\n      // If the select doesn't have a title, then use the default, or if nothing is set at all, use noneSelectedText\r\n      if (!titleFragment.childNodes.length) {\r\n        titleFragment = generateOption.text.call(this, {\r\n          text: typeof this.options.title !== 'undefined' ? this.options.title : this.options.noneSelectedText\r\n        }, true);\r\n      }\r\n\r\n      // strip all HTML tags and trim the result, then unescape any escaped tags\r\n      button.title = titleFragment.textContent.replace(/<[^>]*>?/g, '').trim();\r\n\r\n      if (this.options.sanitize && hasContent) {\r\n        sanitizeHtml([titleFragment], that.options.whiteList, that.options.sanitizeFn);\r\n      }\r\n\r\n      buttonInner.innerHTML = '';\r\n      buttonInner.appendChild(titleFragment);\r\n\r\n      if (version.major < 4 && this.$newElement[0].classList.contains('bs3-has-addon')) {\r\n        var filterExpand = button.querySelector('.filter-expand'),\r\n            clone = buttonInner.cloneNode(true);\r\n\r\n        clone.className = 'filter-expand';\r\n\r\n        if (filterExpand) {\r\n          button.replaceChild(clone, filterExpand);\r\n        } else {\r\n          button.appendChild(clone);\r\n        }\r\n      }\r\n\r\n      this.$element.trigger('rendered' + EVENT_KEY);\r\n    },\r\n\r\n    /**\r\n     * @param [style]\r\n     * @param [status]\r\n     */\r\n    setStyle: function (newStyle, status) {\r\n      var button = this.$button[0],\r\n          newElement = this.$newElement[0],\r\n          style = this.options.style.trim(),\r\n          buttonClass;\r\n\r\n      if (this.$element.attr('class')) {\r\n        this.$newElement.addClass(this.$element.attr('class').replace(/selectpicker|mobile-device|bs-select-hidden|validate\\[.*\\]/gi, ''));\r\n      }\r\n\r\n      if (version.major < 4) {\r\n        newElement.classList.add('bs3');\r\n\r\n        if (newElement.parentNode.classList && newElement.parentNode.classList.contains('input-group') &&\r\n            (newElement.previousElementSibling || newElement.nextElementSibling) &&\r\n            (newElement.previousElementSibling || newElement.nextElementSibling).classList.contains('input-group-addon')\r\n        ) {\r\n          newElement.classList.add('bs3-has-addon');\r\n        }\r\n      }\r\n\r\n      if (newStyle) {\r\n        buttonClass = newStyle.trim();\r\n      } else {\r\n        buttonClass = style;\r\n      }\r\n\r\n      if (status == 'add') {\r\n        if (buttonClass) button.classList.add.apply(button.classList, buttonClass.split(' '));\r\n      } else if (status == 'remove') {\r\n        if (buttonClass) button.classList.remove.apply(button.classList, buttonClass.split(' '));\r\n      } else {\r\n        if (style) button.classList.remove.apply(button.classList, style.split(' '));\r\n        if (buttonClass) button.classList.add.apply(button.classList, buttonClass.split(' '));\r\n      }\r\n    },\r\n\r\n    liHeight: function (refresh) {\r\n      if (!refresh && (this.options.size === false || Object.keys(this.sizeInfo).length)) return;\r\n\r\n      var newElement = elementTemplates.div.cloneNode(false),\r\n          menu = elementTemplates.div.cloneNode(false),\r\n          menuInner = elementTemplates.div.cloneNode(false),\r\n          menuInnerInner = document.createElement('ul'),\r\n          divider = elementTemplates.li.cloneNode(false),\r\n          dropdownHeader = elementTemplates.li.cloneNode(false),\r\n          li,\r\n          a = elementTemplates.a.cloneNode(false),\r\n          text = elementTemplates.span.cloneNode(false),\r\n          header = this.options.header && this.$menu.find('.' + classNames.POPOVERHEADER).length > 0 ? this.$menu.find('.' + classNames.POPOVERHEADER)[0].cloneNode(true) : null,\r\n          search = this.options.liveSearch ? elementTemplates.div.cloneNode(false) : null,\r\n          actions = this.options.actionsBox && this.multiple && this.$menu.find('.bs-actionsbox').length > 0 ? this.$menu.find('.bs-actionsbox')[0].cloneNode(true) : null,\r\n          doneButton = this.options.doneButton && this.multiple && this.$menu.find('.bs-donebutton').length > 0 ? this.$menu.find('.bs-donebutton')[0].cloneNode(true) : null,\r\n          firstOption = this.$element.find('option')[0];\r\n\r\n      this.sizeInfo.selectWidth = this.$newElement[0].offsetWidth;\r\n\r\n      text.className = 'text';\r\n      a.className = 'dropdown-item ' + (firstOption ? firstOption.className : '');\r\n      newElement.className = this.$menu[0].parentNode.className + ' ' + classNames.SHOW;\r\n      newElement.style.width = 0; // ensure button width doesn't affect natural width of menu when calculating\r\n      if (this.options.width === 'auto') menu.style.minWidth = 0;\r\n      menu.className = classNames.MENU + ' ' + classNames.SHOW;\r\n      menuInner.className = 'inner ' + classNames.SHOW;\r\n      menuInnerInner.className = classNames.MENU + ' inner ' + (version.major === '4' ? classNames.SHOW : '');\r\n      divider.className = classNames.DIVIDER;\r\n      dropdownHeader.className = 'dropdown-header';\r\n\r\n      text.appendChild(document.createTextNode('\\u200b'));\r\n\r\n      if (this.selectpicker.current.data.length) {\r\n        for (var i = 0; i < this.selectpicker.current.data.length; i++) {\r\n          var data = this.selectpicker.current.data[i];\r\n          if (data.type === 'option') {\r\n            li = data.element;\r\n            break;\r\n          }\r\n        }\r\n      } else {\r\n        li = elementTemplates.li.cloneNode(false);\r\n        a.appendChild(text);\r\n        li.appendChild(a);\r\n      }\r\n\r\n      dropdownHeader.appendChild(text.cloneNode(true));\r\n\r\n      if (this.selectpicker.view.widestOption) {\r\n        menuInnerInner.appendChild(this.selectpicker.view.widestOption.cloneNode(true));\r\n      }\r\n\r\n      menuInnerInner.appendChild(li);\r\n      menuInnerInner.appendChild(divider);\r\n      menuInnerInner.appendChild(dropdownHeader);\r\n      if (header) menu.appendChild(header);\r\n      if (search) {\r\n        var input = document.createElement('input');\r\n        search.className = 'bs-searchbox';\r\n        input.className = 'form-control';\r\n        search.appendChild(input);\r\n        menu.appendChild(search);\r\n      }\r\n      if (actions) menu.appendChild(actions);\r\n      menuInner.appendChild(menuInnerInner);\r\n      menu.appendChild(menuInner);\r\n      if (doneButton) menu.appendChild(doneButton);\r\n      newElement.appendChild(menu);\r\n\r\n      document.body.appendChild(newElement);\r\n\r\n      var liHeight = li.offsetHeight,\r\n          dropdownHeaderHeight = dropdownHeader ? dropdownHeader.offsetHeight : 0,\r\n          headerHeight = header ? header.offsetHeight : 0,\r\n          searchHeight = search ? search.offsetHeight : 0,\r\n          actionsHeight = actions ? actions.offsetHeight : 0,\r\n          doneButtonHeight = doneButton ? doneButton.offsetHeight : 0,\r\n          dividerHeight = $(divider).outerHeight(true),\r\n          // fall back to jQuery if getComputedStyle is not supported\r\n          menuStyle = window.getComputedStyle ? window.getComputedStyle(menu) : false,\r\n          menuWidth = menu.offsetWidth,\r\n          $menu = menuStyle ? null : $(menu),\r\n          menuPadding = {\r\n            vert: toInteger(menuStyle ? menuStyle.paddingTop : $menu.css('paddingTop')) +\r\n                  toInteger(menuStyle ? menuStyle.paddingBottom : $menu.css('paddingBottom')) +\r\n                  toInteger(menuStyle ? menuStyle.borderTopWidth : $menu.css('borderTopWidth')) +\r\n                  toInteger(menuStyle ? menuStyle.borderBottomWidth : $menu.css('borderBottomWidth')),\r\n            horiz: toInteger(menuStyle ? menuStyle.paddingLeft : $menu.css('paddingLeft')) +\r\n                  toInteger(menuStyle ? menuStyle.paddingRight : $menu.css('paddingRight')) +\r\n                  toInteger(menuStyle ? menuStyle.borderLeftWidth : $menu.css('borderLeftWidth')) +\r\n                  toInteger(menuStyle ? menuStyle.borderRightWidth : $menu.css('borderRightWidth'))\r\n          },\r\n          menuExtras = {\r\n            vert: menuPadding.vert +\r\n                  toInteger(menuStyle ? menuStyle.marginTop : $menu.css('marginTop')) +\r\n                  toInteger(menuStyle ? menuStyle.marginBottom : $menu.css('marginBottom')) + 2,\r\n            horiz: menuPadding.horiz +\r\n                  toInteger(menuStyle ? menuStyle.marginLeft : $menu.css('marginLeft')) +\r\n                  toInteger(menuStyle ? menuStyle.marginRight : $menu.css('marginRight')) + 2\r\n          },\r\n          scrollBarWidth;\r\n\r\n      menuInner.style.overflowY = 'scroll';\r\n\r\n      scrollBarWidth = menu.offsetWidth - menuWidth;\r\n\r\n      document.body.removeChild(newElement);\r\n\r\n      this.sizeInfo.liHeight = liHeight;\r\n      this.sizeInfo.dropdownHeaderHeight = dropdownHeaderHeight;\r\n      this.sizeInfo.headerHeight = headerHeight;\r\n      this.sizeInfo.searchHeight = searchHeight;\r\n      this.sizeInfo.actionsHeight = actionsHeight;\r\n      this.sizeInfo.doneButtonHeight = doneButtonHeight;\r\n      this.sizeInfo.dividerHeight = dividerHeight;\r\n      this.sizeInfo.menuPadding = menuPadding;\r\n      this.sizeInfo.menuExtras = menuExtras;\r\n      this.sizeInfo.menuWidth = menuWidth;\r\n      this.sizeInfo.menuInnerInnerWidth = menuWidth - menuPadding.horiz;\r\n      this.sizeInfo.totalMenuWidth = this.sizeInfo.menuWidth;\r\n      this.sizeInfo.scrollBarWidth = scrollBarWidth;\r\n      this.sizeInfo.selectHeight = this.$newElement[0].offsetHeight;\r\n\r\n      this.setPositionData();\r\n    },\r\n\r\n    getSelectPosition: function () {\r\n      var that = this,\r\n          $window = $(window),\r\n          pos = that.$newElement.offset(),\r\n          $container = $(that.options.container),\r\n          containerPos;\r\n\r\n      if (that.options.container && $container.length && !$container.is('body')) {\r\n        containerPos = $container.offset();\r\n        containerPos.top += parseInt($container.css('borderTopWidth'));\r\n        containerPos.left += parseInt($container.css('borderLeftWidth'));\r\n      } else {\r\n        containerPos = { top: 0, left: 0 };\r\n      }\r\n\r\n      var winPad = that.options.windowPadding;\r\n\r\n      this.sizeInfo.selectOffsetTop = pos.top - containerPos.top - $window.scrollTop();\r\n      this.sizeInfo.selectOffsetBot = $window.height() - this.sizeInfo.selectOffsetTop - this.sizeInfo.selectHeight - containerPos.top - winPad[2];\r\n      this.sizeInfo.selectOffsetLeft = pos.left - containerPos.left - $window.scrollLeft();\r\n      this.sizeInfo.selectOffsetRight = $window.width() - this.sizeInfo.selectOffsetLeft - this.sizeInfo.selectWidth - containerPos.left - winPad[1];\r\n      this.sizeInfo.selectOffsetTop -= winPad[0];\r\n      this.sizeInfo.selectOffsetLeft -= winPad[3];\r\n    },\r\n\r\n    setMenuSize: function (isAuto) {\r\n      this.getSelectPosition();\r\n\r\n      var selectWidth = this.sizeInfo.selectWidth,\r\n          liHeight = this.sizeInfo.liHeight,\r\n          headerHeight = this.sizeInfo.headerHeight,\r\n          searchHeight = this.sizeInfo.searchHeight,\r\n          actionsHeight = this.sizeInfo.actionsHeight,\r\n          doneButtonHeight = this.sizeInfo.doneButtonHeight,\r\n          divHeight = this.sizeInfo.dividerHeight,\r\n          menuPadding = this.sizeInfo.menuPadding,\r\n          menuInnerHeight,\r\n          menuHeight,\r\n          divLength = 0,\r\n          minHeight,\r\n          _minHeight,\r\n          maxHeight,\r\n          menuInnerMinHeight,\r\n          estimate,\r\n          isDropup;\r\n\r\n      if (this.options.dropupAuto) {\r\n        // Get the estimated height of the menu without scrollbars.\r\n        // This is useful for smaller menus, where there might be plenty of room\r\n        // below the button without setting dropup, but we can't know\r\n        // the exact height of the menu until createView is called later\r\n        estimate = liHeight * this.selectpicker.current.elements.length + menuPadding.vert;\r\n\r\n        isDropup = this.sizeInfo.selectOffsetTop - this.sizeInfo.selectOffsetBot > this.sizeInfo.menuExtras.vert && estimate + this.sizeInfo.menuExtras.vert + 50 > this.sizeInfo.selectOffsetBot;\r\n\r\n        // ensure dropup doesn't change while searching (so menu doesn't bounce back and forth)\r\n        if (this.selectpicker.isSearching === true) {\r\n          isDropup = this.selectpicker.dropup;\r\n        }\r\n\r\n        this.$newElement.toggleClass(classNames.DROPUP, isDropup);\r\n        this.selectpicker.dropup = isDropup;\r\n      }\r\n\r\n      if (this.options.size === 'auto') {\r\n        _minHeight = this.selectpicker.current.elements.length > 3 ? this.sizeInfo.liHeight * 3 + this.sizeInfo.menuExtras.vert - 2 : 0;\r\n        menuHeight = this.sizeInfo.selectOffsetBot - this.sizeInfo.menuExtras.vert;\r\n        minHeight = _minHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight;\r\n        menuInnerMinHeight = Math.max(_minHeight - menuPadding.vert, 0);\r\n\r\n        if (this.$newElement.hasClass(classNames.DROPUP)) {\r\n          menuHeight = this.sizeInfo.selectOffsetTop - this.sizeInfo.menuExtras.vert;\r\n        }\r\n\r\n        maxHeight = menuHeight;\r\n        menuInnerHeight = menuHeight - headerHeight - searchHeight - actionsHeight - doneButtonHeight - menuPadding.vert;\r\n      } else if (this.options.size && this.options.size != 'auto' && this.selectpicker.current.elements.length > this.options.size) {\r\n        for (var i = 0; i < this.options.size; i++) {\r\n          if (this.selectpicker.current.data[i].type === 'divider') divLength++;\r\n        }\r\n\r\n        menuHeight = liHeight * this.options.size + divLength * divHeight + menuPadding.vert;\r\n        menuInnerHeight = menuHeight - menuPadding.vert;\r\n        maxHeight = menuHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight;\r\n        minHeight = menuInnerMinHeight = '';\r\n      }\r\n\r\n      this.$menu.css({\r\n        'max-height': maxHeight + 'px',\r\n        'overflow': 'hidden',\r\n        'min-height': minHeight + 'px'\r\n      });\r\n\r\n      this.$menuInner.css({\r\n        'max-height': menuInnerHeight + 'px',\r\n        'overflow-y': 'auto',\r\n        'min-height': menuInnerMinHeight + 'px'\r\n      });\r\n\r\n      // ensure menuInnerHeight is always a positive number to prevent issues calculating chunkSize in createView\r\n      this.sizeInfo.menuInnerHeight = Math.max(menuInnerHeight, 1);\r\n\r\n      if (this.selectpicker.current.data.length && this.selectpicker.current.data[this.selectpicker.current.data.length - 1].position > this.sizeInfo.menuInnerHeight) {\r\n        this.sizeInfo.hasScrollBar = true;\r\n        this.sizeInfo.totalMenuWidth = this.sizeInfo.menuWidth + this.sizeInfo.scrollBarWidth;\r\n      }\r\n\r\n      if (this.options.dropdownAlignRight === 'auto') {\r\n        this.$menu.toggleClass(classNames.MENURIGHT, this.sizeInfo.selectOffsetLeft > this.sizeInfo.selectOffsetRight && this.sizeInfo.selectOffsetRight < (this.sizeInfo.totalMenuWidth - selectWidth));\r\n      }\r\n\r\n      if (this.dropdown && this.dropdown._popper) this.dropdown._popper.update();\r\n    },\r\n\r\n    setSize: function (refresh) {\r\n      this.liHeight(refresh);\r\n\r\n      if (this.options.header) this.$menu.css('padding-top', 0);\r\n\r\n      if (this.options.size !== false) {\r\n        var that = this,\r\n            $window = $(window);\r\n\r\n        this.setMenuSize();\r\n\r\n        if (this.options.liveSearch) {\r\n          this.$searchbox\r\n            .off('input.setMenuSize propertychange.setMenuSize')\r\n            .on('input.setMenuSize propertychange.setMenuSize', function () {\r\n              return that.setMenuSize();\r\n            });\r\n        }\r\n\r\n        if (this.options.size === 'auto') {\r\n          $window\r\n            .off('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize')\r\n            .on('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize', function () {\r\n              return that.setMenuSize();\r\n            });\r\n        } else if (this.options.size && this.options.size != 'auto' && this.selectpicker.current.elements.length > this.options.size) {\r\n          $window.off('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize');\r\n        }\r\n      }\r\n\r\n      this.createView(false, true, refresh);\r\n    },\r\n\r\n    setWidth: function () {\r\n      var that = this;\r\n\r\n      if (this.options.width === 'auto') {\r\n        requestAnimationFrame(function () {\r\n          that.$menu.css('min-width', '0');\r\n\r\n          that.$element.on('loaded' + EVENT_KEY, function () {\r\n            that.liHeight();\r\n            that.setMenuSize();\r\n\r\n            // Get correct width if element is hidden\r\n            var $selectClone = that.$newElement.clone().appendTo('body'),\r\n                btnWidth = $selectClone.css('width', 'auto').children('button').outerWidth();\r\n\r\n            $selectClone.remove();\r\n\r\n            // Set width to whatever's larger, button title or longest option\r\n            that.sizeInfo.selectWidth = Math.max(that.sizeInfo.totalMenuWidth, btnWidth);\r\n            that.$newElement.css('width', that.sizeInfo.selectWidth + 'px');\r\n          });\r\n        });\r\n      } else if (this.options.width === 'fit') {\r\n        // Remove inline min-width so width can be changed from 'auto'\r\n        this.$menu.css('min-width', '');\r\n        this.$newElement.css('width', '').addClass('fit-width');\r\n      } else if (this.options.width) {\r\n        // Remove inline min-width so width can be changed from 'auto'\r\n        this.$menu.css('min-width', '');\r\n        this.$newElement.css('width', this.options.width);\r\n      } else {\r\n        // Remove inline min-width/width so width can be changed\r\n        this.$menu.css('min-width', '');\r\n        this.$newElement.css('width', '');\r\n      }\r\n      // Remove fit-width class if width is changed programmatically\r\n      if (this.$newElement.hasClass('fit-width') && this.options.width !== 'fit') {\r\n        this.$newElement[0].classList.remove('fit-width');\r\n      }\r\n    },\r\n\r\n    selectPosition: function () {\r\n      this.$bsContainer = $('<div class=\"bs-container\" />');\r\n\r\n      var that = this,\r\n          $container = $(this.options.container),\r\n          pos,\r\n          containerPos,\r\n          actualHeight,\r\n          getPlacement = function ($element) {\r\n            var containerPosition = {},\r\n                // fall back to dropdown's default display setting if display is not manually set\r\n                display = that.options.display || (\r\n                  // Bootstrap 3 doesn't have $.fn.dropdown.Constructor.Default\r\n                  $.fn.dropdown.Constructor.Default ? $.fn.dropdown.Constructor.Default.display\r\n                  : false\r\n                );\r\n\r\n            that.$bsContainer.addClass($element.attr('class').replace(/form-control|fit-width/gi, '')).toggleClass(classNames.DROPUP, $element.hasClass(classNames.DROPUP));\r\n            pos = $element.offset();\r\n\r\n            if (!$container.is('body')) {\r\n              containerPos = $container.offset();\r\n              containerPos.top += parseInt($container.css('borderTopWidth')) - $container.scrollTop();\r\n              containerPos.left += parseInt($container.css('borderLeftWidth')) - $container.scrollLeft();\r\n            } else {\r\n              containerPos = { top: 0, left: 0 };\r\n            }\r\n\r\n            actualHeight = $element.hasClass(classNames.DROPUP) ? 0 : $element[0].offsetHeight;\r\n\r\n            // Bootstrap 4+ uses Popper for menu positioning\r\n            if (version.major < 4 || display === 'static') {\r\n              containerPosition.top = pos.top - containerPos.top + actualHeight;\r\n              containerPosition.left = pos.left - containerPos.left;\r\n            }\r\n\r\n            containerPosition.width = $element[0].offsetWidth;\r\n\r\n            that.$bsContainer.css(containerPosition);\r\n          };\r\n\r\n      this.$button.on('click.bs.dropdown.data-api', function () {\r\n        if (that.isDisabled()) {\r\n          return;\r\n        }\r\n\r\n        getPlacement(that.$newElement);\r\n\r\n        that.$bsContainer\r\n          .appendTo(that.options.container)\r\n          .toggleClass(classNames.SHOW, !that.$button.hasClass(classNames.SHOW))\r\n          .append(that.$menu);\r\n      });\r\n\r\n      $(window)\r\n        .off('resize' + EVENT_KEY + '.' + this.selectId + ' scroll' + EVENT_KEY + '.' + this.selectId)\r\n        .on('resize' + EVENT_KEY + '.' + this.selectId + ' scroll' + EVENT_KEY + '.' + this.selectId, function () {\r\n          var isActive = that.$newElement.hasClass(classNames.SHOW);\r\n\r\n          if (isActive) getPlacement(that.$newElement);\r\n        });\r\n\r\n      this.$element.on('hide' + EVENT_KEY, function () {\r\n        that.$menu.data('height', that.$menu.height());\r\n        that.$bsContainer.detach();\r\n      });\r\n    },\r\n\r\n    setOptionStatus: function (selectedOnly) {\r\n      var that = this;\r\n\r\n      that.noScroll = false;\r\n\r\n      if (that.selectpicker.view.visibleElements && that.selectpicker.view.visibleElements.length) {\r\n        for (var i = 0; i < that.selectpicker.view.visibleElements.length; i++) {\r\n          var liData = that.selectpicker.current.data[i + that.selectpicker.view.position0],\r\n              option = liData.option;\r\n\r\n          if (option) {\r\n            if (selectedOnly !== true) {\r\n              that.setDisabled(\r\n                liData.index,\r\n                liData.disabled\r\n              );\r\n            }\r\n\r\n            that.setSelected(\r\n              liData.index,\r\n              option.selected\r\n            );\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * @param {number} index - the index of the option that is being changed\r\n     * @param {boolean} selected - true if the option is being selected, false if being deselected\r\n     */\r\n    setSelected: function (index, selected) {\r\n      var li = this.selectpicker.main.elements[index],\r\n          liData = this.selectpicker.main.data[index],\r\n          activeIndexIsSet = this.activeIndex !== undefined,\r\n          thisIsActive = this.activeIndex === index,\r\n          prevActive,\r\n          a,\r\n          // if current option is already active\r\n          // OR\r\n          // if the current option is being selected, it's NOT multiple, and\r\n          // activeIndex is undefined:\r\n          //  - when the menu is first being opened, OR\r\n          //  - after a search has been performed, OR\r\n          //  - when retainActive is false when selecting a new option (i.e. index of the newly selected option is not the same as the current activeIndex)\r\n          keepActive = thisIsActive || (selected && !this.multiple && !activeIndexIsSet);\r\n\r\n      liData.selected = selected;\r\n\r\n      a = li.firstChild;\r\n\r\n      if (selected) {\r\n        this.selectedIndex = index;\r\n      }\r\n\r\n      li.classList.toggle('selected', selected);\r\n\r\n      if (keepActive) {\r\n        this.focusItem(li, liData);\r\n        this.selectpicker.view.currentActive = li;\r\n        this.activeIndex = index;\r\n      } else {\r\n        this.defocusItem(li);\r\n      }\r\n\r\n      if (a) {\r\n        a.classList.toggle('selected', selected);\r\n\r\n        if (selected) {\r\n          a.setAttribute('aria-selected', true);\r\n        } else {\r\n          if (this.multiple) {\r\n            a.setAttribute('aria-selected', false);\r\n          } else {\r\n            a.removeAttribute('aria-selected');\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!keepActive && !activeIndexIsSet && selected && this.prevActiveIndex !== undefined) {\r\n        prevActive = this.selectpicker.main.elements[this.prevActiveIndex];\r\n\r\n        this.defocusItem(prevActive);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * @param {number} index - the index of the option that is being disabled\r\n     * @param {boolean} disabled - true if the option is being disabled, false if being enabled\r\n     */\r\n    setDisabled: function (index, disabled) {\r\n      var li = this.selectpicker.main.elements[index],\r\n          a;\r\n\r\n      this.selectpicker.main.data[index].disabled = disabled;\r\n\r\n      a = li.firstChild;\r\n\r\n      li.classList.toggle(classNames.DISABLED, disabled);\r\n\r\n      if (a) {\r\n        if (version.major === '4') a.classList.toggle(classNames.DISABLED, disabled);\r\n\r\n        if (disabled) {\r\n          a.setAttribute('aria-disabled', disabled);\r\n          a.setAttribute('tabindex', -1);\r\n        } else {\r\n          a.removeAttribute('aria-disabled');\r\n          a.setAttribute('tabindex', 0);\r\n        }\r\n      }\r\n    },\r\n\r\n    isDisabled: function () {\r\n      return this.$element[0].disabled;\r\n    },\r\n\r\n    checkDisabled: function () {\r\n      if (this.isDisabled()) {\r\n        this.$newElement[0].classList.add(classNames.DISABLED);\r\n        this.$button.addClass(classNames.DISABLED).attr('aria-disabled', true);\r\n      } else {\r\n        if (this.$button[0].classList.contains(classNames.DISABLED)) {\r\n          this.$newElement[0].classList.remove(classNames.DISABLED);\r\n          this.$button.removeClass(classNames.DISABLED).attr('aria-disabled', false);\r\n        }\r\n      }\r\n    },\r\n\r\n    clickListener: function () {\r\n      var that = this,\r\n          $document = $(document);\r\n\r\n      $document.data('spaceSelect', false);\r\n\r\n      this.$button.on('keyup', function (e) {\r\n        if (/(32)/.test(e.keyCode.toString(10)) && $document.data('spaceSelect')) {\r\n          e.preventDefault();\r\n          $document.data('spaceSelect', false);\r\n        }\r\n      });\r\n\r\n      this.$newElement.on('show.bs.dropdown', function () {\r\n        if (version.major > 3 && !that.dropdown) {\r\n          that.dropdown = that.$button.data('bs.dropdown');\r\n          that.dropdown._menu = that.$menu[0];\r\n        }\r\n      });\r\n\r\n      this.$button.on('click.bs.dropdown.data-api', function () {\r\n        if (!that.$newElement.hasClass(classNames.SHOW)) {\r\n          that.setSize();\r\n        }\r\n      });\r\n\r\n      function setFocus () {\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.trigger('focus');\r\n        } else {\r\n          that.$menuInner.trigger('focus');\r\n        }\r\n      }\r\n\r\n      function checkPopperExists () {\r\n        if (that.dropdown && that.dropdown._popper && that.dropdown._popper.state.isCreated) {\r\n          setFocus();\r\n        } else {\r\n          requestAnimationFrame(checkPopperExists);\r\n        }\r\n      }\r\n\r\n      this.$element.on('shown' + EVENT_KEY, function () {\r\n        if (that.$menuInner[0].scrollTop !== that.selectpicker.view.scrollTop) {\r\n          that.$menuInner[0].scrollTop = that.selectpicker.view.scrollTop;\r\n        }\r\n\r\n        if (version.major > 3) {\r\n          requestAnimationFrame(checkPopperExists);\r\n        } else {\r\n          setFocus();\r\n        }\r\n      });\r\n\r\n      // ensure posinset and setsize are correct before selecting an option via a click\r\n      this.$menuInner.on('mouseenter', 'li a', function (e) {\r\n        var hoverLi = this.parentElement,\r\n            position0 = that.isVirtual() ? that.selectpicker.view.position0 : 0,\r\n            index = Array.prototype.indexOf.call(hoverLi.parentElement.children, hoverLi),\r\n            hoverData = that.selectpicker.current.data[index + position0];\r\n\r\n        that.focusItem(hoverLi, hoverData, true);\r\n      });\r\n\r\n      this.$menuInner.on('click', 'li a', function (e, retainActive) {\r\n        var $this = $(this),\r\n            element = that.$element[0],\r\n            position0 = that.isVirtual() ? that.selectpicker.view.position0 : 0,\r\n            clickedData = that.selectpicker.current.data[$this.parent().index() + position0],\r\n            clickedIndex = clickedData.index,\r\n            prevValue = getSelectValues(element),\r\n            prevIndex = element.selectedIndex,\r\n            prevOption = element.options[prevIndex],\r\n            triggerChange = true;\r\n\r\n        // Don't close on multi choice menu\r\n        if (that.multiple && that.options.maxOptions !== 1) {\r\n          e.stopPropagation();\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        // Don't run if the select is disabled\r\n        if (!that.isDisabled() && !$this.parent().hasClass(classNames.DISABLED)) {\r\n          var option = clickedData.option,\r\n              $option = $(option),\r\n              state = option.selected,\r\n              $optgroup = $option.parent('optgroup'),\r\n              $optgroupOptions = $optgroup.find('option'),\r\n              maxOptions = that.options.maxOptions,\r\n              maxOptionsGrp = $optgroup.data('maxOptions') || false;\r\n\r\n          if (clickedIndex === that.activeIndex) retainActive = true;\r\n\r\n          if (!retainActive) {\r\n            that.prevActiveIndex = that.activeIndex;\r\n            that.activeIndex = undefined;\r\n          }\r\n\r\n          if (!that.multiple) { // Deselect all others if not multi select box\r\n            if (prevOption) prevOption.selected = false;\r\n            option.selected = true;\r\n            that.setSelected(clickedIndex, true);\r\n          } else { // Toggle the one we have chosen if we are multi select.\r\n            option.selected = !state;\r\n\r\n            that.setSelected(clickedIndex, !state);\r\n            that.focusedParent.focus();\r\n\r\n            if (maxOptions !== false || maxOptionsGrp !== false) {\r\n              var maxReached = maxOptions < getSelectedOptions(element).length,\r\n                  maxReachedGrp = maxOptionsGrp < $optgroup.find('option:selected').length;\r\n\r\n              if ((maxOptions && maxReached) || (maxOptionsGrp && maxReachedGrp)) {\r\n                if (maxOptions && maxOptions == 1) {\r\n                  element.selectedIndex = -1;\r\n                  option.selected = true;\r\n                  that.setOptionStatus(true);\r\n                } else if (maxOptionsGrp && maxOptionsGrp == 1) {\r\n                  for (var i = 0; i < $optgroupOptions.length; i++) {\r\n                    var _option = $optgroupOptions[i];\r\n                    _option.selected = false;\r\n                    that.setSelected(_option.liIndex, false);\r\n                  }\r\n\r\n                  option.selected = true;\r\n                  that.setSelected(clickedIndex, true);\r\n                } else {\r\n                  var maxOptionsText = typeof that.options.maxOptionsText === 'string' ? [that.options.maxOptionsText, that.options.maxOptionsText] : that.options.maxOptionsText,\r\n                      maxOptionsArr = typeof maxOptionsText === 'function' ? maxOptionsText(maxOptions, maxOptionsGrp) : maxOptionsText,\r\n                      maxTxt = maxOptionsArr[0].replace('{n}', maxOptions),\r\n                      maxTxtGrp = maxOptionsArr[1].replace('{n}', maxOptionsGrp),\r\n                      $notify = $('<div class=\"notify\"></div>');\r\n                  // If {var} is set in array, replace it\r\n                  /** @deprecated */\r\n                  if (maxOptionsArr[2]) {\r\n                    maxTxt = maxTxt.replace('{var}', maxOptionsArr[2][maxOptions > 1 ? 0 : 1]);\r\n                    maxTxtGrp = maxTxtGrp.replace('{var}', maxOptionsArr[2][maxOptionsGrp > 1 ? 0 : 1]);\r\n                  }\r\n\r\n                  option.selected = false;\r\n\r\n                  that.$menu.append($notify);\r\n\r\n                  if (maxOptions && maxReached) {\r\n                    $notify.append($('<div>' + maxTxt + '</div>'));\r\n                    triggerChange = false;\r\n                    that.$element.trigger('maxReached' + EVENT_KEY);\r\n                  }\r\n\r\n                  if (maxOptionsGrp && maxReachedGrp) {\r\n                    $notify.append($('<div>' + maxTxtGrp + '</div>'));\r\n                    triggerChange = false;\r\n                    that.$element.trigger('maxReachedGrp' + EVENT_KEY);\r\n                  }\r\n\r\n                  setTimeout(function () {\r\n                    that.setSelected(clickedIndex, false);\r\n                  }, 10);\r\n\r\n                  $notify[0].classList.add('fadeOut');\r\n\r\n                  setTimeout(function () {\r\n                    $notify.remove();\r\n                  }, 1050);\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          if (!that.multiple || (that.multiple && that.options.maxOptions === 1)) {\r\n            that.$button.trigger('focus');\r\n          } else if (that.options.liveSearch) {\r\n            that.$searchbox.trigger('focus');\r\n          }\r\n\r\n          // Trigger select 'change'\r\n          if (triggerChange) {\r\n            if (that.multiple || prevIndex !== element.selectedIndex) {\r\n              // $option.prop('selected') is current option state (selected/unselected). prevValue is the value of the select prior to being changed.\r\n              changedArguments = [option.index, $option.prop('selected'), prevValue];\r\n              that.$element\r\n                .triggerNative('change');\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      this.$menu.on('click', 'li.' + classNames.DISABLED + ' a, .' + classNames.POPOVERHEADER + ', .' + classNames.POPOVERHEADER + ' :not(.close)', function (e) {\r\n        if (e.currentTarget == this) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          if (that.options.liveSearch && !$(e.target).hasClass('close')) {\r\n            that.$searchbox.trigger('focus');\r\n          } else {\r\n            that.$button.trigger('focus');\r\n          }\r\n        }\r\n      });\r\n\r\n      this.$menuInner.on('click', '.divider, .dropdown-header', function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.trigger('focus');\r\n        } else {\r\n          that.$button.trigger('focus');\r\n        }\r\n      });\r\n\r\n      this.$menu.on('click', '.' + classNames.POPOVERHEADER + ' .close', function () {\r\n        that.$button.trigger('click');\r\n      });\r\n\r\n      this.$searchbox.on('click', function (e) {\r\n        e.stopPropagation();\r\n      });\r\n\r\n      this.$menu.on('click', '.actions-btn', function (e) {\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.trigger('focus');\r\n        } else {\r\n          that.$button.trigger('focus');\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if ($(this).hasClass('bs-select-all')) {\r\n          that.selectAll();\r\n        } else {\r\n          that.deselectAll();\r\n        }\r\n      });\r\n\r\n      this.$button\r\n        .on('focus' + EVENT_KEY, function (e) {\r\n          var tabindex = that.$element[0].getAttribute('tabindex');\r\n\r\n          // only change when button is actually focused\r\n          if (tabindex !== undefined && e.originalEvent && e.originalEvent.isTrusted) {\r\n            // apply select element's tabindex to ensure correct order is followed when tabbing to the next element\r\n            this.setAttribute('tabindex', tabindex);\r\n            // set element's tabindex to -1 to allow for reverse tabbing\r\n            that.$element[0].setAttribute('tabindex', -1);\r\n            that.selectpicker.view.tabindex = tabindex;\r\n          }\r\n        })\r\n        .on('blur' + EVENT_KEY, function (e) {\r\n          // revert everything to original tabindex\r\n          if (that.selectpicker.view.tabindex !== undefined && e.originalEvent && e.originalEvent.isTrusted) {\r\n            that.$element[0].setAttribute('tabindex', that.selectpicker.view.tabindex);\r\n            this.setAttribute('tabindex', -1);\r\n            that.selectpicker.view.tabindex = undefined;\r\n          }\r\n        });\r\n\r\n      this.$element\r\n        .on('change' + EVENT_KEY, function () {\r\n          that.render();\r\n          that.$element.trigger('changed' + EVENT_KEY, changedArguments);\r\n          changedArguments = null;\r\n        })\r\n        .on('focus' + EVENT_KEY, function () {\r\n          if (!that.options.mobile) that.$button[0].focus();\r\n        });\r\n    },\r\n\r\n    liveSearchListener: function () {\r\n      var that = this;\r\n\r\n      this.$button.on('click.bs.dropdown.data-api', function () {\r\n        if (!!that.$searchbox.val()) {\r\n          that.$searchbox.val('');\r\n          that.selectpicker.search.previousValue = undefined;\r\n        }\r\n      });\r\n\r\n      this.$searchbox.on('click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api', function (e) {\r\n        e.stopPropagation();\r\n      });\r\n\r\n      this.$searchbox.on('input propertychange', function () {\r\n        var searchValue = that.$searchbox[0].value;\r\n\r\n        that.selectpicker.search.elements = [];\r\n        that.selectpicker.search.data = [];\r\n\r\n        if (searchValue) {\r\n          var i,\r\n              searchMatch = [],\r\n              q = searchValue.toUpperCase(),\r\n              cache = {},\r\n              cacheArr = [],\r\n              searchStyle = that._searchStyle(),\r\n              normalizeSearch = that.options.liveSearchNormalize;\r\n\r\n          if (normalizeSearch) q = normalizeToBase(q);\r\n\r\n          for (var i = 0; i < that.selectpicker.main.data.length; i++) {\r\n            var li = that.selectpicker.main.data[i];\r\n\r\n            if (!cache[i]) {\r\n              cache[i] = stringSearch(li, q, searchStyle, normalizeSearch);\r\n            }\r\n\r\n            if (cache[i] && li.headerIndex !== undefined && cacheArr.indexOf(li.headerIndex) === -1) {\r\n              if (li.headerIndex > 0) {\r\n                cache[li.headerIndex - 1] = true;\r\n                cacheArr.push(li.headerIndex - 1);\r\n              }\r\n\r\n              cache[li.headerIndex] = true;\r\n              cacheArr.push(li.headerIndex);\r\n\r\n              cache[li.lastIndex + 1] = true;\r\n            }\r\n\r\n            if (cache[i] && li.type !== 'optgroup-label') cacheArr.push(i);\r\n          }\r\n\r\n          for (var i = 0, cacheLen = cacheArr.length; i < cacheLen; i++) {\r\n            var index = cacheArr[i],\r\n                prevIndex = cacheArr[i - 1],\r\n                li = that.selectpicker.main.data[index],\r\n                liPrev = that.selectpicker.main.data[prevIndex];\r\n\r\n            if (li.type !== 'divider' || (li.type === 'divider' && liPrev && liPrev.type !== 'divider' && cacheLen - 1 !== i)) {\r\n              that.selectpicker.search.data.push(li);\r\n              searchMatch.push(that.selectpicker.main.elements[index]);\r\n            }\r\n          }\r\n\r\n          that.activeIndex = undefined;\r\n          that.noScroll = true;\r\n          that.$menuInner.scrollTop(0);\r\n          that.selectpicker.search.elements = searchMatch;\r\n          that.createView(true);\r\n          showNoResults.call(that, searchMatch, searchValue);\r\n        } else if (that.selectpicker.search.previousValue) { // for IE11 (#2402)\r\n          that.$menuInner.scrollTop(0);\r\n          that.createView(false);\r\n        }\r\n\r\n        that.selectpicker.search.previousValue =  searchValue;\r\n      });\r\n    },\r\n\r\n    _searchStyle: function () {\r\n      return this.options.liveSearchStyle || 'contains';\r\n    },\r\n\r\n    val: function (value) {\r\n      var element = this.$element[0];\r\n\r\n      if (typeof value !== 'undefined') {\r\n        var prevValue = getSelectValues(element);\r\n\r\n        changedArguments = [null, null, prevValue];\r\n\r\n        this.$element\r\n          .val(value)\r\n          .trigger('changed' + EVENT_KEY, changedArguments);\r\n\r\n        if (this.$newElement.hasClass(classNames.SHOW)) {\r\n          if (this.multiple) {\r\n            this.setOptionStatus(true);\r\n          } else {\r\n            var liSelectedIndex = (element.options[element.selectedIndex] || {}).liIndex;\r\n\r\n            if (typeof liSelectedIndex === 'number') {\r\n              this.setSelected(this.selectedIndex, false);\r\n              this.setSelected(liSelectedIndex, true);\r\n            }\r\n          }\r\n        }\r\n\r\n        this.render();\r\n\r\n        changedArguments = null;\r\n\r\n        return this.$element;\r\n      } else {\r\n        return this.$element.val();\r\n      }\r\n    },\r\n\r\n    changeAll: function (status) {\r\n      if (!this.multiple) return;\r\n      if (typeof status === 'undefined') status = true;\r\n\r\n      var element = this.$element[0],\r\n          previousSelected = 0,\r\n          currentSelected = 0,\r\n          prevValue = getSelectValues(element);\r\n\r\n      element.classList.add('bs-select-hidden');\r\n\r\n      for (var i = 0, data = this.selectpicker.current.data, len = data.length; i < len; i++) {\r\n        var liData = data[i],\r\n            option = liData.option;\r\n\r\n        if (option && !liData.disabled && liData.type !== 'divider') {\r\n          if (liData.selected) previousSelected++;\r\n          option.selected = status;\r\n          if (status === true) currentSelected++;\r\n        }\r\n      }\r\n\r\n      element.classList.remove('bs-select-hidden');\r\n\r\n      if (previousSelected === currentSelected) return;\r\n\r\n      this.setOptionStatus();\r\n\r\n      changedArguments = [null, null, prevValue];\r\n\r\n      this.$element\r\n        .triggerNative('change');\r\n    },\r\n\r\n    selectAll: function () {\r\n      return this.changeAll(true);\r\n    },\r\n\r\n    deselectAll: function () {\r\n      return this.changeAll(false);\r\n    },\r\n\r\n    toggle: function (e) {\r\n      e = e || window.event;\r\n\r\n      if (e) e.stopPropagation();\r\n\r\n      this.$button.trigger('click.bs.dropdown.data-api');\r\n    },\r\n\r\n    keydown: function (e) {\r\n      var $this = $(this),\r\n          isToggle = $this.hasClass('dropdown-toggle'),\r\n          $parent = isToggle ? $this.closest('.dropdown') : $this.closest(Selector.MENU),\r\n          that = $parent.data('this'),\r\n          $items = that.findLis(),\r\n          index,\r\n          isActive,\r\n          liActive,\r\n          activeLi,\r\n          offset,\r\n          updateScroll = false,\r\n          downOnTab = e.which === keyCodes.TAB && !isToggle && !that.options.selectOnTab,\r\n          isArrowKey = REGEXP_ARROW.test(e.which) || downOnTab,\r\n          scrollTop = that.$menuInner[0].scrollTop,\r\n          isVirtual = that.isVirtual(),\r\n          position0 = isVirtual === true ? that.selectpicker.view.position0 : 0;\r\n\r\n      // do nothing if a function key is pressed\r\n      if (e.which >= 112 && e.which <= 123) return;\r\n\r\n      isActive = that.$newElement.hasClass(classNames.SHOW);\r\n\r\n      if (\r\n        !isActive &&\r\n        (\r\n          isArrowKey ||\r\n          (e.which >= 48 && e.which <= 57) ||\r\n          (e.which >= 96 && e.which <= 105) ||\r\n          (e.which >= 65 && e.which <= 90)\r\n        )\r\n      ) {\r\n        that.$button.trigger('click.bs.dropdown.data-api');\r\n\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.trigger('focus');\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (e.which === keyCodes.ESCAPE && isActive) {\r\n        e.preventDefault();\r\n        that.$button.trigger('click.bs.dropdown.data-api').trigger('focus');\r\n      }\r\n\r\n      if (isArrowKey) { // if up or down\r\n        if (!$items.length) return;\r\n\r\n        liActive = that.selectpicker.main.elements[that.activeIndex];\r\n        index = liActive ? Array.prototype.indexOf.call(liActive.parentElement.children, liActive) : -1;\r\n\r\n        if (index !== -1) {\r\n          that.defocusItem(liActive);\r\n        }\r\n\r\n        if (e.which === keyCodes.ARROW_UP) { // up\r\n          if (index !== -1) index--;\r\n          if (index + position0 < 0) index += $items.length;\r\n\r\n          if (!that.selectpicker.view.canHighlight[index + position0]) {\r\n            index = that.selectpicker.view.canHighlight.slice(0, index + position0).lastIndexOf(true) - position0;\r\n            if (index === -1) index = $items.length - 1;\r\n          }\r\n        } else if (e.which === keyCodes.ARROW_DOWN || downOnTab) { // down\r\n          index++;\r\n          if (index + position0 >= that.selectpicker.view.canHighlight.length) index = that.selectpicker.view.firstHighlightIndex;\r\n\r\n          if (!that.selectpicker.view.canHighlight[index + position0]) {\r\n            index = index + 1 + that.selectpicker.view.canHighlight.slice(index + position0 + 1).indexOf(true);\r\n          }\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        var liActiveIndex = position0 + index;\r\n\r\n        if (e.which === keyCodes.ARROW_UP) { // up\r\n          // scroll to bottom and highlight last option\r\n          if (position0 === 0 && index === $items.length - 1) {\r\n            that.$menuInner[0].scrollTop = that.$menuInner[0].scrollHeight;\r\n\r\n            liActiveIndex = that.selectpicker.current.elements.length - 1;\r\n          } else {\r\n            activeLi = that.selectpicker.current.data[liActiveIndex];\r\n            offset = activeLi.position - activeLi.height;\r\n\r\n            updateScroll = offset < scrollTop;\r\n          }\r\n        } else if (e.which === keyCodes.ARROW_DOWN || downOnTab) { // down\r\n          // scroll to top and highlight first option\r\n          if (index === that.selectpicker.view.firstHighlightIndex) {\r\n            that.$menuInner[0].scrollTop = 0;\r\n\r\n            liActiveIndex = that.selectpicker.view.firstHighlightIndex;\r\n          } else {\r\n            activeLi = that.selectpicker.current.data[liActiveIndex];\r\n            offset = activeLi.position - that.sizeInfo.menuInnerHeight;\r\n\r\n            updateScroll = offset > scrollTop;\r\n          }\r\n        }\r\n\r\n        liActive = that.selectpicker.current.elements[liActiveIndex];\r\n\r\n        that.activeIndex = that.selectpicker.current.data[liActiveIndex].index;\r\n\r\n        that.focusItem(liActive);\r\n\r\n        that.selectpicker.view.currentActive = liActive;\r\n\r\n        if (updateScroll) that.$menuInner[0].scrollTop = offset;\r\n\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.trigger('focus');\r\n        } else {\r\n          $this.trigger('focus');\r\n        }\r\n      } else if (\r\n        (!$this.is('input') && !REGEXP_TAB_OR_ESCAPE.test(e.which)) ||\r\n        (e.which === keyCodes.SPACE && that.selectpicker.keydown.keyHistory)\r\n      ) {\r\n        var searchMatch,\r\n            matches = [],\r\n            keyHistory;\r\n\r\n        e.preventDefault();\r\n\r\n        that.selectpicker.keydown.keyHistory += keyCodeMap[e.which];\r\n\r\n        if (that.selectpicker.keydown.resetKeyHistory.cancel) clearTimeout(that.selectpicker.keydown.resetKeyHistory.cancel);\r\n        that.selectpicker.keydown.resetKeyHistory.cancel = that.selectpicker.keydown.resetKeyHistory.start();\r\n\r\n        keyHistory = that.selectpicker.keydown.keyHistory;\r\n\r\n        // if all letters are the same, set keyHistory to just the first character when searching\r\n        if (/^(.)\\1+$/.test(keyHistory)) {\r\n          keyHistory = keyHistory.charAt(0);\r\n        }\r\n\r\n        // find matches\r\n        for (var i = 0; i < that.selectpicker.current.data.length; i++) {\r\n          var li = that.selectpicker.current.data[i],\r\n              hasMatch;\r\n\r\n          hasMatch = stringSearch(li, keyHistory, 'startsWith', true);\r\n\r\n          if (hasMatch && that.selectpicker.view.canHighlight[i]) {\r\n            matches.push(li.index);\r\n          }\r\n        }\r\n\r\n        if (matches.length) {\r\n          var matchIndex = 0;\r\n\r\n          $items.removeClass('active').find('a').removeClass('active');\r\n\r\n          // either only one key has been pressed or they are all the same key\r\n          if (keyHistory.length === 1) {\r\n            matchIndex = matches.indexOf(that.activeIndex);\r\n\r\n            if (matchIndex === -1 || matchIndex === matches.length - 1) {\r\n              matchIndex = 0;\r\n            } else {\r\n              matchIndex++;\r\n            }\r\n          }\r\n\r\n          searchMatch = matches[matchIndex];\r\n\r\n          activeLi = that.selectpicker.main.data[searchMatch];\r\n\r\n          if (scrollTop - activeLi.position > 0) {\r\n            offset = activeLi.position - activeLi.height;\r\n            updateScroll = true;\r\n          } else {\r\n            offset = activeLi.position - that.sizeInfo.menuInnerHeight;\r\n            // if the option is already visible at the current scroll position, just keep it the same\r\n            updateScroll = activeLi.position > scrollTop + that.sizeInfo.menuInnerHeight;\r\n          }\r\n\r\n          liActive = that.selectpicker.main.elements[searchMatch];\r\n\r\n          that.activeIndex = matches[matchIndex];\r\n\r\n          that.focusItem(liActive);\r\n\r\n          if (liActive) liActive.firstChild.focus();\r\n\r\n          if (updateScroll) that.$menuInner[0].scrollTop = offset;\r\n\r\n          $this.trigger('focus');\r\n        }\r\n      }\r\n\r\n      // Select focused option if \"Enter\", \"Spacebar\" or \"Tab\" (when selectOnTab is true) are pressed inside the menu.\r\n      if (\r\n        isActive &&\r\n        (\r\n          (e.which === keyCodes.SPACE && !that.selectpicker.keydown.keyHistory) ||\r\n          e.which === keyCodes.ENTER ||\r\n          (e.which === keyCodes.TAB && that.options.selectOnTab)\r\n        )\r\n      ) {\r\n        if (e.which !== keyCodes.SPACE) e.preventDefault();\r\n\r\n        if (!that.options.liveSearch || e.which !== keyCodes.SPACE) {\r\n          that.$menuInner.find('.active a').trigger('click', true); // retain active class\r\n          $this.trigger('focus');\r\n\r\n          if (!that.options.liveSearch) {\r\n            // Prevent screen from scrolling if the user hits the spacebar\r\n            e.preventDefault();\r\n            // Fixes spacebar selection of dropdown items in FF & IE\r\n            $(document).data('spaceSelect', true);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    mobile: function () {\r\n      // ensure mobile is set to true if mobile function is called after init\r\n      this.options.mobile = true;\r\n      this.$element[0].classList.add('mobile-device');\r\n    },\r\n\r\n    refresh: function () {\r\n      // update options if data attributes have been changed\r\n      var config = $.extend({}, this.options, this.$element.data());\r\n      this.options = config;\r\n\r\n      this.checkDisabled();\r\n      this.buildData();\r\n      this.setStyle();\r\n      this.render();\r\n      this.buildList();\r\n      this.setWidth();\r\n\r\n      this.setSize(true);\r\n\r\n      this.$element.trigger('refreshed' + EVENT_KEY);\r\n    },\r\n\r\n    hide: function () {\r\n      this.$newElement.hide();\r\n    },\r\n\r\n    show: function () {\r\n      this.$newElement.show();\r\n    },\r\n\r\n    remove: function () {\r\n      this.$newElement.remove();\r\n      this.$element.remove();\r\n    },\r\n\r\n    destroy: function () {\r\n      this.$newElement.before(this.$element).remove();\r\n\r\n      if (this.$bsContainer) {\r\n        this.$bsContainer.remove();\r\n      } else {\r\n        this.$menu.remove();\r\n      }\r\n\r\n      if (this.selectpicker.view.titleOption && this.selectpicker.view.titleOption.parentNode) {\r\n        this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption);\r\n      }\r\n\r\n      this.$element\r\n        .off(EVENT_KEY)\r\n        .removeData('selectpicker')\r\n        .removeClass('bs-select-hidden selectpicker');\r\n\r\n      $(window).off(EVENT_KEY + '.' + this.selectId);\r\n    }\r\n  };\r\n\r\n  // SELECTPICKER PLUGIN DEFINITION\r\n  // ==============================\r\n  function Plugin (option) {\r\n    // get the args of the outer function..\r\n    var args = arguments;\r\n    // The arguments of the function are explicitly re-defined from the argument list, because the shift causes them\r\n    // to get lost/corrupted in android 2.3 and IE9 #715 #775\r\n    var _option = option;\r\n\r\n    [].shift.apply(args);\r\n\r\n    // if the version was not set successfully\r\n    if (!version.success) {\r\n      // try to retreive it again\r\n      try {\r\n        version.full = ($.fn.dropdown.Constructor.VERSION || '').split(' ')[0].split('.');\r\n      } catch (err) {\r\n        // fall back to use BootstrapVersion if set\r\n        if (Selectpicker.BootstrapVersion) {\r\n          version.full = Selectpicker.BootstrapVersion.split(' ')[0].split('.');\r\n        } else {\r\n          version.full = [version.major, '0', '0'];\r\n\r\n          console.warn(\r\n            'There was an issue retrieving Bootstrap\\'s version. ' +\r\n            'Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. ' +\r\n            'If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.',\r\n            err\r\n          );\r\n        }\r\n      }\r\n\r\n      version.major = version.full[0];\r\n      version.success = true;\r\n    }\r\n\r\n    if (version.major === '4') {\r\n      // some defaults need to be changed if using Bootstrap 4\r\n      // check to see if they have already been manually changed before forcing them to update\r\n      var toUpdate = [];\r\n\r\n      if (Selectpicker.DEFAULTS.style === classNames.BUTTONCLASS) toUpdate.push({ name: 'style', className: 'BUTTONCLASS' });\r\n      if (Selectpicker.DEFAULTS.iconBase === classNames.ICONBASE) toUpdate.push({ name: 'iconBase', className: 'ICONBASE' });\r\n      if (Selectpicker.DEFAULTS.tickIcon === classNames.TICKICON) toUpdate.push({ name: 'tickIcon', className: 'TICKICON' });\r\n\r\n      classNames.DIVIDER = 'dropdown-divider';\r\n      classNames.SHOW = 'show';\r\n      classNames.BUTTONCLASS = 'btn-light';\r\n      classNames.POPOVERHEADER = 'popover-header';\r\n      classNames.ICONBASE = '';\r\n      classNames.TICKICON = 'bs-ok-default';\r\n\r\n      for (var i = 0; i < toUpdate.length; i++) {\r\n        var option = toUpdate[i];\r\n        Selectpicker.DEFAULTS[option.name] = classNames[option.className];\r\n      }\r\n    }\r\n\r\n    var value;\r\n    var chain = this.each(function () {\r\n      var $this = $(this);\r\n      if ($this.is('select')) {\r\n        var data = $this.data('selectpicker'),\r\n            options = typeof _option == 'object' && _option;\r\n\r\n        if (!data) {\r\n          var dataAttributes = $this.data();\r\n\r\n          for (var dataAttr in dataAttributes) {\r\n            if (Object.prototype.hasOwnProperty.call(dataAttributes, dataAttr) && $.inArray(dataAttr, DISALLOWED_ATTRIBUTES) !== -1) {\r\n              delete dataAttributes[dataAttr];\r\n            }\r\n          }\r\n\r\n          var config = $.extend({}, Selectpicker.DEFAULTS, $.fn.selectpicker.defaults || {}, dataAttributes, options);\r\n          config.template = $.extend({}, Selectpicker.DEFAULTS.template, ($.fn.selectpicker.defaults ? $.fn.selectpicker.defaults.template : {}), dataAttributes.template, options.template);\r\n          $this.data('selectpicker', (data = new Selectpicker(this, config)));\r\n        } else if (options) {\r\n          for (var i in options) {\r\n            if (Object.prototype.hasOwnProperty.call(options, i)) {\r\n              data.options[i] = options[i];\r\n            }\r\n          }\r\n        }\r\n\r\n        if (typeof _option == 'string') {\r\n          if (data[_option] instanceof Function) {\r\n            value = data[_option].apply(data, args);\r\n          } else {\r\n            value = data.options[_option];\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    if (typeof value !== 'undefined') {\r\n      // noinspection JSUnusedAssignment\r\n      return value;\r\n    } else {\r\n      return chain;\r\n    }\r\n  }\r\n\r\n  var old = $.fn.selectpicker;\r\n  $.fn.selectpicker = Plugin;\r\n  $.fn.selectpicker.Constructor = Selectpicker;\r\n\r\n  // SELECTPICKER NO CONFLICT\r\n  // ========================\r\n  $.fn.selectpicker.noConflict = function () {\r\n    $.fn.selectpicker = old;\r\n    return this;\r\n  };\r\n\r\n  // get Bootstrap's keydown event handler for either Bootstrap 4 or Bootstrap 3\r\n  function keydownHandler () {\r\n    if ($.fn.dropdown) {\r\n      // wait to define until function is called in case Bootstrap isn't loaded yet\r\n      var bootstrapKeydown = $.fn.dropdown.Constructor._dataApiKeydownHandler || $.fn.dropdown.Constructor.prototype.keydown;\r\n      return bootstrapKeydown.apply(this, arguments);\r\n    }\r\n  }\r\n\r\n  $(document)\r\n    .off('keydown.bs.dropdown.data-api')\r\n    .on('keydown.bs.dropdown.data-api', ':not(.bootstrap-select) > [data-toggle=\"dropdown\"]', keydownHandler)\r\n    .on('keydown.bs.dropdown.data-api', ':not(.bootstrap-select) > .dropdown-menu', keydownHandler)\r\n    .on('keydown' + EVENT_KEY, '.bootstrap-select [data-toggle=\"dropdown\"], .bootstrap-select [role=\"listbox\"], .bootstrap-select .bs-searchbox input', Selectpicker.prototype.keydown)\r\n    .on('focusin.modal', '.bootstrap-select [data-toggle=\"dropdown\"], .bootstrap-select [role=\"listbox\"], .bootstrap-select .bs-searchbox input', function (e) {\r\n      e.stopPropagation();\r\n    });\r\n\r\n  // SELECTPICKER DATA-API\r\n  // =====================\r\n  $(window).on('load' + EVENT_KEY + '.data-api', function () {\r\n    $('.selectpicker').each(function () {\r\n      var $selectpicker = $(this);\r\n      Plugin.call($selectpicker, $selectpicker.data());\r\n    })\r\n  });\r\n})(jQuery);\r\n"]},"metadata":{},"sourceType":"script"}